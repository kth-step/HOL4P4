% generated by Ott 0.31 from: ott/p4.ott ott/p4_sem.ott ott/p4_types.ott
\newcommand{\ottdrule}[4][]{{\displaystyle\frac{\begin{array}{l}#2\end{array}}{#3}\quad\ottdrulename{#4}}}
\newcommand{\ottusedrule}[1]{\[#1\]}
\newcommand{\ottpremise}[1]{ #1 \\}
\newenvironment{ottdefnblock}[3][]{ \framebox{\mbox{#2}} \quad #3 \\[0pt]}{}
\newenvironment{ottfundefnblock}[3][]{ \framebox{\mbox{#2}} \quad #3 \\[0pt]\begin{displaymath}\begin{array}{l}}{\end{array}\end{displaymath}}
\newcommand{\ottfunclause}[2]{ #1 \equiv #2 \\}
\newcommand{\ottnt}[1]{\mathit{#1}}
\newcommand{\ottmv}[1]{\mathit{#1}}
\newcommand{\ottkw}[1]{\mathbf{#1}}
\newcommand{\ottsym}[1]{#1}
\newcommand{\ottcom}[1]{\text{#1}}
\newcommand{\ottdrulename}[1]{\textsc{#1}}
\newcommand{\ottcomplu}[5]{\overline{#1}^{\,#2\in #3 #4 #5}}
\newcommand{\ottcompu}[3]{\overline{#1}^{\,#2<#3}}
\newcommand{\ottcomp}[2]{\overline{#1}^{\,#2}}
\newcommand{\ottgrammartabular}[1]{\begin{supertabular}{llcllllll}#1\end{supertabular}}
\newcommand{\ottmetavartabular}[1]{\begin{supertabular}{ll}#1\end{supertabular}}
\newcommand{\ottrulehead}[3]{$#1$ & & $#2$ & & & \multicolumn{2}{l}{#3}}
\newcommand{\ottprodline}[6]{& & $#1$ & $#2$ & $#3 #4$ & $#5$ & $#6$}
\newcommand{\ottfirstprodline}[6]{\ottprodline{#1}{#2}{#3}{#4}{#5}{#6}}
\newcommand{\ottlongprodline}[2]{& & $#1$ & \multicolumn{4}{l}{$#2$}}
\newcommand{\ottfirstlongprodline}[2]{\ottlongprodline{#1}{#2}}
\newcommand{\ottbindspecprodline}[6]{\ottprodline{#1}{#2}{#3}{#4}{#5}{#6}}
\newcommand{\ottprodnewline}{\\}
\newcommand{\ottinterrule}{\\[5.0mm]}
\newcommand{\ottafterlastrule}{\\}
\newcommand{\ottmetavars}{
\ottmetavartabular{
 $ x ,\, f ,\, tbl $ & \ottcom{string} \\
 $ b $ & \ottcom{boolean} \\
 $ bl $ & \ottcom{bit-string} \\
 $ i ,\, w $ & \ottcom{natural number} \\
 $ \ottmv{m} ,\, \ottmv{n} ,\, \ottmv{o} $ & \ottcom{indices} \\
}}

\newcommand{\ottnumXXexp}{
\ottrulehead{\ottnt{num\_exp}}{::=}{\ottcom{expressions with numerals}}\ottprodnewline
\ottfirstprodline{|}{\ottsym{1}} {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{i} {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{num\_exp}  \ottsym{+}  \ottnt{num\_exp'}} {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{num\_exp}  \ottsym{-}  \ottnt{num\_exp'}} {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{(}  \ottnt{num\_exp}  \ottsym{)}} {\textsf{M}}{}{}{}}

\newcommand{\ottboolv}{
\ottrulehead{\ottnt{boolv}}{::=}{\ottcom{boolean}}\ottprodnewline
\ottfirstprodline{|}{ { \top } } {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{ { \bot } } {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{b} {\textsf{M}}{}{}{}}

\newcommand{\ottbitv}{
\ottrulehead{\ottnt{bitv}}{::=}{\ottcom{bit-string}}\ottprodnewline
\ottfirstprodline{|}{bl \, \ottmv{n}} {\textsf{M}}{}{}{}}

\newcommand{\ottv}{
\ottrulehead{\ottnt{v}}{::=}{\ottcom{value}}\ottprodnewline
\ottfirstprodline{|}{\ottnt{boolv}}{}{}{}{\ottcom{boolean value}}\ottprodnewline
\ottprodline{|}{\ottnt{bitv}}{}{}{}{\ottcom{bit-string}}\ottprodnewline
\ottprodline{|}{x}{}{}{}{\ottcom{string literal}}\ottprodnewline
\ottprodline{|}{\ottkw{struct} \, \ottsym{\{}  x_{{\mathrm{1}}}  \ottsym{=}  \ottnt{v_{{\mathrm{1}}}}  \ottsym{;} \, ... \, \ottsym{;}  x_{\ottmv{n}}  \ottsym{=}  \ottnt{v_{\ottmv{n}}}  \ottsym{\}}}{}{}{}{\ottcom{struct}}\ottprodnewline
\ottprodline{|}{\ottkw{header} \, \ottnt{boolv}  \ottsym{\{}  x_{{\mathrm{1}}}  \ottsym{=}  \ottnt{v_{{\mathrm{1}}}}  \ottsym{;} \, ... \, \ottsym{;}  x_{\ottmv{n}}  \ottsym{=}  \ottnt{v_{\ottmv{n}}}  \ottsym{\}}}{}{}{}{\ottcom{header}}\ottprodnewline
\ottprodline{|}{\ottkw{errmsg} \, x}{}{}{}{\ottcom{error message}}\ottprodnewline
\ottprodline{|}{\ottkw{ext\_ref} \, i}{}{}{}{\ottcom{extern object reference}}\ottprodnewline
\ottprodline{|}{\ottkw{bot}}{}{}{}{\ottcom{no value}}}

\newcommand{\ottvXXlist}{
\ottrulehead{\ottnt{v\_list}}{::=}{\ottcom{list of values}}\ottprodnewline
\ottfirstprodline{|}{\ottkw{empty\_vl}} {\textsf{M}}{}{}{\ottcom{empty expression list}}\ottprodnewline
\ottprodline{|}{\ottnt{v_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{v_{\ottmv{n}}}} {\textsf{M}}{}{}{}}

\newcommand{\ottfunn}{
\ottrulehead{\ottnt{funn}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{f}{}{}{}{\ottcom{function name}}\ottprodnewline
\ottprodline{|}{\ottkw{inst} \, f}{}{}{}{\ottcom{extern object instantiation}}\ottprodnewline
\ottprodline{|}{f \, f'}{}{}{}{\ottcom{extern method call}}}

\newcommand{\ottvarn}{
\ottrulehead{\ottnt{varn}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{x}{}{}{}{\ottcom{variable name}}\ottprodnewline
\ottprodline{|}{\ottsym{(} \, \ottkw{star} \, \ottsym{,}  \ottnt{funn}  \ottsym{)}}{}{}{}{\ottcom{function return placeholder}}}

\newcommand{\ottlval}{
\ottrulehead{\ottnt{lval}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\ottnt{varn}}{}{}{}{\ottcom{variable name}}\ottprodnewline
\ottprodline{|}{\ottkw{null}}{}{}{}{\ottcom{null variable}}\ottprodnewline
\ottprodline{|}{\ottnt{lval}  \ottsym{.}  f}{}{}{}{\ottcom{field access}}\ottprodnewline
\ottprodline{|}{\ottsym{(}  \ottnt{lval}  \ottsym{)}}{}{}{}{}}

\newcommand{\ottstatus}{
\ottrulehead{t}{::=}{\ottcom{execution status}}\ottprodnewline
\ottfirstprodline{|}{ { \mathbf{run} } }{}{}{}{}\ottprodnewline
\ottprodline{|}{ { \mathbf{ret} \;  \ottnt{v}  } }{}{}{}{}\ottprodnewline
\ottprodline{|}{ { \mathbf{tra} \;  x  } }{}{}{}{\ottcom{transition to parser state}}}

\newcommand{\ottscope}{
\ottrulehead{\gamma}{::=}{\ottcom{variable environment of current scope}}\ottprodnewline
\ottfirstprodline{|}{ {\gamma}_{\emptyset} } {\textsf{M}}{}{}{\ottcom{empty scope}}\ottprodnewline
\ottprodline{|}{ \gamma } {\textsf{S}}{}{}{}}

\newcommand{\ottgXXscope}{
\ottrulehead{\gamma_{ \mathrm{G} }}{::=}{\ottcom{global scope}}\ottprodnewline
\ottfirstprodline{|}{\gamma} {\textsf{M}}{}{}{}}

\newcommand{\ottmk}{
\ottrulehead{\mathit{mk}}{::=}{\ottcom{matching kinds}}\ottprodnewline
\ottfirstprodline{|}{ \mathrm{exact} }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \mathrm{ternary} }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \mathrm{lpm} }{}{}{}{}}

\newcommand{\ottmkXXlist}{
\ottrulehead{\mathit{mk\_list}}{::=}{\ottcom{matching kinds list}}\ottprodnewline
\ottfirstprodline{|}{\ottkw{empty}}{}{}{}{\ottcom{empty match kind list}}\ottprodnewline
\ottprodline{|}{\ottsym{[}  \mathit{mk}_{{\mathrm{1}}}  \ottsym{,} \, .. \, \ottsym{,}  \mathit{mk}_{\ottmv{n}}  \ottsym{]}} {\textsf{M}}{}{}{\ottcom{list of match kinds}}\ottprodnewline
\ottprodline{|}{\ottsym{(}  \mathit{mk\_list}  \ottsym{)}} {\textsf{S}}{}{}{}}

\newcommand{\ottunop}{
\ottrulehead{\ominus}{::=}{}\ottprodnewline
\ottfirstprodline{|}{ ! }{}{}{}{\ottcom{negation}}\ottprodnewline
\ottprodline{|}{ \neg }{}{}{}{\ottcom{bitwise complement}}\ottprodnewline
\ottprodline{|}{\ottsym{-}}{}{}{}{\ottcom{signed negation}}\ottprodnewline
\ottprodline{|}{\ottsym{+}}{}{}{}{\ottcom{unary plus}}}

\newcommand{\ottbinop}{
\ottrulehead{\oplus}{::=}{}\ottprodnewline
\ottfirstprodline{|}{ \times }{}{}{}{\ottcom{multiplication}}\ottprodnewline
\ottprodline{|}{\ottsym{/}}{}{}{}{\ottcom{division}}\ottprodnewline
\ottprodline{|}{ \bmod }{}{}{}{\ottcom{modulo}}\ottprodnewline
\ottprodline{|}{\ottsym{+}}{}{}{}{\ottcom{addition}}\ottprodnewline
\ottprodline{|}{\ottsym{-}}{}{}{}{\ottcom{subtraction}}\ottprodnewline
\ottprodline{|}{ \ll }{}{}{}{\ottcom{logical left-shift}}\ottprodnewline
\ottprodline{|}{ \gg }{}{}{}{\ottcom{logical right-shift}}\ottprodnewline
\ottprodline{|}{ \leq }{}{}{}{\ottcom{less or equal}}\ottprodnewline
\ottprodline{|}{ \geq }{}{}{}{\ottcom{greater or equal}}\ottprodnewline
\ottprodline{|}{ < }{}{}{}{\ottcom{less}}\ottprodnewline
\ottprodline{|}{ > }{}{}{}{\ottcom{greater}}\ottprodnewline
\ottprodline{|}{ \neq }{}{}{}{\ottcom{not equal}}\ottprodnewline
\ottprodline{|}{ = }{}{}{}{\ottcom{equal}}\ottprodnewline
\ottprodline{|}{\ottsym{\&}}{}{}{}{\ottcom{bitwise and}}\ottprodnewline
\ottprodline{|}{ \underline{\vee} }{}{}{}{\ottcom{bitwise xor}}\ottprodnewline
\ottprodline{|}{ \mid }{}{}{}{\ottcom{bitwise or}}\ottprodnewline
\ottprodline{|}{ \land }{}{}{}{\ottcom{binary and}}\ottprodnewline
\ottprodline{|}{ \lor }{}{}{}{\ottcom{binary or}}}

\newcommand{\otte}{
\ottrulehead{\ottnt{e}}{::=}{\ottcom{expression}}\ottprodnewline
\ottfirstprodline{|}{\ottnt{v}}{}{}{}{\ottcom{value}}\ottprodnewline
\ottprodline{|}{\ottkw{var} \, \ottnt{varn}}{}{}{}{\ottcom{variable}}\ottprodnewline
\ottprodline{|}{\ottsym{\{}  \ottnt{e_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{e_{\ottmv{n}}}  \ottsym{\}}}{}{}{}{\ottcom{expression list}}\ottprodnewline
\ottprodline{|}{\ottnt{e}  \ottsym{.}  x}{}{}{}{\ottcom{field access}}\ottprodnewline
\ottprodline{|}{ \ominus   \ottnt{e} }{}{}{}{\ottcom{unary operation}}\ottprodnewline
\ottprodline{|}{ \ottnt{e_{{\mathrm{1}}}}   \oplus   \ottnt{e_{{\mathrm{2}}}} }{}{}{}{\ottcom{binary operation}}\ottprodnewline
\ottprodline{|}{\ottkw{concat} \, \ottnt{e_{{\mathrm{1}}}} \, \ottnt{e_{{\mathrm{2}}}}}{}{}{}{\ottcom{concatenation of bit-strings}}\ottprodnewline
\ottprodline{|}{\ottnt{e_{{\mathrm{1}}}}  \ottsym{[}  \ottnt{e_{{\mathrm{2}}}}  \ottsym{:}  \ottnt{e_{{\mathrm{3}}}}  \ottsym{]}}{}{}{}{\ottcom{bit-slice}}\ottprodnewline
\ottprodline{|}{\ottkw{call} \, \ottnt{funn}  \ottsym{(}  \ottnt{e_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{e_{\ottmv{n}}}  \ottsym{)}}{}{}{}{\ottcom{function or extern call}}\ottprodnewline
\ottprodline{|}{\ottkw{select} \, \ottnt{e}  \ottsym{\{}  \ottnt{v_{{\mathrm{1}}}}  \ottsym{:}  x_{{\mathrm{1}}}  \ottsym{;} \, ... \, \ottsym{;}  \ottnt{v_{\ottmv{n}}}  \ottsym{:}  x_{\ottmv{n}}  \ottsym{\}}  x}{}{}{}{\ottcom{select}}\ottprodnewline
\ottprodline{|}{\ottkw{eStruct} \, \ottsym{\{}  x_{{\mathrm{1}}}  \ottsym{=}  \ottnt{e_{{\mathrm{1}}}}  \ottsym{;} \, ... \, \ottsym{;}  x_{\ottmv{n}}  \ottsym{=}  \ottnt{e_{\ottmv{n}}}  \ottsym{\}}}{}{}{}{\ottcom{struct}}\ottprodnewline
\ottprodline{|}{\ottkw{eHeader} \, \ottnt{boolv}  \ottsym{\{}  x_{{\mathrm{1}}}  \ottsym{=}  \ottnt{e_{{\mathrm{1}}}}  \ottsym{;} \, ... \, \ottsym{;}  x_{\ottmv{n}}  \ottsym{=}  \ottnt{e_{\ottmv{n}}}  \ottsym{\}}}{}{}{}{\ottcom{header}}\ottprodnewline
\ottprodline{|}{\ottsym{(}  \ottnt{e}  \ottsym{)}} {\textsf{S}}{}{}{}}

\newcommand{\otteXXlist}{
\ottrulehead{\ottnt{e\_list}}{::=}{\ottcom{list of expressions}}\ottprodnewline
\ottfirstprodline{|}{\ottkw{empty\_el}} {\textsf{M}}{}{}{\ottcom{empty expression list}}\ottprodnewline
\ottprodline{|}{\ottnt{e_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{e_{\ottmv{n}}}} {\textsf{M}}{}{}{\ottcom{list of expressions}}\ottprodnewline
\ottprodline{|}{\ottnt{e}  \ottsym{::}  \ottnt{e\_list}} {\textsf{M}}{}{}{\ottcom{cons}}\ottprodnewline
\ottprodline{|}{\ottkw{tl} \, \ottnt{e\_list}} {\textsf{M}}{}{}{\ottcom{tail}}\ottprodnewline
\ottprodline{|}{\ottsym{[}  \ottnt{e_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{e_{\ottmv{n}}}  \ottsym{]}} {\textsf{M}}{}{}{\ottcom{bracketed list of expressions}}\ottprodnewline
\ottprodline{|}{\ottnt{e\_list}  \ottsym{++}  \ottnt{e\_list'}} {\textsf{M}}{}{}{\ottcom{append two expression lists}}\ottprodnewline
\ottprodline{|}{ ( i  \mapsto   \ottnt{e} )  \ottnt{e\_list} } {\textsf{M}}{}{}{\ottcom{update entry of expression list}}\ottprodnewline
\ottprodline{|}{\ottsym{(}  \ottnt{e\_list}  \ottsym{)}} {\textsf{S}}{}{}{}}

\newcommand{\ottgXXscopeXXlist}{
\ottrulehead{\overline{\gamma_G}}{::=}{\ottcom{list of the global scope and the block-global scope}}\ottprodnewline
\ottfirstprodline{|}{ [  \gamma_{ \mathrm{G} }  ] } {\textsf{M}}{}{}{\ottcom{only global scope}}\ottprodnewline
\ottprodline{|}{ [  \gamma_{ \mathrm{G} } ,  \gamma_{ \mathrm{G} }'  ] } {\textsf{M}}{}{}{\ottcom{global scope and block-global scope}}\ottprodnewline
\ottprodline{|}{ \mathrm{take}(1, \overline{\gamma_G} ) } {\textsf{M}}{}{}{\ottcom{take first element}}\ottprodnewline
\ottprodline{|}{ \mathrm{lastn}( \ottnt{num\_exp} , \overline{\gamma_G} ) } {\textsf{M}}{}{}{\ottcom{last n elements}}}

\newcommand{\ottscopeXXlist}{
\ottrulehead{\overline{\gamma}}{::=}{\ottcom{stack of block scopes}}\ottprodnewline
\ottfirstprodline{|}{ {[\;]} } {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{[}  \gamma_{{\mathrm{1}}}  \ottsym{,} \, .. \, \ottsym{,}  \gamma_{\ottmv{n}}  \ottsym{]}} {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{ \mathrm{tl} \;  \overline{\gamma} } {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{ \gamma_{ \mathrm{G} }  ::  \overline{\gamma}' } {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{ \overline{\gamma}  \mathrel{\mathop+}+  \overline{\gamma}' } {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{ \mathrm{rev} ( \overline{\gamma} ) } {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{ ( i  \mapsto  \gamma )  \overline{\gamma} } {\textsf{M}}{}{}{\ottcom{update a scope in the stack frame}}\ottprodnewline
\ottprodline{|}{ \overline{\gamma_G} } {\textsf{M}}{}{}{\ottcom{g_scope_list}}\ottprodnewline
\ottprodline{|}{\ottsym{(}  \overline{\gamma}  \ottsym{)}} {\textsf{S}}{}{}{}}

\newcommand{\ottextXXfun}{
\ottrulehead{{ \mathit{ext\_fun} }}{::=}{}}

\newcommand{\ottascope}{
\ottrulehead{{ {\gamma}_A }  ,\ \ottnt{ascope\_ty}}{::=}{\ottcom{architectural scope}}}

\newcommand{\ottd}{
\ottrulehead{d}{::=}{\ottcom{parameter direction}}\ottprodnewline
\ottfirstprodline{|}{ \downarrow }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \uparrow }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \updownarrow }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \circ }{}{}{}{}}

\newcommand{\ottff}{
\ottrulehead{{ \mathit{ff} }}{::=}{}}

\newcommand{\ottdXXlist}{
\ottrulehead{\ottnt{d\_list}}{::=}{\ottcom{list of directions}}\ottprodnewline
\ottfirstprodline{|}{\ottkw{empty}} {\textsf{M}}{}{}{\ottcom{empty direction list}}\ottprodnewline
\ottprodline{|}{\ottsym{[}  d_{{\mathrm{1}}}  \ottsym{,} \, .. \, \ottsym{,}  d_{\ottmv{n}}  \ottsym{]}} {\textsf{M}}{}{}{\ottcom{list of directions}}\ottprodnewline
\ottprodline{|}{\ottnt{d\_list}  \ottsym{++}  \ottnt{d\_list'}} {\textsf{M}}{}{}{\ottcom{append two e_lists}}\ottprodnewline
\ottprodline{|}{\ottsym{(}  \ottnt{d\_list}  \ottsym{)}} {\textsf{S}}{}{}{}}

\newcommand{\ottxXXlist}{
\ottrulehead{\ottnt{x\_list}}{::=}{\ottcom{list of strings}}\ottprodnewline
\ottfirstprodline{|}{\ottkw{empty}} {\textsf{M}}{}{}{\ottcom{empty list}}\ottprodnewline
\ottprodline{|}{\ottsym{[}  x_{{\mathrm{1}}}  \ottsym{,} \, .. \, \ottsym{,}  x_{\ottmv{n}}  \ottsym{]}} {\textsf{M}}{}{}{\ottcom{list of strings}}\ottprodnewline
\ottprodline{|}{\ottnt{x\_list}  \ottsym{++}  \ottnt{x\_list'}} {\textsf{M}}{}{}{\ottcom{append lists}}\ottprodnewline
\ottprodline{|}{\ottsym{(}  \ottnt{x\_list}  \ottsym{)}} {\textsf{S}}{}{}{}}

\newcommand{\ottstructXXty}{
\ottrulehead{\ottnt{struct\_ty}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\ottkw{struct}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{header}}{}{}{}{}}

\newcommand{\otttau}{
\ottrulehead{\tau}{::=}{\ottcom{type}}\ottprodnewline
\ottfirstprodline{|}{\ottkw{bool}}{}{}{}{\ottcom{boolean}}\ottprodnewline
\ottprodline{|}{ { { \mathbf{bs} }^{ \ottnt{num\_exp} } } }{}{}{}{\ottcom{bit-string}}\ottprodnewline
\ottprodline{|}{ \bot }{}{}{}{\ottcom{no value}}\ottprodnewline
\ottprodline{|}{\ottnt{struct\_ty}  \ottsym{[}  x_{{\mathrm{1}}} \, \tau_{{\mathrm{1}}}  \ottsym{,} \, .. \, \ottsym{,}  x_{\ottmv{n}} \, \tau_{\ottmv{n}}  \ottsym{]}}{}{}{}{\ottcom{struct}}\ottprodnewline
\ottprodline{|}{\ottnt{x\_list}}{}{}{}{\ottcom{string literal}}\ottprodnewline
\ottprodline{|}{\ottkw{err}}{}{}{}{\ottcom{error}}\ottprodnewline
\ottprodline{|}{\ottkw{ext}}{}{}{}{\ottcom{extern}}}

\newcommand{\otttaul}{
\ottrulehead{\ottnt{taul}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\ottkw{empty}} {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{[}  \tau_{{\mathrm{1}}}  \ottsym{,} \, .. \, \ottsym{,}  \tau_{\ottmv{n}}  \ottsym{]}} {\textsf{M}}{}{}{}}

\newcommand{\ottFtau}{
\ottrulehead{\ottnt{Ftau}}{::=}{\ottcom{function names types}}\ottprodnewline
\ottfirstprodline{|}{\ottsym{[}  \tau_{{\mathrm{1}}} \, d_{{\mathrm{1}}}  \ottsym{,} \, .. \, \ottsym{,}  \tau_{\ottmv{n}} \, d_{\ottmv{n}}  \ottsym{]}  \tau} {\textsf{M}}{}{}{}}

\newcommand{\ottdeclXXlist}{
\ottrulehead{{ \overline{ \mathit{decl} } }}{::=}{\ottcom{list of abstract variable name and type tuples to represent declarations}}}

\newcommand{\ottstmt}{
\ottrulehead{\ottnt{stmt}}{::=}{\ottcom{statement}}\ottprodnewline
\ottfirstprodline{|}{ \emptyset_{ \mathrm{stmt} } }{}{}{}{\ottcom{empty statement}}\ottprodnewline
\ottprodline{|}{ \ottnt{lval}  \mathrel{\mathop:}=  \ottnt{e} }{}{}{}{\ottcom{assignment}}\ottprodnewline
\ottprodline{|}{\ottkw{if} \, \ottnt{e} \, \ottkw{then} \, \ottnt{stmt_{{\mathrm{1}}}} \, \ottkw{else} \, \ottnt{stmt_{{\mathrm{2}}}}}{}{}{}{\ottcom{conditional}}\ottprodnewline
\ottprodline{|}{ \{  { \overline{ \mathit{decl} } }  \,  \ottnt{stmt}  \} }{}{}{}{\ottcom{block}}\ottprodnewline
\ottprodline{|}{\ottkw{return} \, \ottnt{e}}{}{}{}{\ottcom{return}}\ottprodnewline
\ottprodline{|}{\ottnt{stmt_{{\mathrm{1}}}}  \ottsym{;}  \ottnt{stmt_{{\mathrm{2}}}}}{}{}{}{\ottcom{sequence}}\ottprodnewline
\ottprodline{|}{\ottkw{verify} \, \ottnt{e} \, \ottnt{e'}}{}{}{}{\ottcom{verify}}\ottprodnewline
\ottprodline{|}{ \mathbf{transition}\,  \ottnt{e} }{}{}{}{\ottcom{transition}}\ottprodnewline
\ottprodline{|}{\ottkw{apply} \, tbl  \ottsym{(}  \ottnt{e_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{e_{\ottmv{n}}}  \ottsym{)}}{}{}{}{\ottcom{apply}}\ottprodnewline
\ottprodline{|}{ \blacksquare }{}{}{}{\ottcom{extern}}}

\newcommand{\ottfuncXXmap}{
\ottrulehead{F_g}{::=}{\ottcom{function map for global functions and actions}}}

\newcommand{\ottbXXfuncXXmap}{
\ottrulehead{F_b}{::=}{\ottcom{function map for block-local actions}}}

\newcommand{\ottextXXfunXXmap}{
\ottrulehead{X_{ \mathrm{obj} }}{::=}{\ottcom{extern function map}}}

\newcommand{\ottextXXmap}{
\ottrulehead{X}{::=}{\ottcom{extern object map}}}

\newcommand{\otttblXXmap}{
\ottrulehead{{ \mathit{Tb} }}{::=}{\ottcom{table map}}}

\newcommand{\ottparsXXmap}{
\ottrulehead{P}{::=}{\ottcom{parser state map}}}

\newcommand{\ottinXXout}{
\ottrulehead{\ottnt{in\_out}}{::=}{\ottcom{input and output}}\ottprodnewline
\ottfirstprodline{|}{\ottkw{packet} \, bl \, i} {\textsf{M}}{}{}{}}

\newcommand{\ottpblXXtype}{
\ottrulehead{\ottnt{pbl\_type}}{::=}{\ottcom{programmable block type}}\ottprodnewline
\ottfirstprodline{|}{\ottkw{parser}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{control}}{}{}{}{}}

\newcommand{\ottpblock}{
\ottrulehead{{ \mathit{pblock} }}{::=}{\ottcom{programmable block}}\ottprodnewline
\ottfirstprodline{|}{\ottnt{pbl\_type}  \ottsym{(}  \ottsym{(}  x_{{\mathrm{1}}}  \ottsym{,}  d_{{\mathrm{1}}}  \ottsym{)}  \ottsym{,} \, .. \, \ottsym{,}  \ottsym{(}  x_{\ottmv{n}}  \ottsym{,}  d_{\ottmv{n}}  \ottsym{)}  \ottsym{)}  F_b \, { \overline{ \mathit{decl} } } \, \ottnt{stmt} \, P \, { \mathit{Tb} }}{}{}{}{}}

\newcommand{\ottffblock}{
\ottrulehead{{ \mathit{ffblock} }}{::=}{\ottcom{fixed-function block}}\ottprodnewline
\ottfirstprodline{|}{{ \mathit{ff} }}{}{}{}{}}

\newcommand{\ottarchXXblock}{
\ottrulehead{\ottnt{arch\_block}}{::=}{\ottcom{architectural block}}\ottprodnewline
\ottfirstprodline{|}{\ottkw{inp}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{pbl} \, x  \ottsym{(}  \ottnt{e_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{e_{\ottmv{n}}}  \ottsym{)}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{ffbl} \, x}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{out}}{}{}{}{}}

\newcommand{\ottpblockXXlist}{
\ottrulehead{\overline{ \mathit{pb} }}{::=}{\ottcom{list of programmable blocks}}}

\newcommand{\ottpblockXXmap}{
\ottrulehead{B_p}{::=}{\ottcom{programmable block map}}}

\newcommand{\ottffblockXXmap}{
\ottrulehead{B_{ \mathrm{ff} }}{::=}{\ottcom{fixed-function block map}}}

\newcommand{\ottinXXoutXXlist}{
\ottrulehead{\overline{ \mathit{io} }}{::=}{\ottcom{list of input and output}}}

\newcommand{\ottabXXlist}{
\ottrulehead{\overline{ \mathit{ab} }}{::=}{\ottcom{list of architectural blocks}}}

\newcommand{\ottinputXXf}{
\ottrulehead{{ \mathit{in}_A }}{::=}{\ottcom{input function}}}

\newcommand{\ottoutputXXf}{
\ottrulehead{{ \mathit{out}_A }}{::=}{\ottcom{output function}}}

\newcommand{\ottcopyinXXpbl}{
\ottrulehead{{ \mathit{in}_p }}{::=}{\ottcom{copy-in to programmable blocks function}}}

\newcommand{\ottcopyoutXXpbl}{
\ottrulehead{{ \mathit{out}_p }}{::=}{\ottcom{copy-out from programmable blocks function}}}

\newcommand{\ottapplyXXtableXXf}{
\ottrulehead{{ \mathit{apply\_table} }}{::=}{\ottcom{apply table function}}}

\newcommand{\ottactx}{
\ottrulehead{{ \mathit{ctx}_A }}{::=}{\ottcom{architectural context}}\ottprodnewline
\ottfirstprodline{|}{\ottsym{(}  \overline{ \mathit{ab} }  \ottsym{,}  B_p  \ottsym{,}  B_{ \mathrm{ff} }  \ottsym{,}  { \mathit{in}_A }  \ottsym{,}  { \mathit{out}_A }  \ottsym{,}  { \mathit{in}_p }  \ottsym{,}  { \mathit{out}_p }  \ottsym{,}  { \mathit{apply\_table} }  \ottsym{,}  X  \ottsym{,}  F_g  \ottsym{)}} {\textsf{M}}{}{}{\ottcom{tuple}}}

\newcommand{\ottctx}{
\ottrulehead{\mathit{ctx}}{::=}{\ottcom{context}}\ottprodnewline
\ottfirstprodline{|}{\ottsym{(}  { \mathit{apply\_table} }  \ottsym{,}  X  \ottsym{,}  F_g  \ottsym{,}  F_b  \ottsym{,}  P  \ottsym{,}  { \mathit{Tb} }  \ottsym{)}} {\textsf{M}}{}{}{\ottcom{tuple}}}

\newcommand{\ottstmtXXstack}{
\ottrulehead{\overline{ \mathit{stmt} }}{::=}{\ottcom{stack of stmts}}\ottprodnewline
\ottfirstprodline{|}{ {[\;]} } {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{[}  \ottnt{stmt_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{stmt_{\ottmv{n}}}  \ottsym{]}} {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{ \mathrm{tl}  \overline{ \mathit{stmt} } } {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{ \ottnt{stmt}  ::  \overline{ \mathit{stmt} }' } {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{ \overline{ \mathit{stmt} }  \mathrel{\mathop+}+  \overline{ \mathit{stmt} }' } {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{ \mathrm{rev} ( \overline{ \mathit{stmt} } ) } {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{ ( i  \mapsto  \ottnt{stmt} )  \overline{ \mathit{stmt} } } {\textsf{M}}{}{}{\ottcom{update a stmt in the stmt stack}}\ottprodnewline
\ottprodline{|}{\ottsym{(}  \overline{ \mathit{stmt} }  \ottsym{)}} {\textsf{S}}{}{}{}}

\newcommand{\ottframe}{
\ottrulehead{\Phi}{::=}{\ottcom{contains the current function name, stmt and local scope stack}}\ottprodnewline
\ottfirstprodline{|}{ ( { \overline{ \mathit{stmt} } )}_{ \overline{\gamma} }^{ \ottnt{funn} } } {\textsf{M}}{}{}{}}

\newcommand{\ottframeXXlist}{
\ottrulehead{\overline{\Phi}}{::=}{\ottcom{list of frame tuples}}\ottprodnewline
\ottfirstprodline{|}{ [ \, ] } {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{ [  \Phi  ] } {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{ \Phi  ::  \overline{\Phi} } {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{ \overline{\Phi}  {+}\mspace{-8mu}{+}  \overline{\Phi}' } {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{ \mathrm{tl} ( \overline{\Phi} ) } {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{ \overline{\Phi} } {\textsf{M}}{}{}{}}

\newcommand{\ottstate}{
\ottrulehead{s}{::=}{\ottcom{execution state}}\ottprodnewline
\ottfirstprodline{|}{\ottsym{(}  { {\gamma}_A }  \ottsym{,}  \overline{\gamma_G}  \ottsym{,}  \overline{\Phi}  \ottsym{,}  t  \ottsym{)}} {\textsf{M}}{}{}{}}

\newcommand{\ottaenv}{
\ottrulehead{{ \mathit{env}_\mathit{A} }}{::=}{\ottcom{architectural environment}}\ottprodnewline
\ottfirstprodline{|}{\ottkw{empty}} {\textsf{M}}{}{}{\ottcom{empty architectural environment}}\ottprodnewline
\ottprodline{|}{\ottsym{(}  \ottnt{num\_exp}  \ottsym{,}  \overline{ \mathit{io} }  \ottsym{,}  \overline{ \mathit{io} }'  \ottsym{,}  { {\gamma}_A }  \ottsym{)}} {\textsf{M}}{}{}{\ottcom{tuple}}}

\newcommand{\ottarchXXframeXXlist}{
\ottrulehead{\ottnt{arch\_frame\_list}}{::=}{\ottcom{architecture-level frame list}}\ottprodnewline
\ottfirstprodline{|}{ { [ \; ]_A } }{}{}{}{\ottcom{empty architecture-level frame list}}\ottprodnewline
\ottprodline{|}{\overline{\Phi}}{}{}{}{\ottcom{regular frame list}}}

\newcommand{\ottastate}{
\ottrulehead{{ \ensuremath{s_A} }}{::=}{\ottcom{architectural state}}\ottprodnewline
\ottfirstprodline{|}{\ottsym{(}  { \mathit{env}_\mathit{A} }  \ottsym{,}  \overline{\gamma_G}  \ottsym{,}  \ottnt{arch\_frame\_list}  \ottsym{,}  t  \ottsym{)}} {\textsf{M}}{}{}{\ottcom{tuple}}}

\newcommand{\ottterminals}{
\ottrulehead{\ottnt{terminals}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{ \rightarrow }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \rightsquigarrow }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \longrightarrow }{}{}{}{}}

\newcommand{\ottformula}{
\ottrulehead{\ottnt{formula}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\ottnt{judgement}}{}{}{}{\ottcom{judgement}}\ottprodnewline
\ottprodline{|}{\ottsym{!}  b  \ottsym{=}  b'} {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{~}  \ottnt{bitv}  \ottsym{=}  \ottnt{bitv'}} {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{-}  \ottnt{bitv}  \ottsym{=}  \ottnt{bitv'}} {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{+}  \ottnt{bitv}  \ottsym{=}  \ottnt{bitv'}} {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{bitv}  \ottsym{*}  \ottnt{bitv'}  \ottsym{=}  \ottnt{bitv''}} {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{bitv}  \ottsym{/}  \ottnt{bitv'}  \ottsym{=}  \ottnt{bitv''}} {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{bitv} \, \ottkw{mod} \, \ottnt{bitv'}  \ottsym{=}  \ottnt{bitv''}} {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{bitv}  \ottsym{+}  \ottnt{bitv'}  \ottsym{=}  \ottnt{bitv''}} {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{bitv}  \ottsym{-}  \ottnt{bitv'}  \ottsym{=}  \ottnt{bitv''}} {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{bitv} \, \ottkw{EQ} \, \ottnt{bitv'}  \ottsym{=}  b} {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{b \, \ottkw{EQ} \, b'  \ottsym{=}  b''} {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{ ( x  =  x' ) =  b } {\textsf{M}}{}{}{\ottcom{equality over strings - used for errors}}\ottprodnewline
\ottprodline{|}{\ottnt{bitv} \, \ottkw{SHL} \, \ottnt{bitv'}  \ottsym{=}  \ottnt{bitv''}} {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{bitv} \, \ottkw{SHR} \, \ottnt{bitv'}  \ottsym{=}  \ottnt{bitv''}} {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{bitv} \, \ottkw{LE} \, \ottnt{bitv'}  \ottsym{=}  b} {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{bitv} \, \ottkw{GE} \, \ottnt{bitv'}  \ottsym{=}  b} {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{bitv}  \ottsym{<}  \ottnt{bitv'}  \ottsym{=}  b} {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{bitv}  \ottsym{>}  \ottnt{bitv'}  \ottsym{=}  b} {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{bitv} \, \ottkw{NE} \, \ottnt{bitv'}  \ottsym{=}  b} {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{ ( x  \neq  x' ) =  b } {\textsf{M}}{}{}{\ottcom{inequality over strings - used for errors}}\ottprodnewline
\ottprodline{|}{b \, \ottkw{NE} \, b'  \ottsym{=}  b''} {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{bitv}  \ottsym{\&}  \ottnt{bitv'}  \ottsym{=}  \ottnt{bitv''}} {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{bitv}  \ottsym{\mbox{$\uparrow$}}  \ottnt{bitv'}  \ottsym{=}  \ottnt{bitv''}} {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{bitv}  \ottsym{\mbox{$\mid$}}  \ottnt{bitv'}  \ottsym{=}  \ottnt{bitv''}} {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{b \, \ottkw{AND} \, b'  \ottsym{=}  b''} {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{b \, \ottkw{OR} \, b'  \ottsym{=}  b''} {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{ ~\mathrm{is\_short\_circuit}( \oplus ) } {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{\gamma_{ \mathrm{G} }  \ottsym{=}  \overline{\gamma}  \ottsym{[}  i  \ottsym{]}} {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{ \overline{\gamma_G}'  = \mathrm{take}( i ,  \overline{\gamma} ) } {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{ \overline{\gamma}'  = \mathrm{drop}( i ,  \overline{\gamma} ) } {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{\gamma_{ \mathrm{G} }  \ottsym{=}  \overline{\gamma}  \ottsym{[}  \ottsym{1}  \ottsym{]}} {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{(}  \ottnt{stmt}  \ottsym{,}  \ottsym{(}  x_{{\mathrm{1}}}  \ottsym{,}  d_{{\mathrm{1}}}  \ottsym{)}  \ottsym{,} \, .. \, \ottsym{,}  \ottsym{(}  x_{\ottmv{n}}  \ottsym{,}  d_{\ottmv{n}}  \ottsym{)}  \ottsym{)}  \ottsym{=}  F_g  \ottsym{(}  f  \ottsym{)}} {\textsf{M}}{}{}{\ottcom{function signature lookup}}\ottprodnewline
\ottprodline{|}{ i  = length ( \overline{\gamma} ) } {\textsf{M}}{}{}{\ottcom{find the scope stack length}}\ottprodnewline
\ottprodline{|}{ i  = length ( \overline{\gamma} ) - 1 } {\textsf{M}}{}{}{\ottcom{find the scope stack length minus 1}}\ottprodnewline
\ottprodline{|}{\ottnt{v}  \ottsym{=}  \gamma  \ottsym{(}  x  \ottsym{)}} {\textsf{M}}{}{}{\ottcom{look-up of variable in scope}}\ottprodnewline
\ottprodline{|}{\ottnt{v}  \ottsym{=} \, \ottkw{struct} \, \ottsym{\{}  x_{{\mathrm{1}}}  \ottsym{=}  \ottnt{v_{{\mathrm{1}}}}  \ottsym{;} \, ... \, \ottsym{;}  x_{\ottmv{n}}  \ottsym{=}  \ottnt{v_{\ottmv{n}}}  \ottsym{\}}  \ottsym{(}  x  \ottsym{)}} {\textsf{M}}{}{}{\ottcom{access of field in struct}}\ottprodnewline
\ottprodline{|}{\ottnt{v}  \ottsym{=} \, \ottkw{header} \, \ottnt{boolv}  \ottsym{\{}  x_{{\mathrm{1}}}  \ottsym{=}  \ottnt{v_{{\mathrm{1}}}}  \ottsym{;} \, ... \, \ottsym{;}  x_{\ottmv{n}}  \ottsym{=}  \ottnt{v_{\ottmv{n}}}  \ottsym{\}}  \ottsym{(}  x  \ottsym{)}} {\textsf{M}}{}{}{\ottcom{access of field in header}}\ottprodnewline
\ottprodline{|}{\ottnt{e}  \ottsym{=}  \ottnt{e\_list}  \ottsym{[}  i  \ottsym{]}} {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{ \ottnt{e}  = \mathrm{hd} \,\,  \ottnt{e\_list} } {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{ \ottnt{v}  = \mathrm{lookup_v} ( \overline{\gamma} ,  x ) }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \ottnt{v}  = \mathrm{lookup_v} ( \overline{\gamma} ,  \overline{\gamma_G} ,  \ottnt{varn} ) }{}{}{}{}\ottprodnewline
\ottprodline{|}{ ( \ottnt{v}  ,  \ottkw{a} ) = \mathrm{lookup_tup} ( \overline{\gamma} ,  \ottnt{varn} ) }{}{}{}{}\ottprodnewline
\ottprodline{|}{ x'  = \{ v_1 : x_1 ; ... ; v_n : x_n ; \_ : x \} (v) } {\textsf{M}}{}{}{\ottcom{access of string in select key-value list}}\ottprodnewline
\ottprodline{|}{ \forall i \leqslant n. \, ((d_i \in \{\circ , \downarrow\} \implies \mathrm{is\_const} \, e_i ) \land (d_i \in \{\updownarrow , \uparrow\} \implies \mathrm{is\_var} \, e_i)) } {\textsf{M}}{}{}{\ottcom{check if arguments are isvar or isconst}}\ottprodnewline
\ottprodline{|}{ d  =  \ottnt{d\_list}   i } {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{ d  = \mathrm{hd} \,\,  \ottnt{d\_list} } {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{ i = \mathrm{min} \, \{ j . \,\,  \ottnt{d\_list}  [j]  \in \{\circ , \downarrow\} \wedge \neg ( \mathrm{is\_const} \,  \ottnt{e\_list}  [j] ) \} } {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{ i = \mathrm{min} \, \{ j . \; \neg ( \mathrm{is\_const} \,  \ottnt{e\_list}  [j] ) \} } {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{ \ottnt{v\_list}  = \mathrm{vl\_of\_el} \, (  \ottnt{e\_list}  ) } {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{ \ottnt{bitv''}  =   \ottnt{bitv}  {+}\mspace{-8mu}{+}   \ottnt{bitv'} } {\textsf{M}}{}{}{\ottcom{concatenation operation}}\ottprodnewline
\ottprodline{|}{ \ottnt{bitv'''}  =   \ottnt{bitv}  [  \ottnt{bitv'}  :  \ottnt{bitv''}  ] } {\textsf{M}}{}{}{\ottcom{bit-slicing operation}}\ottprodnewline
\ottprodline{|}{\gamma  \ottsym{=}  \gamma'} {\textsf{M}}{}{}{\ottcom{scope equality}}\ottprodnewline
\ottprodline{|}{\overline{\gamma}  \ottsym{=}  \overline{\gamma}'} {\textsf{M}}{}{}{\ottcom{scope_list equality}}\ottprodnewline
\ottprodline{|}{ \ottnt{e\_list}  =  \ottnt{e\_list'} } {\textsf{M}}{}{}{\ottcom{args equality}}\ottprodnewline
\ottprodline{|}{ \overline{ \mathit{io} }  =  \overline{ \mathit{io} }' } {\textsf{M}}{}{}{\ottcom{args equality}}\ottprodnewline
\ottprodline{|}{ \overline{\Phi}  \neq [ \, ] } {\textsf{M}}{}{}{\ottcom{args equality}}\ottprodnewline
\ottprodline{|}{ \mathrm{Tb}\,  tbl \, =\, (  \mathit{mk\_list}  , (  x  ,  \ottnt{e\_list}  ) ) }{}{}{}{\ottcom{find the match kinds and default action in the table map}}\ottprodnewline
\ottprodline{|}{ { \mathit{apply\_table} } \, (  tbl  , \,  \ottnt{e\_list} , \,  \mathit{mk\_list} , (  f  ,  \ottnt{e\_list'}  ), \,  { {\gamma}_A } \, ) = \,(  f'  ,  \ottnt{e\_list''}  ) }{}{}{}{\ottcom{fetch the action name and parameters from the control plane}}\ottprodnewline
\ottprodline{|}{ i = \mathrm{min} \, \{ j . \neg ( \mathrm{is\_const} \,  \ottnt{e\_list}  [j] ) \} }{}{}{}{\ottcom{get the first index of the unred expression to const}}\ottprodnewline
\ottprodline{|}{ { \mathit{ext\_fun} }  = \mathrm{lookup\_ext\_fun} (  \ottnt{funn}  ,  X  ) }{}{}{}{\ottcom{lookup of an extern function}}\ottprodnewline
\ottprodline{|}{ ( { {\gamma}_A }' , \,  \overline{\gamma}' , \,  \ottnt{v} ) =  { \mathit{ext\_fun} }  \, ( { {\gamma}_A } , \,  \overline{\gamma_G}  , \,  \overline{\gamma} ) }{}{}{}{\ottcom{application of an extern function}}\ottprodnewline
\ottprodline{|}{ i  = \mathrm{len} \,\,  \ottnt{e\_list} } {\textsf{M}}{}{}{\ottcom{length of list}}\ottprodnewline
\ottprodline{|}{ i  < \mathrm{len}(\mathit{e}) } {\textsf{M}}{}{}{\ottcom{numeral in range}}\ottprodnewline
\ottprodline{|}{ \mathrm{is\_consts} \,\,  \ottnt{e\_list} } {\textsf{M}}{}{}{\ottcom{function arguments constant}}\ottprodnewline
\ottprodline{|}{\ottnt{stmt}  \ottsym{=}  P  \ottsym{(}  x  \ottsym{)}} {\textsf{M}}{}{}{\ottcom{parser state map lookup}}\ottprodnewline
\ottprodline{|}{ x  = ``\mathit{parseError}" } {\textsf{M}}{}{}{\ottcom{parser error literal}}\ottprodnewline
\ottprodline{|}{ \ottnt{v}  = { \mathrm{lookup} }_{ \mathrm{lval} } ( \overline{\gamma} ,  \ottnt{lval} ) } {\textsf{M}}{}{}{\ottcom{instantaneous lookup of lvals}}\ottprodnewline
\ottprodline{|}{ \overline{\gamma}'  =  \overline{\gamma}  [ (  \ottkw{star}  ,  \ottnt{funn}  )\longmapsto  \ottnt{v}  ] } {\textsf{M}}{}{}{\ottcom{declare "star" with value v in topmost scope}}\ottprodnewline
\ottprodline{|}{ \mathrm{not\_final\_state}( x ) } {\textsf{M}}{}{}{\ottcom{x is not name of final parser state}}\ottprodnewline
\ottprodline{|}{ t \neq { \mathbf{run} } } {\textsf{M}}{}{}{\ottcom{status is not in running}}\ottprodnewline
\ottprodline{|}{ \overline{\Phi}  \neq [] \Rightarrow  t  \neq { \mathbf{ret} \, v } }{}{}{}{\ottcom{status is (conditionally) not return}}\ottprodnewline
\ottprodline{|}{ t = { \mathbf{acc} } \vee t = { \mathbf{rej} } } {\textsf{M}}{}{}{\ottcom{status is not running}}\ottprodnewline
\ottprodline{|}{ x  = ``\mathit{accept}" } {\textsf{M}}{}{}{\ottcom{x is accept}}\ottprodnewline
\ottprodline{|}{ x  = ``\mathit{reject}" } {\textsf{M}}{}{}{\ottcom{x is reject}}\ottprodnewline
\ottprodline{|}{ x  = ``\mathit{start}" } {\textsf{M}}{}{}{\ottcom{x is start}}\ottprodnewline
\ottprodline{|}{\gamma'  \ottsym{=}  { \mathit{in}_p }  \ottsym{(}  \ottsym{(}  x_{{\mathrm{1}}}  \ottsym{,} \, .. \, \ottsym{,}  x_{\ottmv{n}}  \ottsym{)}  \ottsym{,}  \ottnt{d\_list}  \ottsym{,}  \ottnt{e\_list}  \ottsym{,}  { {\gamma}_A }  \ottsym{,}  \ottnt{pbl\_type}  \ottsym{)}} {\textsf{M}}{}{}{\ottcom{copy in to programmable blocks}}\ottprodnewline
\ottprodline{|}{ \gamma'  = \mathrm{copyin} ([x_1 , \; .. \; , x_n] , [e_1 , \; .. \; , e_n] , [d_1 , \; .. \; , d_n] ,  \ottsym{,}  , \overrightarrow{\gamma}) } {\textsf{M}}{}{}{\ottcom{build new scope and copyin}}\ottprodnewline
\ottprodline{|}{ \ottnt{v}  = \mathrm{arb\_from\_t} \,  \tau } {\textsf{M}}{}{}{\ottcom{create new varaible in declaration}}\ottprodnewline
\ottprodline{|}{ \overline{\gamma}'  =  \overline{\gamma}  [  \ottnt{lval}  \longmapsto  \ottnt{v}  ] } {\textsf{M}}{}{}{\ottcom{assign v to lval in the frame}}\ottprodnewline
\ottprodline{|}{ (  \overline{\gamma_G}  ,   \overline{\gamma}'  ) = \mathrm{separate}( \overline{\gamma} ) } {\textsf{M}}{}{}{\ottcom{separate scopes into globals and locals after assignment}}\ottprodnewline
\ottprodline{|}{{ {\gamma}_A }'  \ottsym{=}  { \mathit{out}_p }  \ottsym{(}  \overline{\gamma}  \ottsym{,}  { {\gamma}_A }  \ottsym{,}  \ottnt{d\_list}  \ottsym{,}  \ottsym{(}  x_{{\mathrm{1}}}  \ottsym{,} \, .. \, \ottsym{,}  x_{\ottmv{n}}  \ottsym{)}  \ottsym{,}  \ottnt{pbl\_type}  \ottsym{,}  t  \ottsym{)}} {\textsf{M}}{}{}{\ottcom{copy out from programmable blocks}}\ottprodnewline
\ottprodline{|}{{ {\gamma}_A }'  \ottsym{=}  { \mathit{out}_p }  \ottsym{(}  \overline{\gamma}  \ottsym{,}  { {\gamma}_A }  \ottsym{,}  \ottnt{d\_list}  \ottsym{,}  \ottsym{[}  x  \ottsym{]}  \ottsym{,}  \ottnt{pbl\_type}  \ottsym{,}  t  \ottsym{)}} {\textsf{M}}{}{}{\ottcom{copy out singleton from programmable blocks}}\ottprodnewline
\ottprodline{|}{ \mathrm{not\_empty} \;  \ottnt{stmt} } {\textsf{M}}{}{}{\ottcom{check so that statement is not the empty statement}}\ottprodnewline
\ottprodline{|}{ \mathrm{not\_empty} \;  \overline{ \mathit{stmt} } } {\textsf{M}}{}{}{\ottcom{check so that statement stack is not the empty statement stack}}\ottprodnewline
\ottprodline{|}{{ \mathit{pblock} }  \ottsym{=}  B_p  \ottsym{(}  f  \ottsym{)}} {\textsf{M}}{}{}{\ottcom{programmable block lookup}}\ottprodnewline
\ottprodline{|}{{ \mathit{ffblock} }  \ottsym{=}  B_{ \mathrm{ff} }  \ottsym{(}  f  \ottsym{)}} {\textsf{M}}{}{}{\ottcom{fixed-function block lookup}}\ottprodnewline
\ottprodline{|}{\ottsym{(}  \ottsym{(}  x_{{\mathrm{1}}}  \ottsym{,}  d_{{\mathrm{1}}}  \ottsym{)}  \ottsym{,} \, .. \, \ottsym{,}  \ottsym{(}  x_{\ottmv{n}}  \ottsym{,}  d_{\ottmv{n}}  \ottsym{)}  \ottsym{)}  \ottsym{=} \, \ottkw{args\_of\_pbl} \, \ottsym{(}  { \mathit{pblock} }  \ottsym{)}} {\textsf{M}}{}{}{\ottcom{obtain body and args of pblock}}\ottprodnewline
\ottprodline{|}{\ottnt{arch\_block}  \ottsym{=}  \overline{ \mathit{ab} }  \ottsym{[}  i  \ottsym{]}} {\textsf{M}}{}{}{\ottcom{ab at index i}}\ottprodnewline
\ottprodline{|}{{ {\gamma}_A }'  \ottsym{=}  { \mathit{ff} }  \ottsym{(}  { {\gamma}_A }  \ottsym{)}} {\textsf{M}}{}{}{\ottcom{apply fixed function}}\ottprodnewline
\ottprodline{|}{\ottsym{(}  \overline{ \mathit{io} }'  \ottsym{,}  { {\gamma}_A }'  \ottsym{)}  \ottsym{=}  { \mathit{in}_A }  \ottsym{(}  \overline{ \mathit{io} }  \ottsym{,}  { {\gamma}_A }  \ottsym{)}} {\textsf{M}}{}{}{\ottcom{apply input function}}\ottprodnewline
\ottprodline{|}{\ottsym{(}  \overline{ \mathit{io} }'  \ottsym{,}  { {\gamma}_A }'  \ottsym{)}  \ottsym{=}  { \mathit{out}_A }  \ottsym{(}  \overline{ \mathit{io} }  \ottsym{,}  { {\gamma}_A }  \ottsym{)}} {\textsf{M}}{}{}{\ottcom{apply output function}}\ottprodnewline
\ottprodline{|}{ t  \neq \mathit{pars\_fin} } {\textsf{M}}{}{}{\ottcom{status is not final}}\ottprodnewline
\ottprodline{|}{ \mathrm{state\_fin}( t ,  \overline{\Phi} ) } {\textsf{M}}{}{}{\ottcom{state is final}}\ottprodnewline
\ottprodline{|}{ t'  = \mathrm{set\_fin\_status} ( \ottnt{pbl\_type} ,  t ) } {\textsf{M}}{}{}{\ottcom{set new final status}}\ottprodnewline
\ottprodline{|}{ \mathrm{not\_top\_return}  \overline{\Phi} } {\textsf{M}}{}{}{\ottcom{top frame is not about to execute a return statement}}\ottprodnewline
\ottprodline{|}{ \ottnt{lval}  = \mathit{parseError} } {\textsf{M}}{}{}{\ottcom{lval is parseError}}\ottprodnewline
\ottprodline{|}{ \ottnt{v}  = \mathit{NoError} } {\textsf{M}}{}{}{\ottcom{v is NoError}}\ottprodnewline
\ottprodline{|}{ ( \overline{\gamma_G}' ,  \overline{\gamma}' ) = \mathrm{declare} ( \overline{\gamma_G} ,  \overline{\gamma} ,  x ,  \ottkw{t} ) } {\textsf{M}}{}{}{\ottcom{declare variable of type}}\ottprodnewline
\ottprodline{|}{ \overline{\gamma}'  = \mathrm{initialise} ( \overline{\gamma} ,  \ottnt{varn} ,  \ottnt{v} ) } {\textsf{M}}{}{}{\ottcom{initialise variable to value}}\ottprodnewline
\ottprodline{|}{ \overline{\gamma_G}'  = \mathrm{initialise\_var\_stars} ( F_g ,  F_b ,  X ,  \overline{\gamma_G} ) } {\textsf{M}}{}{}{\ottcom{initialise var_star variables}}\ottprodnewline
\ottprodline{|}{ \overline{\gamma_G}'  = \mathrm{scopes\_to\_pass} ( \ottnt{funn} ,  F_g ,  F_b ,  \overline{\gamma_G} ) } {\textsf{M}}{}{}{\ottcom{global and block scopes to pass based on function location}}\ottprodnewline
\ottprodline{|}{ \overline{\gamma_G}''  = \mathrm{scopes\_to\_retrieve} ( \ottnt{funn} ,  F_g ,  F_b ,  \overline{\gamma_G} ,  \overline{\gamma_G}' ) } {\textsf{M}}{}{}{\ottcom{global and block scopes to retrieve based on function location}}\ottprodnewline
\ottprodline{|}{ \gamma'  = \mathrm{replicate} ( { \overline{ \mathit{decl} } } ,  \gamma ) } {\textsf{M}}{}{}{\ottcom{update a scope with a list of declarations}}\ottprodnewline
\ottprodline{|}{ \gamma  = \mathrm{replicate} ( { \overline{ \mathit{decl} } } ) } {\textsf{M}}{}{}{\ottcom{create a scope from the list of declarations}}\ottprodnewline
\ottprodline{|}{ (  \overline{\gamma_G}'  ,  \overline{\gamma}'' ) =  \mathrm{copyout} \, ( [x1, \, .. , \, xn] , [d1, \, .. , \, dn] , \overrightarrow{\gamma_G}'' , \overrightarrow{\gamma}' , \overrightarrow{\gamma} ) } {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{ ~ { \mathrm{fully\_reduced} } \,  \ottnt{e} } {\textsf{M}}{}{}{\ottcom{expression is not fully reduced}}\ottprodnewline
\ottprodline{|}{ ( \ottnt{stmt} , ((x_1, d_1), \ldots, (x_n, d_n))) = \mathrm{lookup\_funn\_sig\_body} ( x_{{\mathrm{1}}} ,  \ottsym{,} ,  d_{{\mathrm{1}}} ,  \ottsym{)} ) } {\textsf{M}}{}{}{\ottcom{look up the body and signature of an abstract function name}}\ottprodnewline
\ottprodline{|}{ ((x_1, d_1), \ldots, (x_n, d_n)) = \mathrm{lookup\_funn\_sig} ( x_{{\mathrm{1}}} ,  \ottsym{,} ,  d_{{\mathrm{1}}} ,  \ottsym{)} ) } {\textsf{M}}{}{}{\ottcom{look up the signature of an abstract function name}}\ottprodnewline
\ottprodline{|}{\ottkw{parser\_not\_finished} \, \overline{\Phi}} {\textsf{M}}{}{}{\ottcom{parser state is not finished}}\ottprodnewline
\ottprodline{|}{ w  = width \  \ottnt{bitv} } {\textsf{M}}{}{}{\ottcom{width of bitstring}}\ottprodnewline
\ottprodline{|}{ \tau  = \mathrm{topmost} ( \overrightarrow{\psi}  ,  \overrightarrow{\psi_G}  ,  \ottnt{varn} ) }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \tau  = \mathrm{find_star_in_globals} ( \overrightarrow{\psi_G} ,  \ottnt{varn} ) }{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{[}  \tau_{{\mathrm{1}}} \, d_{{\mathrm{1}}}  \ottsym{,} \, .. \, \ottsym{,}  \tau_{\ottmv{n}} \, d_{\ottmv{n}}  \ottsym{]}  \tau  \ottsym{=} \, \ottkw{t\_lookup\_funn} \, \ottsym{(}  \Delta_{glb}  \ottsym{,}  \Delta_{blk}  \ottsym{,}  \ottnt{funn}  \ottsym{)}}{}{}{}{}\ottprodnewline
\ottprodline{|}{ \ominus  \neq \mathit{!} } {\textsf{M}}{}{}{\ottcom{not bool negation}}\ottprodnewline
\ottprodline{|}{ \ominus  \eq \mathit{!} } {\textsf{M}}{}{}{\ottcom{not bool negation}}\ottprodnewline
\ottprodline{|}{ \ottmv{m}  = length ( \ottnt{taul} ) } {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{\tau  \ottsym{=}  \ottnt{taul}  \ottsym{[}  i  \ottsym{]}}{}{}{}{}\ottprodnewline
\ottprodline{|}{ \ottnt{formula}  \wedge  \ottnt{formula'} } {\textsf{M}}{}{}{\ottcom{and}}\ottprodnewline
\ottprodline{|}{ \ottnt{formula}  \longrightarrow  \ottnt{formula'} } {\textsf{M}}{}{}{\ottcom{implies}}\ottprodnewline
\ottprodline{|}{ \forall  i  \in 1 ..  \ottmv{n} .  \ottnt{formula} }{}{}{}{}\ottprodnewline
\ottprodline{|}{ ( \ottnt{formula} \!) } {\textsf{M}}{}{}{\ottcom{bracketed}}\ottprodnewline
\ottprodline{|}{ \ottnt{v\_list}  : (  \ottnt{taul}  , F ) }{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{(}  \ottnt{v_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{v_{\ottmv{m}}}  \ottsym{)}  \ottsym{:}  \ottsym{(}  \tau  \ottsym{,} \, \ottkw{false} \, \ottsym{)}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\psi_t \, T_e  \ottsym{\mbox{$\mid$}-}  \ottsym{(}  \ottnt{e_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{e_{\ottmv{m}}}  \ottsym{)}  \ottsym{:}  \ottsym{(}  \ottsym{[}  \tau_{{\mathrm{1}}}  \ottsym{,} \, .. \, \ottsym{,}  \tau_{\ottmv{n}}  \ottsym{]}  \ottsym{,} \, \ottkw{false} \, \ottsym{)}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{correct\_field\_type} \, \ottsym{(}  \ottsym{[}  x_{{\mathrm{1}}} \, \tau_{{\mathrm{1}}}  \ottsym{,} \, .. \, \ottsym{,}  x_{\ottmv{n}} \, \tau_{\ottmv{n}}  \ottsym{]}  \ottsym{,}  x  \ottsym{,}  \tau  \ottsym{)}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{slice\_length\_check} \, \ottsym{(}  w  \ottsym{,}  \ottnt{bitv'}  \ottsym{,}  \ottnt{bitv''}  \ottsym{)}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{bits\_length\_check} \, \ottsym{(}  w  \ottsym{,}  w_{{\mathrm{1}}}  \ottsym{,}  w_{{\mathrm{2}}}  \ottsym{)}}{}{}{}{}\ottprodnewline
\ottprodline{|}{w  \ottsym{=} \, \ottkw{vec\_to\_const} \, \ottnt{bitv}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\psi_t \, T_e  \ottsym{\mbox{$\mid$}-}  \ottsym{(}  \ottnt{e_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{e_{\ottmv{m}}}  \ottsym{)}  \ottsym{:}  \ottsym{(}  \ottsym{[}  \tau_{{\mathrm{1}}}  \ottsym{,} \, .. \, \ottsym{,}  \tau_{\ottmv{n}}  \ottsym{]}  \ottsym{,}  \ottsym{[}  b_{{\mathrm{1}}}  \ottsym{,} \, .. \, \ottsym{,}  b_{\ottmv{o}}  \ottsym{]}  \ottsym{)}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{out\_is\_lval} \, \ottsym{[}  d_{{\mathrm{1}}}  \ottsym{,} \, .. \, \ottsym{,}  d_{\ottmv{n}}  \ottsym{]}  \ottsym{[}  b_{{\mathrm{1}}}  \ottsym{,} \, .. \, \ottsym{,}  b_{\ottmv{m}}  \ottsym{]}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{is\_bv\_op} \, \oplus}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{is\_bv\_bool\_op} \, \oplus}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{is\_bool\_op} \, \oplus}{}{}{}{}\ottprodnewline
\ottprodline{|}{i_{\ottmv{n}} \, \ottnt{e} \, Prs_n}{}{}{}{}\ottprodnewline
\ottprodline{|}{i_{\ottmv{n}} \, tbl \, \ottkw{Tbl\_n}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\Delta_{tbl}  \ottsym{(}  tbl  \ottsym{)}  \ottsym{=}  \ottsym{[}  \tau_{{\mathrm{1}}}  \ottsym{,} \, .. \, \ottsym{,}  \tau_{\ottmv{n}}  \ottsym{]}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{literials\_in\_P\_state} \, \ottsym{[}  x_{{\mathrm{1}}}  \ottsym{,} \, .. \, \ottsym{,}  x_{\ottmv{n}}  \ottsym{]}  Prs_n}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{ordered} \, \ottnt{funn} \, \ottnt{funn'} \, \sqsubset}{}{}{}{}\ottprodnewline
\ottprodline{|}{\psi  \ottsym{=} \, \ottkw{replicate\_types} \, { \overline{ \mathit{decl} } }}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{WF\_o} \, \sqsubset}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{MEM} \, x \, \ottnt{x\_list}}{}{}{}{}}

\newcommand{\otttXXscope}{
\ottrulehead{\psi}{::=}{\ottcom{typing scope}}\ottprodnewline
\ottfirstprodline{|}{ {\psi}_{ \emptyset } } {\textsf{M}}{}{}{\ottcom{empty typing scope}}\ottprodnewline
\ottprodline{|}{ \psi } {\textsf{S}}{}{}{}}

\newcommand{\otttXXscopeXXlistXXg}{
\ottrulehead{\overrightarrow{\psi_G}}{::=}{\ottcom{globals typing scope}}\ottprodnewline
\ottfirstprodline{|}{ [  \psi ,  \psi'  ] } {\textsf{M}}{}{}{\ottcom{global scope and block-global scope}}}

\newcommand{\otttXXscopeXXlist}{
\ottrulehead{\overrightarrow{\psi}}{::=}{\ottcom{ddd}}\ottprodnewline
\ottfirstprodline{|}{ [\;] } {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{[}  \psi_{{\mathrm{1}}}  \ottsym{,} \, .. \, \ottsym{,}  \psi_{\ottmv{n}}  \ottsym{]}} {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{[}  \psi  \ottsym{]}  \ottsym{++}  \overrightarrow{\psi}} {\textsf{M}}{}{}{}}

\newcommand{\otttXXscopesXXtup}{
\ottrulehead{\psi_t}{::=}{}\ottprodnewline
\ottfirstprodline{|}{ ( \overrightarrow{\psi_G}  ,  \overrightarrow{\psi} ) } {\textsf{M}}{}{}{}}

\newcommand{\ottdeltaXXg}{
\ottrulehead{\Delta_{glb}}{::=}{\ottcom{types of functions defined globally}}\ottprodnewline
\ottfirstprodline{|}{\ottsym{(} \, \ottkw{empty} \, \ottsym{)}} {\textsf{M}}{}{}{\ottcom{empty function map}}}

\newcommand{\ottdeltaXXb}{
\ottrulehead{\Delta_{blk}}{::=}{\ottcom{types of functions defined locally}}\ottprodnewline
\ottfirstprodline{|}{\ottsym{(} \, \ottkw{empty} \, \ottsym{)}} {\textsf{M}}{}{}{\ottcom{empty function map}}}

\newcommand{\ottdeltaXXt}{
\ottrulehead{\Delta_{tbl}}{::=}{\ottcom{types of tables}}\ottprodnewline
\ottfirstprodline{|}{\ottsym{(} \, \ottkw{empty} \, \ottsym{)}} {\textsf{M}}{}{}{\ottcom{empty function map}}}

\newcommand{\ottdelta}{
\ottrulehead{\Delta_{tbl}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\ottsym{(}  \Delta_{glb}  \ottsym{,}  \Delta_{blk}  \ottsym{,}  \Delta_{tbl}  \ottsym{)}} {\textsf{M}}{}{}{\ottcom{empty function map}}}

\newcommand{\ottorder}{
\ottrulehead{\sqsubset}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\ottsym{[}  \ottnt{funn_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{funn_{\ottmv{n}}}  \ottsym{]}}{}{}{}{}}

\newcommand{\ottPrsXXn}{
\ottrulehead{Prs_n}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\ottkw{empty}} {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{[}  x_{{\mathrm{1}}}  \ottsym{,} \, .. \, \ottsym{,}  x_{\ottmv{n}}  \ottsym{]}} {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{Prs_n  \ottsym{++}  \ottsym{[}  \ottsym{"accept"}  \ottsym{;}  \ottsym{"reject"}  \ottsym{]}} {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{(}  Prs_n  \ottsym{)}} {\textsf{M}}{}{}{}}

\newcommand{\ottTXXe}{
\ottrulehead{T_e}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\ottsym{(}  \sqsubset  \ottsym{,}  \ottnt{funn}  \ottsym{,}  \Delta_{tbl}  \ottsym{)}} {\textsf{M}}{}{}{}}

\newcommand{\otteXXsem}{
\ottrulehead{\ottnt{e\_sem}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{ \mathit{ctx}  \,  \overline{\gamma_G}  \,  \overline{\gamma}  \vdash (  \ottnt{e}  ) \rightsquigarrow  (  \ottnt{e'}  ,  \overline{\Phi}  ) }{}{}{}{\ottcom{expression semantics}}}

\newcommand{\ottstmtXXsem}{
\ottrulehead{\ottnt{stmt\_sem}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{ \mathit{ctx}  \vdash   s  \rightarrow   s' }{}{}{}{\ottcom{stmt semantics}}}

\newcommand{\ottframesXXsem}{
\ottrulehead{\ottnt{frames\_sem}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{ \mathit{ctx}  \vdash   s  {\longrightarrow}_{\Phi}   s' }{}{}{}{\ottcom{list of frames semantics}}}

\newcommand{\ottarchXXsem}{
\ottrulehead{\ottnt{arch\_sem}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{ { \mathit{ctx}_A }  \vdash  { \ensuremath{s_A} }  {\longrightarrow}_{A}  { \ensuremath{s_A} }' }{}{}{}{\ottcom{architecture-level semantics}}}

\newcommand{\ottvXXtyp}{
\ottrulehead{\ottnt{v\_typ}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{ \ottnt{v}  : (  \tau  ,  \ottnt{boolv}  ) }{}{}{}{\ottcom{values types}}}

\newcommand{\otteXXtyp}{
\ottrulehead{\ottnt{e\_typ}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{ \psi_t   T_e  \vdash  \ottnt{e}  : (  \tau  ,  \ottnt{boolv}  ) }{}{}{}{\ottcom{expression types}}}

\newcommand{\ottstmtXXtyp}{
\ottrulehead{\ottnt{stmt\_typ}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{ \psi_t   T_e   Prs_n  |-  \ottnt{stmt} }{}{}{}{\ottcom{expression types}}}

\newcommand{\ottWTXXf}{
\ottrulehead{\ottnt{WT\_f}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{ F_g   \sqsubset   \overrightarrow{\psi_G}   \Delta_{glb} }{}{}{}{\ottcom{values types}}}

\newcommand{\ottWTXXc}{
\ottrulehead{\ottnt{WT\_c}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{ \mathit{ctx}   \sqsubset   \overrightarrow{\psi_G}   \Delta_{glb}   \Delta_{blk} }{}{}{}{\ottcom{values types}}}

\newcommand{\ottjudgement}{
\ottrulehead{\ottnt{judgement}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\ottnt{e\_sem}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{stmt\_sem}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{frames\_sem}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{arch\_sem}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{v\_typ}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{e\_typ}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{stmt\_typ}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{WT\_f}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{WT\_c}}{}{}{}{}}

\newcommand{\ottuserXXsyntax}{
\ottrulehead{\ottnt{user\_syntax}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{x}{}{}{}{}\ottprodnewline
\ottprodline{|}{b}{}{}{}{}\ottprodnewline
\ottprodline{|}{bl}{}{}{}{}\ottprodnewline
\ottprodline{|}{i}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottmv{m}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{num\_exp}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{boolv}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{bitv}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{v}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{v\_list}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{funn}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{varn}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{lval}}{}{}{}{}\ottprodnewline
\ottprodline{|}{t}{}{}{}{}\ottprodnewline
\ottprodline{|}{\gamma}{}{}{}{}\ottprodnewline
\ottprodline{|}{\gamma_{ \mathrm{G} }}{}{}{}{}\ottprodnewline
\ottprodline{|}{\mathit{mk}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\mathit{mk\_list}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ominus}{}{}{}{}\ottprodnewline
\ottprodline{|}{\oplus}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{e}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{e\_list}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\overline{\gamma_G}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\overline{\gamma}}{}{}{}{}\ottprodnewline
\ottprodline{|}{{ \mathit{ext\_fun} }}{}{}{}{}\ottprodnewline
\ottprodline{|}{{ {\gamma}_A }}{}{}{}{}\ottprodnewline
\ottprodline{|}{d}{}{}{}{}\ottprodnewline
\ottprodline{|}{{ \mathit{ff} }}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{d\_list}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{x\_list}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{struct\_ty}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\tau}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{taul}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{Ftau}}{}{}{}{}\ottprodnewline
\ottprodline{|}{{ \overline{ \mathit{decl} } }}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{stmt}}{}{}{}{}\ottprodnewline
\ottprodline{|}{F_g}{}{}{}{}\ottprodnewline
\ottprodline{|}{F_b}{}{}{}{}\ottprodnewline
\ottprodline{|}{X_{ \mathrm{obj} }}{}{}{}{}\ottprodnewline
\ottprodline{|}{X}{}{}{}{}\ottprodnewline
\ottprodline{|}{{ \mathit{Tb} }}{}{}{}{}\ottprodnewline
\ottprodline{|}{P}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{in\_out}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{pbl\_type}}{}{}{}{}\ottprodnewline
\ottprodline{|}{{ \mathit{pblock} }}{}{}{}{}\ottprodnewline
\ottprodline{|}{{ \mathit{ffblock} }}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{arch\_block}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\overline{ \mathit{pb} }}{}{}{}{}\ottprodnewline
\ottprodline{|}{B_p}{}{}{}{}\ottprodnewline
\ottprodline{|}{B_{ \mathrm{ff} }}{}{}{}{}\ottprodnewline
\ottprodline{|}{\overline{ \mathit{io} }}{}{}{}{}\ottprodnewline
\ottprodline{|}{\overline{ \mathit{ab} }}{}{}{}{}\ottprodnewline
\ottprodline{|}{{ \mathit{in}_A }}{}{}{}{}\ottprodnewline
\ottprodline{|}{{ \mathit{out}_A }}{}{}{}{}\ottprodnewline
\ottprodline{|}{{ \mathit{in}_p }}{}{}{}{}\ottprodnewline
\ottprodline{|}{{ \mathit{out}_p }}{}{}{}{}\ottprodnewline
\ottprodline{|}{{ \mathit{apply\_table} }}{}{}{}{}\ottprodnewline
\ottprodline{|}{{ \mathit{ctx}_A }}{}{}{}{}\ottprodnewline
\ottprodline{|}{\mathit{ctx}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\overline{ \mathit{stmt} }}{}{}{}{}\ottprodnewline
\ottprodline{|}{\Phi}{}{}{}{}\ottprodnewline
\ottprodline{|}{\overline{\Phi}}{}{}{}{}\ottprodnewline
\ottprodline{|}{s}{}{}{}{}\ottprodnewline
\ottprodline{|}{{ \mathit{env}_\mathit{A} }}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{arch\_frame\_list}}{}{}{}{}\ottprodnewline
\ottprodline{|}{{ \ensuremath{s_A} }}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{terminals}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{formula}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\psi}{}{}{}{}\ottprodnewline
\ottprodline{|}{\overrightarrow{\psi_G}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\overrightarrow{\psi}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\psi_t}{}{}{}{}\ottprodnewline
\ottprodline{|}{\Delta_{glb}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\Delta_{blk}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\Delta_{tbl}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\Delta_{tbl}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\sqsubset}{}{}{}{}\ottprodnewline
\ottprodline{|}{Prs_n}{}{}{}{}\ottprodnewline
\ottprodline{|}{T_e}{}{}{}{}}

\newcommand{\ottgrammar}{\ottgrammartabular{
\ottnumXXexp\ottinterrule
\ottboolv\ottinterrule
\ottbitv\ottinterrule
\ottv\ottinterrule
\ottvXXlist\ottinterrule
\ottfunn\ottinterrule
\ottvarn\ottinterrule
\ottlval\ottinterrule
\ottstatus\ottinterrule
\ottscope\ottinterrule
\ottgXXscope\ottinterrule
\ottmk\ottinterrule
\ottmkXXlist\ottinterrule
\ottunop\ottinterrule
\ottbinop\ottinterrule
\otte\ottinterrule
\otteXXlist\ottinterrule
\ottgXXscopeXXlist\ottinterrule
\ottscopeXXlist\ottinterrule
\ottextXXfun\ottinterrule
\ottascope\ottinterrule
\ottd\ottinterrule
\ottff\ottinterrule
\ottdXXlist\ottinterrule
\ottxXXlist\ottinterrule
\ottstructXXty\ottinterrule
\otttau\ottinterrule
\otttaul\ottinterrule
\ottFtau\ottinterrule
\ottdeclXXlist\ottinterrule
\ottstmt\ottinterrule
\ottfuncXXmap\ottinterrule
\ottbXXfuncXXmap\ottinterrule
\ottextXXfunXXmap\ottinterrule
\ottextXXmap\ottinterrule
\otttblXXmap\ottinterrule
\ottparsXXmap\ottinterrule
\ottinXXout\ottinterrule
\ottpblXXtype\ottinterrule
\ottpblock\ottinterrule
\ottffblock\ottinterrule
\ottarchXXblock\ottinterrule
\ottpblockXXlist\ottinterrule
\ottpblockXXmap\ottinterrule
\ottffblockXXmap\ottinterrule
\ottinXXoutXXlist\ottinterrule
\ottabXXlist\ottinterrule
\ottinputXXf\ottinterrule
\ottoutputXXf\ottinterrule
\ottcopyinXXpbl\ottinterrule
\ottcopyoutXXpbl\ottinterrule
\ottapplyXXtableXXf\ottinterrule
\ottactx\ottinterrule
\ottctx\ottinterrule
\ottstmtXXstack\ottinterrule
\ottframe\ottinterrule
\ottframeXXlist\ottinterrule
\ottstate\ottinterrule
\ottaenv\ottinterrule
\ottarchXXframeXXlist\ottinterrule
\ottastate\ottinterrule
\ottterminals\ottinterrule
\ottformula\ottinterrule
\otttXXscope\ottinterrule
\otttXXscopeXXlistXXg\ottinterrule
\otttXXscopeXXlist\ottinterrule
\otttXXscopesXXtup\ottinterrule
\ottdeltaXXg\ottinterrule
\ottdeltaXXb\ottinterrule
\ottdeltaXXt\ottinterrule
\ottdelta\ottinterrule
\ottorder\ottinterrule
\ottPrsXXn\ottinterrule
\ottTXXe\ottinterrule
\otteXXsem\ottinterrule
\ottstmtXXsem\ottinterrule
\ottframesXXsem\ottinterrule
\ottarchXXsem\ottinterrule
\ottvXXtyp\ottinterrule
\otteXXtyp\ottinterrule
\ottstmtXXtyp\ottinterrule
\ottWTXXf\ottinterrule
\ottWTXXc\ottinterrule
\ottjudgement\ottinterrule
\ottuserXXsyntax\ottafterlastrule
}}

% defnss
% defns e_sem
%% defn e_red
\newcommand{\ottdruleeXXlookup}[1]{\ottdrule[#1]{%
\ottpremise{ \ottnt{v}  = \mathrm{lookup_v} ( \overline{\gamma} ,  \overline{\gamma_G} ,  \ottnt{varn} ) }%
}{
 \mathit{ctx}  \,  \overline{\gamma_G}  \,  \overline{\gamma}  \vdash (  \ottkw{var} \, \ottnt{varn}  ) \rightsquigarrow  (  \ottnt{v}  ,   [ \, ]   ) }{%
{\ottdrulename{e\_lookup}}{}%
}}


\newcommand{\ottdruleeXXcallXXnewframe}[1]{\ottdrule[#1]{%
\ottpremise{ ( \ottnt{stmt} , ((x_1, d_1), \ldots, (x_n, d_n))) = \mathrm{lookup\_funn\_sig\_body} ( x_{{\mathrm{1}}} ,  \ottsym{,} ,  d_{{\mathrm{1}}} ,  \ottsym{)} ) }%
\ottpremise{ \forall i \leqslant n. \, ((d_i \in \{\circ , \downarrow\} \implies \mathrm{is\_const} \, e_i ) \land (d_i \in \{\updownarrow , \uparrow\} \implies \mathrm{is\_var} \, e_i)) }%
\ottpremise{ \gamma'  = \mathrm{copyin} ([x_1 , \; .. \; , x_n] , [e_1 , \; .. \; , e_n] , [d_1 , \; .. \; , d_n] ,  \ottsym{,}  , \overrightarrow{\gamma}) }%
}{
 \ottsym{(}  { \mathit{apply\_table} }  \ottsym{,}  X  \ottsym{,}  F_g  \ottsym{,}  F_b  \ottsym{,}  P  \ottsym{,}  { \mathit{Tb} }  \ottsym{)}  \,  \overline{\gamma_G}  \,  \overline{\gamma}  \vdash (  \ottkw{call} \, \ottnt{funn}  \ottsym{(}  \ottnt{e_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{e_{\ottmv{n}}}  \ottsym{)}  ) \rightsquigarrow  (  \ottkw{var} \, \ottsym{(} \, \ottkw{star} \, \ottsym{,}  \ottnt{funn}  \ottsym{)}  ,   [   ( { \ottsym{[}  \ottnt{stmt}  \ottsym{]} )}_{ \ottsym{[}  \gamma'  \ottsym{]} }^{ \ottnt{funn} }   ]   ) }{%
{\ottdrulename{e\_call\_newframe}}{}%
}}


\newcommand{\ottdruleeXXcallXXargs}[1]{\ottdrule[#1]{%
\ottpremise{ ((x_1, d_1), \ldots, (x_n, d_n)) = \mathrm{lookup\_funn\_sig} ( x_{{\mathrm{1}}} ,  \ottsym{,} ,  d_{{\mathrm{1}}} ,  \ottsym{)} ) }%
\ottpremise{ i = \mathrm{min} \, \{ j . \,\,  \ottsym{[}  d_{{\mathrm{1}}}  \ottsym{,} \, .. \, \ottsym{,}  d_{\ottmv{n}}  \ottsym{]}  [j]  \in \{\circ , \downarrow\} \wedge \neg ( \mathrm{is\_const} \,  \ottsym{[}  \ottnt{e_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{e_{\ottmv{n}}}  \ottsym{]}  [j] ) \} }%
\ottpremise{\ottnt{e}  \ottsym{=}  \ottsym{[}  \ottnt{e_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{e_{\ottmv{n}}}  \ottsym{]}  \ottsym{[}  i  \ottsym{]}}%
\ottpremise{ \ottsym{(}  { \mathit{apply\_table} }  \ottsym{,}  X  \ottsym{,}  F_g  \ottsym{,}  F_b  \ottsym{,}  P  \ottsym{,}  { \mathit{Tb} }  \ottsym{)}  \,  \overline{\gamma_G}  \,  \overline{\gamma}  \vdash (  \ottnt{e}  ) \rightsquigarrow  (  \ottnt{e'}  ,  \overline{\Phi}  ) }%
\ottpremise{ \ottsym{[}  \ottnt{e'_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{e'_{\ottmv{n}}}  \ottsym{]}  =   ( i  \mapsto   \ottnt{e'} )  \ottsym{[}  \ottnt{e_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{e_{\ottmv{n}}}  \ottsym{]}  }%
}{
 \ottsym{(}  { \mathit{apply\_table} }  \ottsym{,}  X  \ottsym{,}  F_g  \ottsym{,}  F_b  \ottsym{,}  P  \ottsym{,}  { \mathit{Tb} }  \ottsym{)}  \,  \overline{\gamma_G}  \,  \overline{\gamma}  \vdash (  \ottkw{call} \, \ottnt{funn}  \ottsym{(}  \ottnt{e_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{e_{\ottmv{n}}}  \ottsym{)}  ) \rightsquigarrow  (  \ottkw{call} \, \ottnt{funn}  \ottsym{(}  \ottnt{e'_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{e'_{\ottmv{n}}}  \ottsym{)}  ,  \overline{\Phi}  ) }{%
{\ottdrulename{e\_call\_args}}{}%
}}


\newcommand{\ottdruleeXXeStruct}[1]{\ottdrule[#1]{%
\ottpremise{ i = \mathrm{min} \, \{ j . \; \neg ( \mathrm{is\_const} \,  \ottsym{[}  \ottnt{e_{{\mathrm{1}}}}  \ottsym{,} \, ... \, \ottsym{,}  \ottnt{e_{\ottmv{n}}}  \ottsym{]}  [j] ) \} }%
\ottpremise{\ottnt{e}  \ottsym{=}  \ottsym{[}  \ottnt{e_{{\mathrm{1}}}}  \ottsym{,} \, ... \, \ottsym{,}  \ottnt{e_{\ottmv{n}}}  \ottsym{]}  \ottsym{[}  i  \ottsym{]}}%
\ottpremise{ \mathit{ctx}  \,  \overline{\gamma_G}  \,  \overline{\gamma}  \vdash (  \ottnt{e}  ) \rightsquigarrow  (  \ottnt{e'}  ,  \overline{\Phi}  ) }%
\ottpremise{ \ottsym{[}  \ottnt{e'_{{\mathrm{1}}}}  \ottsym{,} \, ... \, \ottsym{,}  \ottnt{e'_{\ottmv{n}}}  \ottsym{]}  =   ( i  \mapsto   \ottnt{e'} )  \ottsym{[}  \ottnt{e_{{\mathrm{1}}}}  \ottsym{,} \, ... \, \ottsym{,}  \ottnt{e_{\ottmv{n}}}  \ottsym{]}  }%
}{
 \mathit{ctx}  \,  \overline{\gamma_G}  \,  \overline{\gamma}  \vdash (  \ottkw{eStruct} \, \ottsym{\{}  f_{{\mathrm{1}}}  \ottsym{=}  \ottnt{e_{{\mathrm{1}}}}  \ottsym{;} \, ... \, \ottsym{;}  f_{\ottmv{n}}  \ottsym{=}  \ottnt{e_{\ottmv{n}}}  \ottsym{\}}  ) \rightsquigarrow  (  \ottkw{eStruct} \, \ottsym{\{}  f_{{\mathrm{1}}}  \ottsym{=}  \ottnt{e'_{{\mathrm{1}}}}  \ottsym{;} \, ... \, \ottsym{;}  f_{\ottmv{n}}  \ottsym{=}  \ottnt{e'_{\ottmv{n}}}  \ottsym{\}}  ,  \overline{\Phi}  ) }{%
{\ottdrulename{e\_eStruct}}{}%
}}


\newcommand{\ottdruleeXXeStructXXtoXXv}[1]{\ottdrule[#1]{%
\ottpremise{ \mathrm{is\_consts} \,\,  \ottnt{e_{{\mathrm{1}}}}  \ottsym{,} \, ... \, \ottsym{,}  \ottnt{e_{\ottmv{n}}} }%
\ottpremise{ \ottnt{v_{{\mathrm{1}}}}  \ottsym{,} \, ... \, \ottsym{,}  \ottnt{v_{\ottmv{n}}}  = \mathrm{vl\_of\_el} \, (  \ottnt{e_{{\mathrm{1}}}}  \ottsym{,} \, ... \, \ottsym{,}  \ottnt{e_{\ottmv{n}}}  ) }%
}{
 \mathit{ctx}  \,  \overline{\gamma_G}  \,  \overline{\gamma}  \vdash (  \ottkw{eStruct} \, \ottsym{\{}  f_{{\mathrm{1}}}  \ottsym{=}  \ottnt{e_{{\mathrm{1}}}}  \ottsym{;} \, ... \, \ottsym{;}  f_{\ottmv{n}}  \ottsym{=}  \ottnt{e_{\ottmv{n}}}  \ottsym{\}}  ) \rightsquigarrow  (  \ottkw{struct} \, \ottsym{\{}  f_{{\mathrm{1}}}  \ottsym{=}  \ottnt{v_{{\mathrm{1}}}}  \ottsym{;} \, ... \, \ottsym{;}  f_{\ottmv{n}}  \ottsym{=}  \ottnt{v_{\ottmv{n}}}  \ottsym{\}}  ,   [ \, ]   ) }{%
{\ottdrulename{e\_eStruct\_to\_v}}{}%
}}


\newcommand{\ottdruleeXXsXXacc}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{v}  \ottsym{=} \, \ottkw{struct} \, \ottsym{\{}  f_{{\mathrm{1}}}  \ottsym{=}  \ottnt{v_{{\mathrm{1}}}}  \ottsym{;} \, ... \, \ottsym{;}  f_{\ottmv{n}}  \ottsym{=}  \ottnt{v_{\ottmv{n}}}  \ottsym{\}}  \ottsym{(}  f  \ottsym{)}}%
}{
 \mathit{ctx}  \,  \overline{\gamma_G}  \,  \overline{\gamma}  \vdash (  \ottkw{struct} \, \ottsym{\{}  f_{{\mathrm{1}}}  \ottsym{=}  \ottnt{v_{{\mathrm{1}}}}  \ottsym{;} \, ... \, \ottsym{;}  f_{\ottmv{n}}  \ottsym{=}  \ottnt{v_{\ottmv{n}}}  \ottsym{\}}  \ottsym{.}  f  ) \rightsquigarrow  (  \ottnt{v}  ,   [ \, ]   ) }{%
{\ottdrulename{e\_s\_acc}}{}%
}}


\newcommand{\ottdruleeXXaccXXargOne}[1]{\ottdrule[#1]{%
\ottpremise{ \mathit{ctx}  \,  \overline{\gamma_G}  \,  \overline{\gamma}  \vdash (  \ottnt{e}  ) \rightsquigarrow  (  \ottnt{e'}  ,  \overline{\Phi}  ) }%
}{
 \mathit{ctx}  \,  \overline{\gamma_G}  \,  \overline{\gamma}  \vdash (  \ottnt{e}  \ottsym{.}  f  ) \rightsquigarrow  (  \ottnt{e'}  \ottsym{.}  f  ,  \overline{\Phi}  ) }{%
{\ottdrulename{e\_acc\_arg1}}{}%
}}


\newcommand{\ottdruleeXXeHeader}[1]{\ottdrule[#1]{%
\ottpremise{ i = \mathrm{min} \, \{ j . \; \neg ( \mathrm{is\_const} \,  \ottsym{[}  \ottnt{e_{{\mathrm{1}}}}  \ottsym{,} \, ... \, \ottsym{,}  \ottnt{e_{\ottmv{n}}}  \ottsym{]}  [j] ) \} }%
\ottpremise{\ottnt{e}  \ottsym{=}  \ottsym{[}  \ottnt{e_{{\mathrm{1}}}}  \ottsym{,} \, ... \, \ottsym{,}  \ottnt{e_{\ottmv{n}}}  \ottsym{]}  \ottsym{[}  i  \ottsym{]}}%
\ottpremise{ \mathit{ctx}  \,  \overline{\gamma_G}  \,  \overline{\gamma}  \vdash (  \ottnt{e}  ) \rightsquigarrow  (  \ottnt{e'}  ,  \overline{\Phi}  ) }%
\ottpremise{ \ottsym{[}  \ottnt{e'_{{\mathrm{1}}}}  \ottsym{,} \, ... \, \ottsym{,}  \ottnt{e'_{\ottmv{n}}}  \ottsym{]}  =   ( i  \mapsto   \ottnt{e'} )  \ottsym{[}  \ottnt{e_{{\mathrm{1}}}}  \ottsym{,} \, ... \, \ottsym{,}  \ottnt{e_{\ottmv{n}}}  \ottsym{]}  }%
}{
 \mathit{ctx}  \,  \overline{\gamma_G}  \,  \overline{\gamma}  \vdash (  \ottkw{eHeader} \, \ottnt{boolv}  \ottsym{\{}  f_{{\mathrm{1}}}  \ottsym{=}  \ottnt{e_{{\mathrm{1}}}}  \ottsym{;} \, ... \, \ottsym{;}  f_{\ottmv{n}}  \ottsym{=}  \ottnt{e_{\ottmv{n}}}  \ottsym{\}}  ) \rightsquigarrow  (  \ottkw{eHeader} \, \ottnt{boolv}  \ottsym{\{}  f_{{\mathrm{1}}}  \ottsym{=}  \ottnt{e'_{{\mathrm{1}}}}  \ottsym{;} \, ... \, \ottsym{;}  f_{\ottmv{n}}  \ottsym{=}  \ottnt{e'_{\ottmv{n}}}  \ottsym{\}}  ,  \overline{\Phi}  ) }{%
{\ottdrulename{e\_eHeader}}{}%
}}


\newcommand{\ottdruleeXXeHeaderXXtoXXv}[1]{\ottdrule[#1]{%
\ottpremise{ \mathrm{is\_consts} \,\,  \ottnt{e_{{\mathrm{1}}}}  \ottsym{,} \, ... \, \ottsym{,}  \ottnt{e_{\ottmv{n}}} }%
\ottpremise{ \ottnt{v_{{\mathrm{1}}}}  \ottsym{,} \, ... \, \ottsym{,}  \ottnt{v_{\ottmv{n}}}  = \mathrm{vl\_of\_el} \, (  \ottnt{e_{{\mathrm{1}}}}  \ottsym{,} \, ... \, \ottsym{,}  \ottnt{e_{\ottmv{n}}}  ) }%
}{
 \mathit{ctx}  \,  \overline{\gamma_G}  \,  \overline{\gamma}  \vdash (  \ottkw{eHeader} \, \ottnt{boolv}  \ottsym{\{}  f_{{\mathrm{1}}}  \ottsym{=}  \ottnt{e_{{\mathrm{1}}}}  \ottsym{;} \, ... \, \ottsym{;}  f_{\ottmv{n}}  \ottsym{=}  \ottnt{e_{\ottmv{n}}}  \ottsym{\}}  ) \rightsquigarrow  (  \ottkw{header} \, \ottnt{boolv}  \ottsym{\{}  f_{{\mathrm{1}}}  \ottsym{=}  \ottnt{v_{{\mathrm{1}}}}  \ottsym{;} \, ... \, \ottsym{;}  f_{\ottmv{n}}  \ottsym{=}  \ottnt{v_{\ottmv{n}}}  \ottsym{\}}  ,   [ \, ]   ) }{%
{\ottdrulename{e\_eHeader\_to\_v}}{}%
}}


\newcommand{\ottdruleeXXhXXacc}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{v}  \ottsym{=} \, \ottkw{header} \, \ottnt{boolv}  \ottsym{\{}  f_{{\mathrm{1}}}  \ottsym{=}  \ottnt{v_{{\mathrm{1}}}}  \ottsym{;} \, ... \, \ottsym{;}  f_{\ottmv{n}}  \ottsym{=}  \ottnt{v_{\ottmv{n}}}  \ottsym{\}}  \ottsym{(}  f  \ottsym{)}}%
}{
 \mathit{ctx}  \,  \overline{\gamma_G}  \,  \overline{\gamma}  \vdash (  \ottkw{header} \, \ottnt{boolv}  \ottsym{\{}  f_{{\mathrm{1}}}  \ottsym{=}  \ottnt{v_{{\mathrm{1}}}}  \ottsym{;} \, ... \, \ottsym{;}  f_{\ottmv{n}}  \ottsym{=}  \ottnt{v_{\ottmv{n}}}  \ottsym{\}}  \ottsym{.}  f  ) \rightsquigarrow  (  \ottnt{v}  ,   [ \, ]   ) }{%
{\ottdrulename{e\_h\_acc}}{}%
}}


\newcommand{\ottdruleeXXselXXacc}[1]{\ottdrule[#1]{%
\ottpremise{ x'  = \{ v_1 : x_1 ; ... ; v_n : x_n ; \_ : x \} (v) }%
}{
 \mathit{ctx}  \,  \overline{\gamma_G}  \,  \overline{\gamma}  \vdash (  \ottkw{select} \, \ottnt{v}  \ottsym{\{}  \ottnt{v_{{\mathrm{1}}}}  \ottsym{:}  x_{{\mathrm{1}}}  \ottsym{;} \, ... \, \ottsym{;}  \ottnt{v_{\ottmv{n}}}  \ottsym{:}  x_{\ottmv{n}}  \ottsym{\}}  x  ) \rightsquigarrow  (  x'  ,   [ \, ]   ) }{%
{\ottdrulename{e\_sel\_acc}}{}%
}}


\newcommand{\ottdruleeXXconcatXXargOne}[1]{\ottdrule[#1]{%
\ottpremise{ \mathit{ctx}  \,  \overline{\gamma_G}  \,  \overline{\gamma}  \vdash (  \ottnt{e}  ) \rightsquigarrow  (  \ottnt{e''}  ,  \overline{\Phi}  ) }%
}{
 \mathit{ctx}  \,  \overline{\gamma_G}  \,  \overline{\gamma}  \vdash (  \ottkw{concat} \, \ottnt{e} \, \ottnt{e'}  ) \rightsquigarrow  (  \ottkw{concat} \, \ottnt{e''} \, \ottnt{e'}  ,  \overline{\Phi}  ) }{%
{\ottdrulename{e\_concat\_arg1}}{}%
}}


\newcommand{\ottdruleeXXconcatXXargTwo}[1]{\ottdrule[#1]{%
\ottpremise{ \mathit{ctx}  \,  \overline{\gamma_G}  \,  \overline{\gamma}  \vdash (  \ottnt{e}  ) \rightsquigarrow  (  \ottnt{e'}  ,  \overline{\Phi}  ) }%
}{
 \mathit{ctx}  \,  \overline{\gamma_G}  \,  \overline{\gamma}  \vdash (  \ottkw{concat} \, \ottnt{bitv} \, \ottnt{e}  ) \rightsquigarrow  (  \ottkw{concat} \, \ottnt{bitv} \, \ottnt{e'}  ,  \overline{\Phi}  ) }{%
{\ottdrulename{e\_concat\_arg2}}{}%
}}


\newcommand{\ottdruleeXXconcatXXv}[1]{\ottdrule[#1]{%
\ottpremise{ \ottnt{bitv''}  =   \ottnt{bitv}  {+}\mspace{-8mu}{+}   \ottnt{bitv'} }%
}{
 \mathit{ctx}  \,  \overline{\gamma_G}  \,  \overline{\gamma}  \vdash (  \ottkw{concat} \, \ottnt{bitv} \, \ottnt{bitv'}  ) \rightsquigarrow  (  \ottnt{bitv''}  ,   [ \, ]   ) }{%
{\ottdrulename{e\_concat\_v}}{}%
}}


\newcommand{\ottdruleeXXsliceXXargOne}[1]{\ottdrule[#1]{%
\ottpremise{ \mathit{ctx}  \,  \overline{\gamma_G}  \,  \overline{\gamma}  \vdash (  \ottnt{e}  ) \rightsquigarrow  (  \ottnt{e'}  ,  \overline{\Phi}  ) }%
}{
 \mathit{ctx}  \,  \overline{\gamma_G}  \,  \overline{\gamma}  \vdash (  \ottnt{e}  \ottsym{[}  \ottnt{bitv}  \ottsym{:}  \ottnt{bitv'}  \ottsym{]}  ) \rightsquigarrow  (  \ottnt{e'}  \ottsym{[}  \ottnt{bitv}  \ottsym{:}  \ottnt{bitv'}  \ottsym{]}  ,  \overline{\Phi}  ) }{%
{\ottdrulename{e\_slice\_arg1}}{}%
}}


\newcommand{\ottdruleeXXsliceXXv}[1]{\ottdrule[#1]{%
\ottpremise{ \ottnt{bitv'''}  =   \ottnt{bitv}  [  \ottnt{bitv'}  :  \ottnt{bitv''}  ] }%
}{
 \mathit{ctx}  \,  \overline{\gamma_G}  \,  \overline{\gamma}  \vdash (  \ottnt{bitv}  \ottsym{[}  \ottnt{bitv'}  \ottsym{:}  \ottnt{bitv''}  \ottsym{]}  ) \rightsquigarrow  (  \ottnt{bitv'''}  ,   [ \, ]   ) }{%
{\ottdrulename{e\_slice\_v}}{}%
}}


\newcommand{\ottdruleeXXselXXarg}[1]{\ottdrule[#1]{%
\ottpremise{ \mathit{ctx}  \,  \overline{\gamma_G}  \,  \overline{\gamma}  \vdash (  \ottnt{e}  ) \rightsquigarrow  (  \ottnt{e'}  ,  \overline{\Phi}  ) }%
}{
 \mathit{ctx}  \,  \overline{\gamma_G}  \,  \overline{\gamma}  \vdash (  \ottkw{select} \, \ottnt{e}  \ottsym{\{}  \ottnt{v_{{\mathrm{1}}}}  \ottsym{:}  x_{{\mathrm{1}}}  \ottsym{;} \, ... \, \ottsym{;}  \ottnt{v_{\ottmv{n}}}  \ottsym{:}  x_{\ottmv{n}}  \ottsym{\}}  x  ) \rightsquigarrow  (  \ottkw{select} \, \ottnt{e'}  \ottsym{\{}  \ottnt{v_{{\mathrm{1}}}}  \ottsym{:}  x_{{\mathrm{1}}}  \ottsym{;} \, ... \, \ottsym{;}  \ottnt{v_{\ottmv{n}}}  \ottsym{:}  x_{\ottmv{n}}  \ottsym{\}}  x  ,  \overline{\Phi}  ) }{%
{\ottdrulename{e\_sel\_arg}}{}%
}}


\newcommand{\ottdruleeXXunopXXarg}[1]{\ottdrule[#1]{%
\ottpremise{ \mathit{ctx}  \,  \overline{\gamma_G}  \,  \overline{\gamma}  \vdash (  \ottnt{e}  ) \rightsquigarrow  (  \ottnt{e'}  ,  \overline{\Phi}  ) }%
}{
 \mathit{ctx}  \,  \overline{\gamma_G}  \,  \overline{\gamma}  \vdash (   \ominus   \ottnt{e}   ) \rightsquigarrow  (   \ominus   \ottnt{e'}   ,  \overline{\Phi}  ) }{%
{\ottdrulename{e\_unop\_arg}}{}%
}}


\newcommand{\ottdruleeXXbinopXXargOne}[1]{\ottdrule[#1]{%
\ottpremise{ \mathit{ctx}  \,  \overline{\gamma_G}  \,  \overline{\gamma}  \vdash (  \ottnt{e}  ) \rightsquigarrow  (  \ottnt{e''}  ,  \overline{\Phi}  ) }%
}{
 \mathit{ctx}  \,  \overline{\gamma_G}  \,  \overline{\gamma}  \vdash (   \ottnt{e}   \oplus   \ottnt{e'}   ) \rightsquigarrow  (   \ottnt{e''}   \oplus   \ottnt{e'}   ,  \overline{\Phi}  ) }{%
{\ottdrulename{e\_binop\_arg1}}{}%
}}


\newcommand{\ottdruleeXXbinopXXargTwo}[1]{\ottdrule[#1]{%
\ottpremise{ ~\mathrm{is\_short\_circuit}( \oplus ) }%
\ottpremise{ \mathit{ctx}  \,  \overline{\gamma_G}  \,  \overline{\gamma}  \vdash (  \ottnt{e}  ) \rightsquigarrow  (  \ottnt{e'}  ,  \overline{\Phi}  ) }%
}{
 \mathit{ctx}  \,  \overline{\gamma_G}  \,  \overline{\gamma}  \vdash (   \ottnt{v}   \oplus   \ottnt{e}   ) \rightsquigarrow  (   \ottnt{v}   \oplus   \ottnt{e'}   ,  \overline{\Phi}  ) }{%
{\ottdrulename{e\_binop\_arg2}}{}%
}}


\newcommand{\ottdruleeXXnegXXbool}[1]{\ottdrule[#1]{%
\ottpremise{\ottsym{!}  b  \ottsym{=}  b'}%
}{
 \mathit{ctx}  \,  \overline{\gamma_G}  \,  \overline{\gamma}  \vdash (    !    b   ) \rightsquigarrow  (  b'  ,   [ \, ]   ) }{%
{\ottdrulename{e\_neg\_bool}}{}%
}}


\newcommand{\ottdruleeXXcompl}[1]{\ottdrule[#1]{%
\ottpremise{\ottsym{~}  \ottnt{bitv}  \ottsym{=}  \ottnt{bitv'}}%
}{
 \mathit{ctx}  \,  \overline{\gamma_G}  \,  \overline{\gamma}  \vdash (    \neg    \ottnt{bitv}   ) \rightsquigarrow  (  \ottnt{bitv'}  ,   [ \, ]   ) }{%
{\ottdrulename{e\_compl}}{}%
}}


\newcommand{\ottdruleeXXnegXXsigned}[1]{\ottdrule[#1]{%
\ottpremise{\ottsym{-}  \ottnt{bitv}  \ottsym{=}  \ottnt{bitv'}}%
}{
 \mathit{ctx}  \,  \overline{\gamma_G}  \,  \overline{\gamma}  \vdash (   \ottsym{-}   \ottnt{bitv}   ) \rightsquigarrow  (  \ottnt{bitv'}  ,   [ \, ]   ) }{%
{\ottdrulename{e\_neg\_signed}}{}%
}}


\newcommand{\ottdruleeXXunXXplus}[1]{\ottdrule[#1]{%
\ottpremise{\ottsym{+}  \ottnt{bitv}  \ottsym{=}  \ottnt{bitv'}}%
}{
 \mathit{ctx}  \,  \overline{\gamma_G}  \,  \overline{\gamma}  \vdash (   \ottsym{+}   \ottnt{bitv}   ) \rightsquigarrow  (  \ottnt{bitv'}  ,   [ \, ]   ) }{%
{\ottdrulename{e\_un\_plus}}{}%
}}


\newcommand{\ottdruleeXXmul}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{bitv}  \ottsym{*}  \ottnt{bitv'}  \ottsym{=}  \ottnt{bitv''}}%
}{
 \mathit{ctx}  \,  \overline{\gamma_G}  \,  \overline{\gamma}  \vdash (   \ottnt{bitv}    \times    \ottnt{bitv'}   ) \rightsquigarrow  (  \ottnt{bitv''}  ,   [ \, ]   ) }{%
{\ottdrulename{e\_mul}}{}%
}}


\newcommand{\ottdruleeXXdiv}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{bitv}  \ottsym{/}  \ottnt{bitv'}  \ottsym{=}  \ottnt{bitv''}}%
}{
 \mathit{ctx}  \,  \overline{\gamma_G}  \,  \overline{\gamma}  \vdash (   \ottnt{bitv}   \ottsym{/}   \ottnt{bitv'}   ) \rightsquigarrow  (  \ottnt{bitv''}  ,   [ \, ]   ) }{%
{\ottdrulename{e\_div}}{}%
}}


\newcommand{\ottdruleeXXmod}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{bitv} \, \ottkw{mod} \, \ottnt{bitv'}  \ottsym{=}  \ottnt{bitv''}}%
}{
 \mathit{ctx}  \,  \overline{\gamma_G}  \,  \overline{\gamma}  \vdash (   \ottnt{bitv}    \bmod    \ottnt{bitv'}   ) \rightsquigarrow  (  \ottnt{bitv''}  ,   [ \, ]   ) }{%
{\ottdrulename{e\_mod}}{}%
}}


\newcommand{\ottdruleeXXadd}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{bitv}  \ottsym{+}  \ottnt{bitv'}  \ottsym{=}  \ottnt{bitv''}}%
}{
 \mathit{ctx}  \,  \overline{\gamma_G}  \,  \overline{\gamma}  \vdash (   \ottnt{bitv}   \ottsym{+}   \ottnt{bitv'}   ) \rightsquigarrow  (  \ottnt{bitv''}  ,   [ \, ]   ) }{%
{\ottdrulename{e\_add}}{}%
}}


\newcommand{\ottdruleeXXsub}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{bitv}  \ottsym{-}  \ottnt{bitv'}  \ottsym{=}  \ottnt{bitv''}}%
}{
 \mathit{ctx}  \,  \overline{\gamma_G}  \,  \overline{\gamma}  \vdash (   \ottnt{bitv}   \ottsym{-}   \ottnt{bitv'}   ) \rightsquigarrow  (  \ottnt{bitv''}  ,   [ \, ]   ) }{%
{\ottdrulename{e\_sub}}{}%
}}


\newcommand{\ottdruleeXXshl}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{bitv} \, \ottkw{SHL} \, \ottnt{bitv'}  \ottsym{=}  \ottnt{bitv''}}%
}{
 \mathit{ctx}  \,  \overline{\gamma_G}  \,  \overline{\gamma}  \vdash (   \ottnt{bitv}    \ll    \ottnt{bitv'}   ) \rightsquigarrow  (  \ottnt{bitv''}  ,   [ \, ]   ) }{%
{\ottdrulename{e\_shl}}{}%
}}


\newcommand{\ottdruleeXXshr}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{bitv} \, \ottkw{SHR} \, \ottnt{bitv'}  \ottsym{=}  \ottnt{bitv''}}%
}{
 \mathit{ctx}  \,  \overline{\gamma_G}  \,  \overline{\gamma}  \vdash (   \ottnt{bitv}    \gg    \ottnt{bitv'}   ) \rightsquigarrow  (  \ottnt{bitv''}  ,   [ \, ]   ) }{%
{\ottdrulename{e\_shr}}{}%
}}


\newcommand{\ottdruleeXXle}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{bitv} \, \ottkw{LE} \, \ottnt{bitv'}  \ottsym{=}  b}%
}{
 \mathit{ctx}  \,  \overline{\gamma_G}  \,  \overline{\gamma}  \vdash (   \ottnt{bitv}    \leq    \ottnt{bitv'}   ) \rightsquigarrow  (  b  ,   [ \, ]   ) }{%
{\ottdrulename{e\_le}}{}%
}}


\newcommand{\ottdruleeXXge}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{bitv} \, \ottkw{GE} \, \ottnt{bitv'}  \ottsym{=}  b}%
}{
 \mathit{ctx}  \,  \overline{\gamma_G}  \,  \overline{\gamma}  \vdash (   \ottnt{bitv}    \geq    \ottnt{bitv'}   ) \rightsquigarrow  (  b  ,   [ \, ]   ) }{%
{\ottdrulename{e\_ge}}{}%
}}


\newcommand{\ottdruleeXXlt}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{bitv}  \ottsym{<}  \ottnt{bitv'}  \ottsym{=}  b}%
}{
 \mathit{ctx}  \,  \overline{\gamma_G}  \,  \overline{\gamma}  \vdash (   \ottnt{bitv}    <    \ottnt{bitv'}   ) \rightsquigarrow  (  b  ,   [ \, ]   ) }{%
{\ottdrulename{e\_lt}}{}%
}}


\newcommand{\ottdruleeXXgt}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{bitv}  \ottsym{>}  \ottnt{bitv'}  \ottsym{=}  b}%
}{
 \mathit{ctx}  \,  \overline{\gamma_G}  \,  \overline{\gamma}  \vdash (   \ottnt{bitv}    >    \ottnt{bitv'}   ) \rightsquigarrow  (  b  ,   [ \, ]   ) }{%
{\ottdrulename{e\_gt}}{}%
}}


\newcommand{\ottdruleeXXneq}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{bitv} \, \ottkw{NE} \, \ottnt{bitv'}  \ottsym{=}  b}%
}{
 \mathit{ctx}  \,  \overline{\gamma_G}  \,  \overline{\gamma}  \vdash (   \ottnt{bitv}    \neq    \ottnt{bitv'}   ) \rightsquigarrow  (  b  ,   [ \, ]   ) }{%
{\ottdrulename{e\_neq}}{}%
}}


\newcommand{\ottdruleeXXneqXXerror}[1]{\ottdrule[#1]{%
\ottpremise{ ( x  \neq  x' ) =  b }%
}{
 \mathit{ctx}  \,  \overline{\gamma_G}  \,  \overline{\gamma}  \vdash (   \ottsym{(}  \ottkw{errmsg} \, x  \ottsym{)}    \neq    \ottsym{(}  \ottkw{errmsg} \, x'  \ottsym{)}   ) \rightsquigarrow  (  b  ,   [ \, ]   ) }{%
{\ottdrulename{e\_neq\_error}}{}%
}}


\newcommand{\ottdruleeXXneqXXbool}[1]{\ottdrule[#1]{%
\ottpremise{b \, \ottkw{NE} \, b'  \ottsym{=}  b''}%
}{
 \mathit{ctx}  \,  \overline{\gamma_G}  \,  \overline{\gamma}  \vdash (   b    \neq    b'   ) \rightsquigarrow  (  b''  ,   [ \, ]   ) }{%
{\ottdrulename{e\_neq\_bool}}{}%
}}


\newcommand{\ottdruleeXXeq}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{bitv} \, \ottkw{EQ} \, \ottnt{bitv'}  \ottsym{=}  b}%
}{
 \mathit{ctx}  \,  \overline{\gamma_G}  \,  \overline{\gamma}  \vdash (   \ottnt{bitv}    =    \ottnt{bitv'}   ) \rightsquigarrow  (  b  ,   [ \, ]   ) }{%
{\ottdrulename{e\_eq}}{}%
}}


\newcommand{\ottdruleeXXeqXXerror}[1]{\ottdrule[#1]{%
\ottpremise{ ( x  =  x' ) =  b }%
}{
 \mathit{ctx}  \,  \overline{\gamma_G}  \,  \overline{\gamma}  \vdash (   \ottsym{(}  \ottkw{errmsg} \, x  \ottsym{)}    =    \ottsym{(}  \ottkw{errmsg} \, x'  \ottsym{)}   ) \rightsquigarrow  (  b  ,   [ \, ]   ) }{%
{\ottdrulename{e\_eq\_error}}{}%
}}


\newcommand{\ottdruleeXXeqXXbool}[1]{\ottdrule[#1]{%
\ottpremise{b \, \ottkw{EQ} \, b'  \ottsym{=}  b''}%
}{
 \mathit{ctx}  \,  \overline{\gamma_G}  \,  \overline{\gamma}  \vdash (   b    =    b'   ) \rightsquigarrow  (  b''  ,   [ \, ]   ) }{%
{\ottdrulename{e\_eq\_bool}}{}%
}}


\newcommand{\ottdruleeXXand}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{bitv}  \ottsym{\&}  \ottnt{bitv'}  \ottsym{=}  \ottnt{bitv''}}%
}{
 \mathit{ctx}  \,  \overline{\gamma_G}  \,  \overline{\gamma}  \vdash (   \ottnt{bitv}   \ottsym{\&}   \ottnt{bitv'}   ) \rightsquigarrow  (  \ottnt{bitv''}  ,   [ \, ]   ) }{%
{\ottdrulename{e\_and}}{}%
}}


\newcommand{\ottdruleeXXxor}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{bitv}  \ottsym{\mbox{$\uparrow$}}  \ottnt{bitv'}  \ottsym{=}  \ottnt{bitv''}}%
}{
 \mathit{ctx}  \,  \overline{\gamma_G}  \,  \overline{\gamma}  \vdash (   \ottnt{bitv}    \underline{\vee}    \ottnt{bitv'}   ) \rightsquigarrow  (  \ottnt{bitv''}  ,   [ \, ]   ) }{%
{\ottdrulename{e\_xor}}{}%
}}


\newcommand{\ottdruleeXXor}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{bitv}  \ottsym{\mbox{$\mid$}}  \ottnt{bitv'}  \ottsym{=}  \ottnt{bitv''}}%
}{
 \mathit{ctx}  \,  \overline{\gamma_G}  \,  \overline{\gamma}  \vdash (   \ottnt{bitv}    \mid    \ottnt{bitv'}   ) \rightsquigarrow  (  \ottnt{bitv''}  ,   [ \, ]   ) }{%
{\ottdrulename{e\_or}}{}%
}}


\newcommand{\ottdruleeXXbinXXandOne}[1]{\ottdrule[#1]{%
}{
 \mathit{ctx}  \,  \overline{\gamma_G}  \,  \overline{\gamma}  \vdash (    { \bot }     \land    \ottnt{e}   ) \rightsquigarrow  (   { \bot }   ,   [ \, ]   ) }{%
{\ottdrulename{e\_bin\_and1}}{}%
}}


\newcommand{\ottdruleeXXbinXXandTwo}[1]{\ottdrule[#1]{%
}{
 \mathit{ctx}  \,  \overline{\gamma_G}  \,  \overline{\gamma}  \vdash (    { \top }     \land    \ottnt{e}   ) \rightsquigarrow  (  \ottnt{e}  ,   [ \, ]   ) }{%
{\ottdrulename{e\_bin\_and2}}{}%
}}


\newcommand{\ottdruleeXXbinXXorOne}[1]{\ottdrule[#1]{%
}{
 \mathit{ctx}  \,  \overline{\gamma_G}  \,  \overline{\gamma}  \vdash (    { \top }     \lor    \ottnt{e}   ) \rightsquigarrow  (   { \top }   ,   [ \, ]   ) }{%
{\ottdrulename{e\_bin\_or1}}{}%
}}


\newcommand{\ottdruleeXXbinXXorTwo}[1]{\ottdrule[#1]{%
}{
 \mathit{ctx}  \,  \overline{\gamma_G}  \,  \overline{\gamma}  \vdash (    { \bot }     \lor    \ottnt{e}   ) \rightsquigarrow  (  \ottnt{e}  ,   [ \, ]   ) }{%
{\ottdrulename{e\_bin\_or2}}{}%
}}

\newcommand{\ottdefneXXred}[1]{\begin{ottdefnblock}[#1]{$ \mathit{ctx}  \,  \overline{\gamma_G}  \,  \overline{\gamma}  \vdash (  \ottnt{e}  ) \rightsquigarrow  (  \ottnt{e'}  ,  \overline{\Phi}  ) $}{\ottcom{expression semantics}}
\ottusedrule{\ottdruleeXXlookup{}}
\ottusedrule{\ottdruleeXXcallXXnewframe{}}
\ottusedrule{\ottdruleeXXcallXXargs{}}
\ottusedrule{\ottdruleeXXeStruct{}}
\ottusedrule{\ottdruleeXXeStructXXtoXXv{}}
\ottusedrule{\ottdruleeXXsXXacc{}}
\ottusedrule{\ottdruleeXXaccXXargOne{}}
\ottusedrule{\ottdruleeXXeHeader{}}
\ottusedrule{\ottdruleeXXeHeaderXXtoXXv{}}
\ottusedrule{\ottdruleeXXhXXacc{}}
\ottusedrule{\ottdruleeXXselXXacc{}}
\ottusedrule{\ottdruleeXXconcatXXargOne{}}
\ottusedrule{\ottdruleeXXconcatXXargTwo{}}
\ottusedrule{\ottdruleeXXconcatXXv{}}
\ottusedrule{\ottdruleeXXsliceXXargOne{}}
\ottusedrule{\ottdruleeXXsliceXXv{}}
\ottusedrule{\ottdruleeXXselXXarg{}}
\ottusedrule{\ottdruleeXXunopXXarg{}}
\ottusedrule{\ottdruleeXXbinopXXargOne{}}
\ottusedrule{\ottdruleeXXbinopXXargTwo{}}
\ottusedrule{\ottdruleeXXnegXXbool{}}
\ottusedrule{\ottdruleeXXcompl{}}
\ottusedrule{\ottdruleeXXnegXXsigned{}}
\ottusedrule{\ottdruleeXXunXXplus{}}
\ottusedrule{\ottdruleeXXmul{}}
\ottusedrule{\ottdruleeXXdiv{}}
\ottusedrule{\ottdruleeXXmod{}}
\ottusedrule{\ottdruleeXXadd{}}
\ottusedrule{\ottdruleeXXsub{}}
\ottusedrule{\ottdruleeXXshl{}}
\ottusedrule{\ottdruleeXXshr{}}
\ottusedrule{\ottdruleeXXle{}}
\ottusedrule{\ottdruleeXXge{}}
\ottusedrule{\ottdruleeXXlt{}}
\ottusedrule{\ottdruleeXXgt{}}
\ottusedrule{\ottdruleeXXneq{}}
\ottusedrule{\ottdruleeXXneqXXerror{}}
\ottusedrule{\ottdruleeXXneqXXbool{}}
\ottusedrule{\ottdruleeXXeq{}}
\ottusedrule{\ottdruleeXXeqXXerror{}}
\ottusedrule{\ottdruleeXXeqXXbool{}}
\ottusedrule{\ottdruleeXXand{}}
\ottusedrule{\ottdruleeXXxor{}}
\ottusedrule{\ottdruleeXXor{}}
\ottusedrule{\ottdruleeXXbinXXandOne{}}
\ottusedrule{\ottdruleeXXbinXXandTwo{}}
\ottusedrule{\ottdruleeXXbinXXorOne{}}
\ottusedrule{\ottdruleeXXbinXXorTwo{}}
\end{ottdefnblock}}


\newcommand{\ottdefnseXXsem}{
\ottdefneXXred{}}

% defns stmt_sem
%% defn stmt_red
\newcommand{\ottdrulestmtXXassXXv}[1]{\ottdrule[#1]{%
\ottpremise{ \overline{\gamma}'  =  \ottsym{(}   \overline{\gamma}  \mathrel{\mathop+}+   \overline{\gamma_G}    \ottsym{)}  [  \ottnt{lval}  \longmapsto  \ottnt{v}  ] }%
\ottpremise{ (  \overline{\gamma_G}'  ,   \overline{\gamma}''  ) = \mathrm{separate}( \overline{\gamma}' ) }%
}{
 \mathit{ctx}  \vdash   \ottsym{(}  { {\gamma}_A }  \ottsym{,}  \overline{\gamma_G}  \ottsym{,}   [   ( { \ottsym{[}   \ottnt{lval}  \mathrel{\mathop:}=  \ottnt{v}   \ottsym{]} )}_{ \overline{\gamma} }^{ \ottnt{funn} }   ]   \ottsym{,}   { \mathbf{run} }   \ottsym{)}  \rightarrow   \ottsym{(}  { {\gamma}_A }  \ottsym{,}  \overline{\gamma_G}'  \ottsym{,}   [   ( { \ottsym{[}   \emptyset_{ \mathrm{stmt} }   \ottsym{]} )}_{ \overline{\gamma}'' }^{ \ottnt{funn} }   ]   \ottsym{,}   { \mathbf{run} }   \ottsym{)} }{%
{\ottdrulename{stmt\_ass\_v}}{}%
}}


\newcommand{\ottdrulestmtXXseqOne}[1]{\ottdrule[#1]{%
\ottpremise{ \mathit{ctx}  \vdash   \ottsym{(}  { {\gamma}_A }  \ottsym{,}  \overline{\gamma_G}  \ottsym{,}   [   ( { \ottsym{[}  \ottnt{stmt_{{\mathrm{1}}}}  \ottsym{]} )}_{ \overline{\gamma} }^{ \ottnt{funn} }   ]   \ottsym{,}   { \mathbf{run} }   \ottsym{)}  \rightarrow   \ottsym{(}  { {\gamma}_A }'  \ottsym{,}  \overline{\gamma_G}'  \ottsym{,}   \overline{\Phi}  {+}\mspace{-8mu}{+}   [   ( {  \overline{ \mathit{stmt} }'  \mathrel{\mathop+}+  \ottsym{[}  \ottnt{stmt'_{{\mathrm{1}}}}  \ottsym{]}  )}_{ \overline{\gamma}' }^{ \ottnt{funn} }   ]    \ottsym{,}   { \mathbf{run} }   \ottsym{)} }%
}{
 \mathit{ctx}  \vdash   \ottsym{(}  { {\gamma}_A }  \ottsym{,}  \overline{\gamma_G}  \ottsym{,}   [   ( { \ottsym{[}  \ottnt{stmt_{{\mathrm{1}}}}  \ottsym{;}  \ottnt{stmt_{{\mathrm{2}}}}  \ottsym{]} )}_{ \overline{\gamma} }^{ \ottnt{funn} }   ]   \ottsym{,}   { \mathbf{run} }   \ottsym{)}  \rightarrow   \ottsym{(}  { {\gamma}_A }'  \ottsym{,}  \overline{\gamma_G}'  \ottsym{,}   \overline{\Phi}  {+}\mspace{-8mu}{+}   [   ( {  \overline{ \mathit{stmt} }'  \mathrel{\mathop+}+  \ottsym{[}  \ottnt{stmt'_{{\mathrm{1}}}}  \ottsym{;}  \ottnt{stmt_{{\mathrm{2}}}}  \ottsym{]}  )}_{ \overline{\gamma}' }^{ \ottnt{funn} }   ]    \ottsym{,}   { \mathbf{run} }   \ottsym{)} }{%
{\ottdrulename{stmt\_seq1}}{}%
}}


\newcommand{\ottdrulestmtXXseqTwo}[1]{\ottdrule[#1]{%
}{
 \mathit{ctx}  \vdash   \ottsym{(}  { {\gamma}_A }  \ottsym{,}  \overline{\gamma_G}  \ottsym{,}   [   ( { \ottsym{[}   \emptyset_{ \mathrm{stmt} }   \ottsym{;}  \ottnt{stmt}  \ottsym{]} )}_{ \overline{\gamma} }^{ \ottnt{funn} }   ]   \ottsym{,}   { \mathbf{run} }   \ottsym{)}  \rightarrow   \ottsym{(}  { {\gamma}_A }  \ottsym{,}  \overline{\gamma_G}  \ottsym{,}   [   ( { \ottsym{[}  \ottnt{stmt}  \ottsym{]} )}_{ \overline{\gamma} }^{ \ottnt{funn} }   ]   \ottsym{,}   { \mathbf{run} }   \ottsym{)} }{%
{\ottdrulename{stmt\_seq2}}{}%
}}


\newcommand{\ottdrulestmtXXseqThree}[1]{\ottdrule[#1]{%
\ottpremise{ \mathit{ctx}  \vdash   \ottsym{(}  { {\gamma}_A }  \ottsym{,}  \overline{\gamma_G}  \ottsym{,}   [   ( { \ottsym{[}  \ottnt{stmt_{{\mathrm{1}}}}  \ottsym{]} )}_{ \overline{\gamma} }^{ \ottnt{funn} }   ]   \ottsym{,}   { \mathbf{run} }   \ottsym{)}  \rightarrow   \ottsym{(}  { {\gamma}_A }'  \ottsym{,}  \overline{\gamma_G}'  \ottsym{,}   [   ( { \ottsym{[}  \ottnt{stmt'_{{\mathrm{1}}}}  \ottsym{]} )}_{ \overline{\gamma}' }^{ \ottnt{funn} }   ]   \ottsym{,}  t  \ottsym{)} }%
\ottpremise{ t \neq { \mathbf{run} } }%
}{
 \mathit{ctx}  \vdash   \ottsym{(}  { {\gamma}_A }  \ottsym{,}  \overline{\gamma_G}  \ottsym{,}   [   ( { \ottsym{[}  \ottnt{stmt_{{\mathrm{1}}}}  \ottsym{;}  \ottnt{stmt_{{\mathrm{2}}}}  \ottsym{]} )}_{ \overline{\gamma} }^{ \ottnt{funn} }   ]   \ottsym{,}   { \mathbf{run} }   \ottsym{)}  \rightarrow   \ottsym{(}  { {\gamma}_A }'  \ottsym{,}  \overline{\gamma_G}'  \ottsym{,}   [   ( { \ottsym{[}  \ottnt{stmt'_{{\mathrm{1}}}}  \ottsym{]} )}_{ \overline{\gamma}' }^{ \ottnt{funn} }   ]   \ottsym{,}  t  \ottsym{)} }{%
{\ottdrulename{stmt\_seq3}}{}%
}}


\newcommand{\ottdrulestmtXXcondTwo}[1]{\ottdrule[#1]{%
}{
 \mathit{ctx}  \vdash   \ottsym{(}  { {\gamma}_A }  \ottsym{,}  \overline{\gamma_G}  \ottsym{,}   [   ( { \ottsym{[}  \ottkw{if} \,  { \top }  \, \ottkw{then} \, \ottnt{stmt_{{\mathrm{1}}}} \, \ottkw{else} \, \ottnt{stmt_{{\mathrm{2}}}}  \ottsym{]} )}_{ \overline{\gamma} }^{ \ottnt{funn} }   ]   \ottsym{,}   { \mathbf{run} }   \ottsym{)}  \rightarrow   \ottsym{(}  { {\gamma}_A }  \ottsym{,}  \overline{\gamma_G}  \ottsym{,}   [   ( { \ottsym{[}  \ottnt{stmt_{{\mathrm{1}}}}  \ottsym{]} )}_{ \overline{\gamma} }^{ \ottnt{funn} }   ]   \ottsym{,}   { \mathbf{run} }   \ottsym{)} }{%
{\ottdrulename{stmt\_cond2}}{}%
}}


\newcommand{\ottdrulestmtXXcondThree}[1]{\ottdrule[#1]{%
}{
 \mathit{ctx}  \vdash   \ottsym{(}  { {\gamma}_A }  \ottsym{,}  \overline{\gamma_G}  \ottsym{,}   [   ( { \ottsym{[}  \ottkw{if} \,  { \bot }  \, \ottkw{then} \, \ottnt{stmt_{{\mathrm{1}}}} \, \ottkw{else} \, \ottnt{stmt_{{\mathrm{2}}}}  \ottsym{]} )}_{ \overline{\gamma} }^{ \ottnt{funn} }   ]   \ottsym{,}   { \mathbf{run} }   \ottsym{)}  \rightarrow   \ottsym{(}  { {\gamma}_A }  \ottsym{,}  \overline{\gamma_G}  \ottsym{,}   [   ( { \ottsym{[}  \ottnt{stmt_{{\mathrm{2}}}}  \ottsym{]} )}_{ \overline{\gamma} }^{ \ottnt{funn} }   ]   \ottsym{,}   { \mathbf{run} }   \ottsym{)} }{%
{\ottdrulename{stmt\_cond3}}{}%
}}


\newcommand{\ottdrulestmtXXblockXXenter}[1]{\ottdrule[#1]{%
\ottpremise{  \gamma   = \mathrm{replicate} ( { \overline{ \mathit{decl} } } ) }%
\ottpremise{\overline{\gamma}'  \ottsym{=}   \ottsym{[}  \gamma  \ottsym{]}  \mathrel{\mathop+}+  \overline{\gamma} }%
}{
 \mathit{ctx}  \vdash   \ottsym{(}  { {\gamma}_A }  \ottsym{,}  \overline{\gamma_G}  \ottsym{,}   [   ( { \ottsym{[}   \{  { \overline{ \mathit{decl} } }  \,  \ottnt{stmt}  \}   \ottsym{]} )}_{ \overline{\gamma} }^{ \ottnt{funn} }   ]   \ottsym{,}   { \mathbf{run} }   \ottsym{)}  \rightarrow   \ottsym{(}  { {\gamma}_A }  \ottsym{,}  \overline{\gamma_G}  \ottsym{,}   [   ( {  \ottnt{stmt}  ::  \ottsym{[}   \emptyset_{ \mathrm{stmt} }   \ottsym{]}  )}_{ \overline{\gamma}' }^{ \ottnt{funn} }   ]   \ottsym{,}   { \mathbf{run} }   \ottsym{)} }{%
{\ottdrulename{stmt\_block\_enter}}{}%
}}


\newcommand{\ottdrulestmtXXblockXXexec}[1]{\ottdrule[#1]{%
\ottpremise{ \mathrm{not\_empty} \;  \ottnt{stmt} }%
\ottpremise{ \mathrm{not\_empty} \;  \overline{ \mathit{stmt} } }%
\ottpremise{ \ottsym{(}  { \mathit{apply\_table} }  \ottsym{,}  X  \ottsym{,}  F_g  \ottsym{,}  F_b  \ottsym{,}  P  \ottsym{,}  { \mathit{Tb} }  \ottsym{)}  \vdash   \ottsym{(}  { {\gamma}_A }  \ottsym{,}  \overline{\gamma_G}  \ottsym{,}   [   ( { \ottsym{[}  \ottnt{stmt}  \ottsym{]} )}_{ \overline{\gamma} }^{ \ottnt{funn} }   ]   \ottsym{,}  t  \ottsym{)}  \rightarrow   \ottsym{(}  { {\gamma}_A }'  \ottsym{,}  \overline{\gamma_G}'  \ottsym{,}   \overline{\Phi}'  {+}\mspace{-8mu}{+}   [   ( { \overline{ \mathit{stmt} }' )}_{ \overline{\gamma}' }^{ \ottnt{funn} }   ]    \ottsym{,}  t'  \ottsym{)} }%
}{
 \ottsym{(}  { \mathit{apply\_table} }  \ottsym{,}  X  \ottsym{,}  F_g  \ottsym{,}  F_b  \ottsym{,}  P  \ottsym{,}  { \mathit{Tb} }  \ottsym{)}  \vdash   \ottsym{(}  { {\gamma}_A }  \ottsym{,}  \overline{\gamma_G}  \ottsym{,}   [   ( {  \ottnt{stmt}  ::  \overline{ \mathit{stmt} }  )}_{ \overline{\gamma} }^{ \ottnt{funn} }   ]   \ottsym{,}  t  \ottsym{)}  \rightarrow   \ottsym{(}  { {\gamma}_A }'  \ottsym{,}  \overline{\gamma_G}'  \ottsym{,}   \overline{\Phi}'  {+}\mspace{-8mu}{+}   [   ( {  \overline{ \mathit{stmt} }'  \mathrel{\mathop+}+  \overline{ \mathit{stmt} }  )}_{ \overline{\gamma}' }^{ \ottnt{funn} }   ]    \ottsym{,}  t'  \ottsym{)} }{%
{\ottdrulename{stmt\_block\_exec}}{}%
}}


\newcommand{\ottdrulestmtXXblockXXexit}[1]{\ottdrule[#1]{%
\ottpremise{ \mathrm{not\_empty} \;  \overline{ \mathit{stmt} } }%
\ottpremise{\overline{\gamma}'  \ottsym{=}   \mathrm{tl} \;  \overline{\gamma} }%
}{
 \mathit{ctx}  \vdash   \ottsym{(}  { {\gamma}_A }  \ottsym{,}  \overline{\gamma_G}  \ottsym{,}   [   ( {   \emptyset_{ \mathrm{stmt} }   ::  \overline{ \mathit{stmt} }  )}_{ \overline{\gamma} }^{ \ottnt{funn} }   ]   \ottsym{,}  t  \ottsym{)}  \rightarrow   \ottsym{(}  { {\gamma}_A }  \ottsym{,}  \overline{\gamma_G}  \ottsym{,}   [   ( { \overline{ \mathit{stmt} } )}_{ \overline{\gamma}' }^{ \ottnt{funn} }   ]   \ottsym{,}  t  \ottsym{)} }{%
{\ottdrulename{stmt\_block\_exit}}{}%
}}


\newcommand{\ottdrulestmtXXverifyXXThree}[1]{\ottdrule[#1]{%
}{
 \mathit{ctx}  \vdash   \ottsym{(}  { {\gamma}_A }  \ottsym{,}  \overline{\gamma_G}  \ottsym{,}   [   ( { \ottsym{[}  \ottkw{verify} \,  { \top }  \, \ottsym{(}  \ottkw{errmsg} \, x  \ottsym{)}  \ottsym{]} )}_{ \overline{\gamma} }^{ \ottnt{funn} }   ]   \ottsym{,}   { \mathbf{run} }   \ottsym{)}  \rightarrow   \ottsym{(}  { {\gamma}_A }  \ottsym{,}  \overline{\gamma_G}  \ottsym{,}   [   ( { \ottsym{[}   \emptyset_{ \mathrm{stmt} }   \ottsym{]} )}_{ \overline{\gamma} }^{ \ottnt{funn} }   ]   \ottsym{,}   { \mathbf{run} }   \ottsym{)} }{%
{\ottdrulename{stmt\_verify\_3}}{}%
}}


\newcommand{\ottdrulestmtXXverifyXXFour}[1]{\ottdrule[#1]{%
\ottpremise{ x'  = ``\mathit{parseError}" }%
\ottpremise{ x''  = ``\mathit{reject}" }%
}{
 \mathit{ctx}  \vdash   \ottsym{(}  { {\gamma}_A }  \ottsym{,}  \overline{\gamma_G}  \ottsym{,}   [   ( { \ottsym{[}  \ottkw{verify} \,  { \bot }  \, \ottsym{(}  \ottkw{errmsg} \, x  \ottsym{)}  \ottsym{]} )}_{ \overline{\gamma} }^{ \ottnt{funn} }   ]   \ottsym{,}   { \mathbf{run} }   \ottsym{)}  \rightarrow   \ottsym{(}  { {\gamma}_A }  \ottsym{,}  \overline{\gamma_G}  \ottsym{,}   [   ( { \ottsym{[}   x'  \mathrel{\mathop:}=  \ottsym{(}  \ottkw{errmsg} \, x  \ottsym{)}   \ottsym{;}   \mathbf{transition}\,  x''   \ottsym{]} )}_{ \overline{\gamma} }^{ \ottnt{funn} }   ]   \ottsym{,}   { \mathbf{run} }   \ottsym{)} }{%
{\ottdrulename{stmt\_verify\_4}}{}%
}}


\newcommand{\ottdrulestmtXXtrans}[1]{\ottdrule[#1]{%
}{
 \mathit{ctx}  \vdash   \ottsym{(}  { {\gamma}_A }  \ottsym{,}  \overline{\gamma_G}  \ottsym{,}   [   ( { \ottsym{[}   \mathbf{transition}\,  x   \ottsym{]} )}_{ \overline{\gamma} }^{ \ottnt{funn} }   ]   \ottsym{,}   { \mathbf{run} }   \ottsym{)}  \rightarrow   \ottsym{(}  { {\gamma}_A }  \ottsym{,}  \overline{\gamma_G}  \ottsym{,}   [   ( { \ottsym{[}   \emptyset_{ \mathrm{stmt} }   \ottsym{]} )}_{ \overline{\gamma} }^{ \ottnt{funn} }   ]   \ottsym{,}   { \mathbf{tra} \;  x  }   \ottsym{)} }{%
{\ottdrulename{stmt\_trans}}{}%
}}


\newcommand{\ottdrulestmtXXapplyXXtableXXv}[1]{\ottdrule[#1]{%
\ottpremise{ \mathrm{is\_consts} \,\,  \ottnt{e_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{e_{\ottmv{n}}} }%
\ottpremise{ \mathrm{Tb}\,  tbl \, =\, (  \ottsym{[}  \mathit{mk}_{{\mathrm{1}}}  \ottsym{,} \, .. \, \ottsym{,}  \mathit{mk}_{\ottmv{n}}  \ottsym{]}  , (  f'  ,  \ottsym{[}  \ottnt{e'_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{e'_{\ottmv{o}}}  \ottsym{]}  ) ) }%
\ottpremise{ { \mathit{apply\_table} } \, (  tbl  , \,  \ottsym{(}  \ottnt{e_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{e_{\ottmv{n}}}  \ottsym{)} , \,  \ottsym{(}  \ottsym{[}  \mathit{mk}_{{\mathrm{1}}}  \ottsym{,} \, .. \, \ottsym{,}  \mathit{mk}_{\ottmv{n}}  \ottsym{]}  \ottsym{)} , (  f'  ,  \ottsym{[}  \ottnt{e'_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{e'_{\ottmv{o}}}  \ottsym{]}  ), \,  { {\gamma}_A } \, ) = \,(  f  ,  \ottsym{(}  \ottnt{v_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{v_{\ottmv{m}}}  \ottsym{)}  ) }%
}{
 \ottsym{(}  { \mathit{apply\_table} }  \ottsym{,}  X  \ottsym{,}  F_g  \ottsym{,}  F_b  \ottsym{,}  P  \ottsym{,}  { \mathit{Tb} }  \ottsym{)}  \vdash   \ottsym{(}  { {\gamma}_A }  \ottsym{,}  \overline{\gamma_G}  \ottsym{,}   [   ( { \ottsym{[}  \ottkw{apply} \, tbl  \ottsym{(}  \ottnt{e_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{e_{\ottmv{n}}}  \ottsym{)}  \ottsym{]} )}_{ \overline{\gamma} }^{ \ottnt{funn} }   ]   \ottsym{,}   { \mathbf{run} }   \ottsym{)}  \rightarrow   \ottsym{(}  { {\gamma}_A }  \ottsym{,}  \overline{\gamma_G}  \ottsym{,}   [   ( { \ottsym{[}   \ottkw{null}  \mathrel{\mathop:}=  \ottsym{(}  \ottkw{call} \, f  \ottsym{(}  \ottnt{v_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{v_{\ottmv{m}}}  \ottsym{)}  \ottsym{)}   \ottsym{]} )}_{ \overline{\gamma} }^{ \ottnt{funn} }   ]   \ottsym{,}   { \mathbf{run} }   \ottsym{)} }{%
{\ottdrulename{stmt\_apply\_table\_v}}{}%
}}


\newcommand{\ottdrulestmtXXretXXv}[1]{\ottdrule[#1]{%
}{
 \mathit{ctx}  \vdash   \ottsym{(}  { {\gamma}_A }  \ottsym{,}  \overline{\gamma_G}  \ottsym{,}   [   ( { \ottsym{[}  \ottkw{return} \, \ottnt{v}  \ottsym{]} )}_{ \overline{\gamma} }^{ \ottnt{funn} }   ]   \ottsym{,}   { \mathbf{run} }   \ottsym{)}  \rightarrow   \ottsym{(}  { {\gamma}_A }  \ottsym{,}  \overline{\gamma_G}  \ottsym{,}   [   ( { \ottsym{[}   \emptyset_{ \mathrm{stmt} }   \ottsym{]} )}_{ \overline{\gamma} }^{ \ottnt{funn} }   ]   \ottsym{,}   { \mathbf{ret} \;  \ottnt{v}  }   \ottsym{)} }{%
{\ottdrulename{stmt\_ret\_v}}{}%
}}


\newcommand{\ottdrulestmtXXext}[1]{\ottdrule[#1]{%
\ottpremise{ { \mathit{ext\_fun} }  = \mathrm{lookup\_ext\_fun} (  \ottnt{funn}  ,  X  ) }%
\ottpremise{ ( { {\gamma}_A }' , \,  \overline{\gamma}' , \,  \ottnt{v} ) =  { \mathit{ext\_fun} }  \, ( { {\gamma}_A } , \,  \overline{\gamma_G}  , \,  \overline{\gamma} ) }%
}{
 \ottsym{(}  { \mathit{apply\_table} }  \ottsym{,}  X  \ottsym{,}  F_g  \ottsym{,}  F_b  \ottsym{,}  P  \ottsym{,}  { \mathit{Tb} }  \ottsym{)}  \vdash   \ottsym{(}  { {\gamma}_A }  \ottsym{,}  \overline{\gamma_G}  \ottsym{,}   [   ( { \ottsym{[}   \blacksquare   \ottsym{]} )}_{ \overline{\gamma} }^{ \ottnt{funn} }   ]   \ottsym{,}   { \mathbf{run} }   \ottsym{)}  \rightarrow   \ottsym{(}  { {\gamma}_A }'  \ottsym{,}  \overline{\gamma_G}  \ottsym{,}   [   ( { \ottsym{[}   \emptyset_{ \mathrm{stmt} }   \ottsym{]} )}_{ \overline{\gamma}' }^{ \ottnt{funn} }   ]   \ottsym{,}   { \mathbf{ret} \;  \ottnt{v}  }   \ottsym{)} }{%
{\ottdrulename{stmt\_ext}}{}%
}}


\newcommand{\ottdrulestmtXXretXXe}[1]{\ottdrule[#1]{%
\ottpremise{ \mathit{ctx}  \,  \overline{\gamma_G}  \,  \overline{\gamma}  \vdash (  \ottnt{e}  ) \rightsquigarrow  (  \ottnt{e'}  ,  \overline{\Phi}  ) }%
}{
 \mathit{ctx}  \vdash   \ottsym{(}  { {\gamma}_A }  \ottsym{,}  \overline{\gamma_G}  \ottsym{,}   [   ( { \ottsym{[}  \ottkw{return} \, \ottnt{e}  \ottsym{]} )}_{ \overline{\gamma} }^{ \ottnt{funn} }   ]   \ottsym{,}   { \mathbf{run} }   \ottsym{)}  \rightarrow   \ottsym{(}  { {\gamma}_A }  \ottsym{,}  \overline{\gamma_G}  \ottsym{,}   \overline{\Phi}  {+}\mspace{-8mu}{+}   [   ( { \ottsym{[}  \ottkw{return} \, \ottnt{e'}  \ottsym{]} )}_{ \overline{\gamma} }^{ \ottnt{funn} }   ]    \ottsym{,}   { \mathbf{run} }   \ottsym{)} }{%
{\ottdrulename{stmt\_ret\_e}}{}%
}}


\newcommand{\ottdrulestmtXXassXXe}[1]{\ottdrule[#1]{%
\ottpremise{ \mathit{ctx}  \,  \overline{\gamma_G}  \,  \overline{\gamma}  \vdash (  \ottnt{e}  ) \rightsquigarrow  (  \ottnt{e'}  ,  \overline{\Phi}  ) }%
}{
 \mathit{ctx}  \vdash   \ottsym{(}  { {\gamma}_A }  \ottsym{,}  \overline{\gamma_G}  \ottsym{,}   [   ( { \ottsym{[}   \ottnt{lval}  \mathrel{\mathop:}=  \ottnt{e}   \ottsym{]} )}_{ \overline{\gamma} }^{ \ottnt{funn} }   ]   \ottsym{,}   { \mathbf{run} }   \ottsym{)}  \rightarrow   \ottsym{(}  { {\gamma}_A }  \ottsym{,}  \overline{\gamma_G}  \ottsym{,}   \overline{\Phi}  {+}\mspace{-8mu}{+}   [   ( { \ottsym{[}   \ottnt{lval}  \mathrel{\mathop:}=  \ottnt{e'}   \ottsym{]} )}_{ \overline{\gamma} }^{ \ottnt{funn} }   ]    \ottsym{,}   { \mathbf{run} }   \ottsym{)} }{%
{\ottdrulename{stmt\_ass\_e}}{}%
}}


\newcommand{\ottdrulestmtXXcondXXe}[1]{\ottdrule[#1]{%
\ottpremise{ \mathit{ctx}  \,  \overline{\gamma_G}  \,  \overline{\gamma}  \vdash (  \ottnt{e}  ) \rightsquigarrow  (  \ottnt{e'}  ,  \overline{\Phi}  ) }%
}{
 \mathit{ctx}  \vdash   \ottsym{(}  { {\gamma}_A }  \ottsym{,}  \overline{\gamma_G}  \ottsym{,}   [   ( { \ottsym{[}  \ottkw{if} \, \ottnt{e} \, \ottkw{then} \, \ottnt{stmt_{{\mathrm{1}}}} \, \ottkw{else} \, \ottnt{stmt_{{\mathrm{2}}}}  \ottsym{]} )}_{ \overline{\gamma} }^{ \ottnt{funn} }   ]   \ottsym{,}   { \mathbf{run} }   \ottsym{)}  \rightarrow   \ottsym{(}  { {\gamma}_A }  \ottsym{,}  \overline{\gamma_G}  \ottsym{,}   \overline{\Phi}  {+}\mspace{-8mu}{+}   [   ( { \ottsym{[}  \ottkw{if} \, \ottnt{e'} \, \ottkw{then} \, \ottnt{stmt_{{\mathrm{1}}}} \, \ottkw{else} \, \ottnt{stmt_{{\mathrm{2}}}}  \ottsym{]} )}_{ \overline{\gamma} }^{ \ottnt{funn} }   ]    \ottsym{,}   { \mathbf{run} }   \ottsym{)} }{%
{\ottdrulename{stmt\_cond\_e}}{}%
}}


\newcommand{\ottdrulestmtXXverifyXXeOne}[1]{\ottdrule[#1]{%
\ottpremise{ \mathit{ctx}  \,  \overline{\gamma_G}  \,  \overline{\gamma}  \vdash (  \ottnt{e}  ) \rightsquigarrow  (  \ottnt{e''}  ,  \overline{\Phi}  ) }%
}{
 \mathit{ctx}  \vdash   \ottsym{(}  { {\gamma}_A }  \ottsym{,}  \overline{\gamma_G}  \ottsym{,}   [   ( { \ottsym{[}  \ottkw{verify} \, \ottnt{e} \, \ottnt{e'}  \ottsym{]} )}_{ \overline{\gamma} }^{ \ottnt{funn} }   ]   \ottsym{,}   { \mathbf{run} }   \ottsym{)}  \rightarrow   \ottsym{(}  { {\gamma}_A }  \ottsym{,}  \overline{\gamma_G}  \ottsym{,}   \overline{\Phi}  {+}\mspace{-8mu}{+}   [   ( { \ottsym{[}  \ottkw{verify} \, \ottnt{e''} \, \ottnt{e'}  \ottsym{]} )}_{ \overline{\gamma} }^{ \ottnt{funn} }   ]    \ottsym{,}   { \mathbf{run} }   \ottsym{)} }{%
{\ottdrulename{stmt\_verify\_e1}}{}%
}}


\newcommand{\ottdrulestmtXXverifyXXeTwo}[1]{\ottdrule[#1]{%
\ottpremise{ \mathit{ctx}  \,  \overline{\gamma_G}  \,  \overline{\gamma}  \vdash (  \ottnt{e}  ) \rightsquigarrow  (  \ottnt{e'}  ,  \overline{\Phi}  ) }%
}{
 \mathit{ctx}  \vdash   \ottsym{(}  { {\gamma}_A }  \ottsym{,}  \overline{\gamma_G}  \ottsym{,}   [   ( { \ottsym{[}  \ottkw{verify} \, b \, \ottnt{e}  \ottsym{]} )}_{ \overline{\gamma} }^{ \ottnt{funn} }   ]   \ottsym{,}   { \mathbf{run} }   \ottsym{)}  \rightarrow   \ottsym{(}  { {\gamma}_A }  \ottsym{,}  \overline{\gamma_G}  \ottsym{,}   \overline{\Phi}  {+}\mspace{-8mu}{+}   [   ( { \ottsym{[}  \ottkw{verify} \, b \, \ottnt{e'}  \ottsym{]} )}_{ \overline{\gamma} }^{ \ottnt{funn} }   ]    \ottsym{,}   { \mathbf{run} }   \ottsym{)} }{%
{\ottdrulename{stmt\_verify\_e2}}{}%
}}


\newcommand{\ottdrulestmtXXtransXXe}[1]{\ottdrule[#1]{%
\ottpremise{ \mathit{ctx}  \,  \overline{\gamma_G}  \,  \overline{\gamma}  \vdash (  \ottnt{e}  ) \rightsquigarrow  (  \ottnt{e'}  ,  \overline{\Phi}  ) }%
}{
 \mathit{ctx}  \vdash   \ottsym{(}  { {\gamma}_A }  \ottsym{,}  \overline{\gamma_G}  \ottsym{,}   [   ( { \ottsym{[}   \mathbf{transition}\,  \ottnt{e}   \ottsym{]} )}_{ \overline{\gamma} }^{ \ottnt{funn} }   ]   \ottsym{,}   { \mathbf{run} }   \ottsym{)}  \rightarrow   \ottsym{(}  { {\gamma}_A }  \ottsym{,}  \overline{\gamma_G}  \ottsym{,}   \overline{\Phi}  {+}\mspace{-8mu}{+}   [   ( { \ottsym{[}   \mathbf{transition}\,  \ottnt{e'}   \ottsym{]} )}_{ \overline{\gamma} }^{ \ottnt{funn} }   ]    \ottsym{,}   { \mathbf{run} }   \ottsym{)} }{%
{\ottdrulename{stmt\_trans\_e}}{}%
}}


\newcommand{\ottdrulestmtXXapplyXXtableXXe}[1]{\ottdrule[#1]{%
\ottpremise{ i = \mathrm{min} \, \{ j . \neg ( \mathrm{is\_const} \,  \ottsym{[}  \ottnt{e_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{e_{\ottmv{n}}}  \ottsym{]}  [j] ) \} }%
\ottpremise{\ottnt{e}  \ottsym{=}  \ottsym{[}  \ottnt{e_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{e_{\ottmv{n}}}  \ottsym{]}  \ottsym{[}  i  \ottsym{]}}%
\ottpremise{ \mathit{ctx}  \,  \overline{\gamma_G}  \,  \overline{\gamma}  \vdash (  \ottnt{e}  ) \rightsquigarrow  (  \ottnt{e'}  ,  \overline{\Phi}  ) }%
\ottpremise{ \ottsym{[}  \ottnt{e'_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{e'_{\ottmv{n}}}  \ottsym{]}  =   ( i  \mapsto   \ottnt{e'} )  \ottsym{[}  \ottnt{e_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{e_{\ottmv{n}}}  \ottsym{]}  }%
}{
 \mathit{ctx}  \vdash   \ottsym{(}  { {\gamma}_A }  \ottsym{,}  \overline{\gamma_G}  \ottsym{,}   [   ( { \ottsym{[}  \ottkw{apply} \, tbl  \ottsym{(}  \ottnt{e_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{e_{\ottmv{n}}}  \ottsym{)}  \ottsym{]} )}_{ \overline{\gamma} }^{ \ottnt{funn} }   ]   \ottsym{,}   { \mathbf{run} }   \ottsym{)}  \rightarrow   \ottsym{(}  { {\gamma}_A }  \ottsym{,}  \overline{\gamma_G}  \ottsym{,}   \overline{\Phi}  {+}\mspace{-8mu}{+}   [   ( { \ottsym{[}  \ottkw{apply} \, tbl  \ottsym{(}  \ottnt{e'_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{e'_{\ottmv{n}}}  \ottsym{)}  \ottsym{]} )}_{ \overline{\gamma} }^{ \ottnt{funn} }   ]    \ottsym{,}   { \mathbf{run} }   \ottsym{)} }{%
{\ottdrulename{stmt\_apply\_table\_e}}{}%
}}

\newcommand{\ottdefnstmtXXred}[1]{\begin{ottdefnblock}[#1]{$ \mathit{ctx}  \vdash   s  \rightarrow   s' $}{\ottcom{stmt semantics}}
\ottusedrule{\ottdrulestmtXXassXXv{}}
\ottusedrule{\ottdrulestmtXXseqOne{}}
\ottusedrule{\ottdrulestmtXXseqTwo{}}
\ottusedrule{\ottdrulestmtXXseqThree{}}
\ottusedrule{\ottdrulestmtXXcondTwo{}}
\ottusedrule{\ottdrulestmtXXcondThree{}}
\ottusedrule{\ottdrulestmtXXblockXXenter{}}
\ottusedrule{\ottdrulestmtXXblockXXexec{}}
\ottusedrule{\ottdrulestmtXXblockXXexit{}}
\ottusedrule{\ottdrulestmtXXverifyXXThree{}}
\ottusedrule{\ottdrulestmtXXverifyXXFour{}}
\ottusedrule{\ottdrulestmtXXtrans{}}
\ottusedrule{\ottdrulestmtXXapplyXXtableXXv{}}
\ottusedrule{\ottdrulestmtXXretXXv{}}
\ottusedrule{\ottdrulestmtXXext{}}
\ottusedrule{\ottdrulestmtXXretXXe{}}
\ottusedrule{\ottdrulestmtXXassXXe{}}
\ottusedrule{\ottdrulestmtXXcondXXe{}}
\ottusedrule{\ottdrulestmtXXverifyXXeOne{}}
\ottusedrule{\ottdrulestmtXXverifyXXeTwo{}}
\ottusedrule{\ottdrulestmtXXtransXXe{}}
\ottusedrule{\ottdrulestmtXXapplyXXtableXXe{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsstmtXXsem}{
\ottdefnstmtXXred{}}

% defns frames_sem
%% defn frames_red
\newcommand{\ottdruleframesXXcompOne}[1]{\ottdrule[#1]{%
\ottpremise{ \overline{\gamma_G}'  = \mathrm{scopes\_to\_pass} ( \ottnt{funn} ,  F_g ,  F_b ,  \overline{\gamma_G} ) }%
\ottpremise{ \ottsym{(}  { \mathit{apply\_table} }  \ottsym{,}  X  \ottsym{,}  F_g  \ottsym{,}  F_b  \ottsym{,}  P  \ottsym{,}  { \mathit{Tb} }  \ottsym{)}  \vdash   \ottsym{(}  { {\gamma}_A }  \ottsym{,}  \overline{\gamma_G}'  \ottsym{,}   [   ( { \overline{ \mathit{stmt} } )}_{ \overline{\gamma} }^{ \ottnt{funn} }   ]   \ottsym{,}  t  \ottsym{)}  \rightarrow   \ottsym{(}  { {\gamma}_A }'  \ottsym{,}  \overline{\gamma_G}''  \ottsym{,}  \overline{\Phi}'  \ottsym{,}  t'  \ottsym{)} }%
\ottpremise{ \overline{\Phi}''  \neq [] \Rightarrow  t'  \neq { \mathbf{ret} \, v } }%
\ottpremise{ \overline{\gamma_G}'''  = \mathrm{scopes\_to\_retrieve} ( \ottnt{funn} ,  F_g ,  F_b ,  \overline{\gamma_G} ,  \overline{\gamma_G}'' ) }%
}{
 \ottsym{(}  { \mathit{apply\_table} }  \ottsym{,}  X  \ottsym{,}  F_g  \ottsym{,}  F_b  \ottsym{,}  P  \ottsym{,}  { \mathit{Tb} }  \ottsym{)}  \vdash   \ottsym{(}  { {\gamma}_A }  \ottsym{,}  \overline{\gamma_G}  \ottsym{,}    [   ( { \overline{ \mathit{stmt} } )}_{ \overline{\gamma} }^{ \ottnt{funn} }   ]   {+}\mspace{-8mu}{+}  \overline{\Phi}''   \ottsym{,}  t  \ottsym{)}  {\longrightarrow}_{\Phi}   \ottsym{(}  { {\gamma}_A }'  \ottsym{,}  \overline{\gamma_G}'''  \ottsym{,}   \overline{\Phi}'  {+}\mspace{-8mu}{+}  \overline{\Phi}''   \ottsym{,}  t'  \ottsym{)} }{%
{\ottdrulename{frames\_comp1}}{}%
}}


\newcommand{\ottdruleframesXXcompTwo}[1]{\ottdrule[#1]{%
\ottpremise{ \overline{\gamma_G}'  = \mathrm{scopes\_to\_pass} ( \ottnt{funn} ,  F_g ,  F_b ,  \overline{\gamma_G} ) }%
\ottpremise{ \ottsym{(}  { \mathit{apply\_table} }  \ottsym{,}  X  \ottsym{,}  F_g  \ottsym{,}  F_b  \ottsym{,}  P  \ottsym{,}  { \mathit{Tb} }  \ottsym{)}  \vdash   \ottsym{(}  { {\gamma}_A }  \ottsym{,}  \overline{\gamma_G}'  \ottsym{,}   [   ( { \overline{ \mathit{stmt} } )}_{ \overline{\gamma} }^{ \ottnt{funn} }   ]   \ottsym{,}   { \mathbf{run} }   \ottsym{)}  \rightarrow   \ottsym{(}  { {\gamma}_A }'  \ottsym{,}  \overline{\gamma_G}''  \ottsym{,}   [   ( { \overline{ \mathit{stmt} }'' )}_{ \overline{\gamma}'' }^{ \ottnt{funn} }   ]   \ottsym{,}   { \mathbf{ret} \;  \ottnt{v}  }   \ottsym{)} }%
\ottpremise{  \overline{\gamma_G}'''   =  \ottsym{(}   \overline{\gamma_G}''   \ottsym{)}  [  \ottsym{(} \, \ottkw{star} \, \ottsym{,}  \ottnt{funn}  \ottsym{)}  \longmapsto  \ottnt{v}  ] }%
\ottpremise{ ( \ottnt{stmt'''} , ((x_1, d_1), \ldots, (x_n, d_n))) = \mathrm{lookup\_funn\_sig\_body} ( x_{{\mathrm{1}}} ,  \ottsym{,} ,  d_{{\mathrm{1}}} ,  \ottsym{)} ) }%
\ottpremise{ \overline{\gamma_G}''''  = \mathrm{scopes\_to\_retrieve} ( \ottnt{funn} ,  F_g ,  F_b ,  \overline{\gamma_G} ,  \overline{\gamma_G}''' ) }%
\ottpremise{ (  \overline{\gamma_G}'''''  ,  \overline{\gamma}''' ) =  \mathrm{copyout} \, ( [x1, \, .. , \, xn] , [d1, \, .. , \, dn] , \overrightarrow{\gamma_G}'' , \overrightarrow{\gamma}' , \overrightarrow{\gamma} ) }%
}{
 \ottsym{(}  { \mathit{apply\_table} }  \ottsym{,}  X  \ottsym{,}  F_g  \ottsym{,}  F_b  \ottsym{,}  P  \ottsym{,}  { \mathit{Tb} }  \ottsym{)}  \vdash   \ottsym{(}  { {\gamma}_A }  \ottsym{,}  \overline{\gamma_G}  \ottsym{,}    [   ( { \overline{ \mathit{stmt} } )}_{ \overline{\gamma} }^{ \ottnt{funn} }   ]   {+}\mspace{-8mu}{+}     [   ( { \overline{ \mathit{stmt} }' )}_{ \overline{\gamma}' }^{ \ottnt{funn'} }   ]   {+}\mspace{-8mu}{+}  \overline{\Phi}     \ottsym{,}   { \mathbf{run} }   \ottsym{)}  {\longrightarrow}_{\Phi}   \ottsym{(}  { {\gamma}_A }'  \ottsym{,}  \overline{\gamma_G}'''''  \ottsym{,}    [   ( { \overline{ \mathit{stmt} }' )}_{ \overline{\gamma}''' }^{ \ottnt{funn'} }   ]   {+}\mspace{-8mu}{+}  \overline{\Phi}   \ottsym{,}   { \mathbf{run} }   \ottsym{)} }{%
{\ottdrulename{frames\_comp2}}{}%
}}

\newcommand{\ottdefnframesXXred}[1]{\begin{ottdefnblock}[#1]{$ \mathit{ctx}  \vdash   s  {\longrightarrow}_{\Phi}   s' $}{\ottcom{list of frames semantics}}
\ottusedrule{\ottdruleframesXXcompOne{}}
\ottusedrule{\ottdruleframesXXcompTwo{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsframesXXsem}{
\ottdefnframesXXred{}}

% defns arch_sem
%% defn arch_red
\newcommand{\ottdrulearchXXin}[1]{\ottdrule[#1]{%
\ottpremise{\ottkw{inp}  \ottsym{=}  \overline{ \mathit{ab} }  \ottsym{[}  i  \ottsym{]}}%
\ottpremise{\ottsym{(}  \overline{ \mathit{io} }''  \ottsym{,}  { {\gamma}_A }'  \ottsym{)}  \ottsym{=}  { \mathit{in}_A }  \ottsym{(}  \overline{ \mathit{io} }  \ottsym{,}  { {\gamma}_A }  \ottsym{)}}%
}{
 \ottsym{(}  \overline{ \mathit{ab} }  \ottsym{,}  B_p  \ottsym{,}  B_{ \mathrm{ff} }  \ottsym{,}  { \mathit{in}_A }  \ottsym{,}  { \mathit{out}_A }  \ottsym{,}  { \mathit{in}_p }  \ottsym{,}  { \mathit{out}_p }  \ottsym{,}  { \mathit{apply\_table} }  \ottsym{,}  X  \ottsym{,}  F_g  \ottsym{)}  \vdash  \ottsym{(}  \ottsym{(}  i  \ottsym{,}  \overline{ \mathit{io} }  \ottsym{,}  \overline{ \mathit{io} }'  \ottsym{,}  { {\gamma}_A }  \ottsym{)}  \ottsym{,}  \overline{\gamma_G}  \ottsym{,}   { [ \; ]_A }   \ottsym{,}   { \mathbf{run} }   \ottsym{)}  {\longrightarrow}_{A}  \ottsym{(}  \ottsym{(}  i  \ottsym{+}  \ottsym{1}  \ottsym{,}  \overline{ \mathit{io} }''  \ottsym{,}  \overline{ \mathit{io} }'  \ottsym{,}  { {\gamma}_A }'  \ottsym{)}  \ottsym{,}  \overline{\gamma_G}  \ottsym{,}   { [ \; ]_A }   \ottsym{,}   { \mathbf{run} }   \ottsym{)} }{%
{\ottdrulename{arch\_in}}{}%
}}


\newcommand{\ottdrulearchXXpblXXinit}[1]{\ottdrule[#1]{%
\ottpremise{\ottkw{pbl} \, f  \ottsym{(}  \ottnt{e_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{e_{\ottmv{n}}}  \ottsym{)}  \ottsym{=}  \overline{ \mathit{ab} }  \ottsym{[}  i  \ottsym{]}}%
\ottpremise{\ottnt{pbl\_type}  \ottsym{(}  \ottsym{(}  x_{{\mathrm{1}}}  \ottsym{,}  d_{{\mathrm{1}}}  \ottsym{)}  \ottsym{,} \, .. \, \ottsym{,}  \ottsym{(}  x_{\ottmv{n}}  \ottsym{,}  d_{\ottmv{n}}  \ottsym{)}  \ottsym{)}  F_b \, { \overline{ \mathit{decl} } } \, \ottnt{stmt} \, P \, { \mathit{Tb} }  \ottsym{=}  B_p  \ottsym{(}  f  \ottsym{)}}%
\ottpremise{\gamma'  \ottsym{=}  { \mathit{in}_p }  \ottsym{(}  \ottsym{(}  x_{{\mathrm{1}}}  \ottsym{,} \, .. \, \ottsym{,}  x_{\ottmv{n}}  \ottsym{)}  \ottsym{,}  \ottsym{[}  d_{{\mathrm{1}}}  \ottsym{,} \, .. \, \ottsym{,}  d_{\ottmv{n}}  \ottsym{]}  \ottsym{,}  \ottsym{[}  \ottnt{e_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{e_{\ottmv{n}}}  \ottsym{]}  \ottsym{,}  { {\gamma}_A }  \ottsym{,}  \ottnt{pbl\_type}  \ottsym{)}}%
\ottpremise{ \gamma''  = \mathrm{replicate} ( { \overline{ \mathit{decl} } } ,  \gamma' ) }%
\ottpremise{ \overline{\gamma_G}'   \ottsym{=}    \mathrm{lastn}( \ottsym{1} , \overline{\gamma_G} )  }%
\ottpremise{ \overline{\gamma_G}''   \ottsym{=}   \ottsym{[}  \gamma''  \ottsym{]}  \mathrel{\mathop+}+   \overline{\gamma_G}'  }%
\ottpremise{ \overline{\gamma_G}'''  = \mathrm{initialise\_var\_stars} ( F_g ,  F_b ,  X ,  \overline{\gamma_G}'' ) }%
}{
 \ottsym{(}  \overline{ \mathit{ab} }  \ottsym{,}  B_p  \ottsym{,}  B_{ \mathrm{ff} }  \ottsym{,}  { \mathit{in}_A }  \ottsym{,}  { \mathit{out}_A }  \ottsym{,}  { \mathit{in}_p }  \ottsym{,}  { \mathit{out}_p }  \ottsym{,}  { \mathit{apply\_table} }  \ottsym{,}  X  \ottsym{,}  F_g  \ottsym{)}  \vdash  \ottsym{(}  \ottsym{(}  i  \ottsym{,}  \overline{ \mathit{io} }  \ottsym{,}  \overline{ \mathit{io} }'  \ottsym{,}  { {\gamma}_A }  \ottsym{)}  \ottsym{,}  \overline{\gamma_G}  \ottsym{,}   { [ \; ]_A }   \ottsym{,}   { \mathbf{run} }   \ottsym{)}  {\longrightarrow}_{A}  \ottsym{(}  \ottsym{(}  i  \ottsym{,}  \overline{ \mathit{io} }  \ottsym{,}  \overline{ \mathit{io} }'  \ottsym{,}  { {\gamma}_A }  \ottsym{)}  \ottsym{,}  \overline{\gamma_G}'''  \ottsym{,}   [   ( { \ottsym{[}  \ottnt{stmt}  \ottsym{]} )}_{ \ottsym{[}   {\gamma}_{\emptyset}   \ottsym{]} }^{ f }   ]   \ottsym{,}   { \mathbf{run} }   \ottsym{)} }{%
{\ottdrulename{arch\_pbl\_init}}{}%
}}


\newcommand{\ottdrulearchXXffbl}[1]{\ottdrule[#1]{%
\ottpremise{\ottkw{ffbl} \, x  \ottsym{=}  \overline{ \mathit{ab} }  \ottsym{[}  i  \ottsym{]}}%
\ottpremise{{ \mathit{ff} }  \ottsym{=}  B_{ \mathrm{ff} }  \ottsym{(}  x  \ottsym{)}}%
\ottpremise{{ {\gamma}_A }'  \ottsym{=}  { \mathit{ff} }  \ottsym{(}  { {\gamma}_A }  \ottsym{)}}%
}{
 \ottsym{(}  \overline{ \mathit{ab} }  \ottsym{,}  B_p  \ottsym{,}  B_{ \mathrm{ff} }  \ottsym{,}  { \mathit{in}_A }  \ottsym{,}  { \mathit{out}_A }  \ottsym{,}  { \mathit{in}_p }  \ottsym{,}  { \mathit{out}_p }  \ottsym{,}  { \mathit{apply\_table} }  \ottsym{,}  X  \ottsym{,}  F_g  \ottsym{)}  \vdash  \ottsym{(}  \ottsym{(}  i  \ottsym{,}  \overline{ \mathit{io} }  \ottsym{,}  \overline{ \mathit{io} }'  \ottsym{,}  { {\gamma}_A }  \ottsym{)}  \ottsym{,}  \overline{\gamma_G}  \ottsym{,}   { [ \; ]_A }   \ottsym{,}   { \mathbf{run} }   \ottsym{)}  {\longrightarrow}_{A}  \ottsym{(}  \ottsym{(}  i  \ottsym{+}  \ottsym{1}  \ottsym{,}  \overline{ \mathit{io} }  \ottsym{,}  \overline{ \mathit{io} }'  \ottsym{,}  { {\gamma}_A }'  \ottsym{)}  \ottsym{,}  \overline{\gamma_G}  \ottsym{,}   { [ \; ]_A }   \ottsym{,}   { \mathbf{run} }   \ottsym{)} }{%
{\ottdrulename{arch\_ffbl}}{}%
}}


\newcommand{\ottdrulearchXXout}[1]{\ottdrule[#1]{%
\ottpremise{\ottkw{out}  \ottsym{=}  \overline{ \mathit{ab} }  \ottsym{[}  i  \ottsym{]}}%
\ottpremise{\ottsym{(}  \overline{ \mathit{io} }''  \ottsym{,}  { {\gamma}_A }'  \ottsym{)}  \ottsym{=}  { \mathit{out}_A }  \ottsym{(}  \overline{ \mathit{io} }'  \ottsym{,}  { {\gamma}_A }  \ottsym{)}}%
}{
 \ottsym{(}  \overline{ \mathit{ab} }  \ottsym{,}  B_p  \ottsym{,}  B_{ \mathrm{ff} }  \ottsym{,}  { \mathit{in}_A }  \ottsym{,}  { \mathit{out}_A }  \ottsym{,}  { \mathit{in}_p }  \ottsym{,}  { \mathit{out}_p }  \ottsym{,}  { \mathit{apply\_table} }  \ottsym{,}  X  \ottsym{,}  F_g  \ottsym{)}  \vdash  \ottsym{(}  \ottsym{(}  i  \ottsym{,}  \overline{ \mathit{io} }  \ottsym{,}  \overline{ \mathit{io} }'  \ottsym{,}  { {\gamma}_A }  \ottsym{)}  \ottsym{,}  \overline{\gamma_G}  \ottsym{,}   { [ \; ]_A }   \ottsym{,}   { \mathbf{run} }   \ottsym{)}  {\longrightarrow}_{A}  \ottsym{(}  \ottsym{(}  0  \ottsym{,}  \overline{ \mathit{io} }  \ottsym{,}  \overline{ \mathit{io} }''  \ottsym{,}  { {\gamma}_A }'  \ottsym{)}  \ottsym{,}  \overline{\gamma_G}  \ottsym{,}   { [ \; ]_A }   \ottsym{,}   { \mathbf{run} }   \ottsym{)} }{%
{\ottdrulename{arch\_out}}{}%
}}


\newcommand{\ottdrulearchXXparserXXtrans}[1]{\ottdrule[#1]{%
\ottpremise{\ottkw{pbl} \, x  \ottsym{(}  \ottnt{e_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{e_{\ottmv{n}}}  \ottsym{)}  \ottsym{=}  \overline{ \mathit{ab} }  \ottsym{[}  i  \ottsym{]}}%
\ottpremise{\ottkw{parser}  \ottsym{(}  \ottsym{(}  x_{{\mathrm{1}}}  \ottsym{,}  d_{{\mathrm{1}}}  \ottsym{)}  \ottsym{,} \, .. \, \ottsym{,}  \ottsym{(}  x_{\ottmv{n}}  \ottsym{,}  d_{\ottmv{n}}  \ottsym{)}  \ottsym{)}  F_b \, { \overline{ \mathit{decl} } } \, \ottnt{stmt} \, P \, { \mathit{Tb} }  \ottsym{=}  B_p  \ottsym{(}  x  \ottsym{)}}%
\ottpremise{ \mathrm{not\_final\_state}( x' ) }%
\ottpremise{\ottnt{stmt'}  \ottsym{=}  P  \ottsym{(}  x'  \ottsym{)}}%
}{
 \ottsym{(}  \overline{ \mathit{ab} }  \ottsym{,}  B_p  \ottsym{,}  B_{ \mathrm{ff} }  \ottsym{,}  { \mathit{in}_A }  \ottsym{,}  { \mathit{out}_A }  \ottsym{,}  { \mathit{in}_p }  \ottsym{,}  { \mathit{out}_p }  \ottsym{,}  { \mathit{apply\_table} }  \ottsym{,}  X  \ottsym{,}  F_g  \ottsym{)}  \vdash  \ottsym{(}  \ottsym{(}  i  \ottsym{,}  \overline{ \mathit{io} }  \ottsym{,}  \overline{ \mathit{io} }'  \ottsym{,}  { {\gamma}_A }  \ottsym{)}  \ottsym{,}  \overline{\gamma_G}  \ottsym{,}  \overline{\Phi}  \ottsym{,}   { \mathbf{tra} \;  x'  }   \ottsym{)}  {\longrightarrow}_{A}  \ottsym{(}  \ottsym{(}  i  \ottsym{,}  \overline{ \mathit{io} }  \ottsym{,}  \overline{ \mathit{io} }'  \ottsym{,}  { {\gamma}_A }  \ottsym{)}  \ottsym{,}  \overline{\gamma_G}'  \ottsym{,}   [   ( { \ottsym{[}  \ottnt{stmt'}  \ottsym{]} )}_{ \ottsym{[}   {\gamma}_{\emptyset}   \ottsym{]} }^{ x' }   ]   \ottsym{,}   { \mathbf{run} }   \ottsym{)} }{%
{\ottdrulename{arch\_parser\_trans}}{}%
}}


\newcommand{\ottdrulearchXXpblXXexec}[1]{\ottdrule[#1]{%
\ottpremise{\ottkw{pbl} \, x  \ottsym{(}  \ottnt{e_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{e_{\ottmv{n}}}  \ottsym{)}  \ottsym{=}  \overline{ \mathit{ab} }  \ottsym{[}  i  \ottsym{]}}%
\ottpremise{\ottnt{pbl\_type}  \ottsym{(}  \ottsym{(}  x_{{\mathrm{1}}}  \ottsym{,}  d_{{\mathrm{1}}}  \ottsym{)}  \ottsym{,} \, .. \, \ottsym{,}  \ottsym{(}  x_{\ottmv{n}}  \ottsym{,}  d_{\ottmv{n}}  \ottsym{)}  \ottsym{)}  F_b \, { \overline{ \mathit{decl} } } \, \ottnt{stmt} \, P \, { \mathit{Tb} }  \ottsym{=}  B_p  \ottsym{(}  x  \ottsym{)}}%
\ottpremise{ \ottsym{(}  { \mathit{apply\_table} }  \ottsym{,}  X  \ottsym{,}  F_g  \ottsym{,}  F_b  \ottsym{,}  P  \ottsym{,}  { \mathit{Tb} }  \ottsym{)}  \vdash   \ottsym{(}  { {\gamma}_A }  \ottsym{,}  \overline{\gamma_G}  \ottsym{,}  \overline{\Phi}  \ottsym{,}   { \mathbf{run} }   \ottsym{)}  {\longrightarrow}_{\Phi}   \ottsym{(}  { {\gamma}_A }'  \ottsym{,}  \overline{\gamma_G}'  \ottsym{,}  \overline{\Phi}'  \ottsym{,}  t'  \ottsym{)} }%
}{
 \ottsym{(}  \overline{ \mathit{ab} }  \ottsym{,}  B_p  \ottsym{,}  B_{ \mathrm{ff} }  \ottsym{,}  { \mathit{in}_A }  \ottsym{,}  { \mathit{out}_A }  \ottsym{,}  { \mathit{in}_p }  \ottsym{,}  { \mathit{out}_p }  \ottsym{,}  { \mathit{apply\_table} }  \ottsym{,}  X  \ottsym{,}  F_g  \ottsym{)}  \vdash  \ottsym{(}  \ottsym{(}  i  \ottsym{,}  \overline{ \mathit{io} }  \ottsym{,}  \overline{ \mathit{io} }'  \ottsym{,}  { {\gamma}_A }  \ottsym{)}  \ottsym{,}  \overline{\gamma_G}  \ottsym{,}  \overline{\Phi}  \ottsym{,}   { \mathbf{run} }   \ottsym{)}  {\longrightarrow}_{A}  \ottsym{(}  \ottsym{(}  i  \ottsym{,}  \overline{ \mathit{io} }  \ottsym{,}  \overline{ \mathit{io} }'  \ottsym{,}  { {\gamma}_A }'  \ottsym{)}  \ottsym{,}  \overline{\gamma_G}'  \ottsym{,}  \overline{\Phi}'  \ottsym{,}  t'  \ottsym{)} }{%
{\ottdrulename{arch\_pbl\_exec}}{}%
}}


\newcommand{\ottdrulearchXXpblXXret}[1]{\ottdrule[#1]{%
\ottpremise{\ottkw{pbl} \, f  \ottsym{(}  \ottnt{e_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{e_{\ottmv{n}}}  \ottsym{)}  \ottsym{=}  \overline{ \mathit{ab} }  \ottsym{[}  i  \ottsym{]}}%
\ottpremise{\ottnt{pbl\_type}  \ottsym{(}  \ottsym{(}  x_{{\mathrm{1}}}  \ottsym{,}  d_{{\mathrm{1}}}  \ottsym{)}  \ottsym{,} \, .. \, \ottsym{,}  \ottsym{(}  x_{\ottmv{n}}  \ottsym{,}  d_{\ottmv{n}}  \ottsym{)}  \ottsym{)}  F_b \, { \overline{ \mathit{decl} } } \, \ottnt{stmt} \, P \, { \mathit{Tb} }  \ottsym{=}  B_p  \ottsym{(}  f  \ottsym{)}}%
\ottpremise{ \mathrm{state\_fin}( t ,  \overline{\Phi} ) }%
\ottpremise{ t'  = \mathrm{set\_fin\_status} ( \ottnt{pbl\_type} ,  t ) }%
\ottpremise{{ {\gamma}_A }'  \ottsym{=}  { \mathit{out}_p }  \ottsym{(}   \overline{\gamma_G}   \ottsym{,}  { {\gamma}_A }  \ottsym{,}  \ottsym{[}  d_{{\mathrm{1}}}  \ottsym{,} \, .. \, \ottsym{,}  d_{\ottmv{n}}  \ottsym{]}  \ottsym{,}  \ottsym{(}  x_{{\mathrm{1}}}  \ottsym{,} \, .. \, \ottsym{,}  x_{\ottmv{n}}  \ottsym{)}  \ottsym{,}  \ottnt{pbl\_type}  \ottsym{,}  t'  \ottsym{)}}%
}{
 \ottsym{(}  \overline{ \mathit{ab} }  \ottsym{,}  B_p  \ottsym{,}  B_{ \mathrm{ff} }  \ottsym{,}  { \mathit{in}_A }  \ottsym{,}  { \mathit{out}_A }  \ottsym{,}  { \mathit{in}_p }  \ottsym{,}  { \mathit{out}_p }  \ottsym{,}  { \mathit{apply\_table} }  \ottsym{,}  X  \ottsym{,}  F_g  \ottsym{)}  \vdash  \ottsym{(}  \ottsym{(}  i  \ottsym{,}  \overline{ \mathit{io} }  \ottsym{,}  \overline{ \mathit{io} }'  \ottsym{,}  { {\gamma}_A }  \ottsym{)}  \ottsym{,}  \overline{\gamma_G}  \ottsym{,}  \overline{\Phi}  \ottsym{,}  t  \ottsym{)}  {\longrightarrow}_{A}  \ottsym{(}  \ottsym{(}  i  \ottsym{+}  \ottsym{1}  \ottsym{,}  \overline{ \mathit{io} }  \ottsym{,}  \overline{ \mathit{io} }'  \ottsym{,}  { {\gamma}_A }'  \ottsym{)}  \ottsym{,}   \mathrm{lastn}( \ottsym{1} , \overline{\gamma_G} )   \ottsym{,}   { [ \; ]_A }   \ottsym{,}   { \mathbf{run} }   \ottsym{)} }{%
{\ottdrulename{arch\_pbl\_ret}}{}%
}}

\newcommand{\ottdefnarchXXred}[1]{\begin{ottdefnblock}[#1]{$ { \mathit{ctx}_A }  \vdash  { \ensuremath{s_A} }  {\longrightarrow}_{A}  { \ensuremath{s_A} }' $}{\ottcom{architecture-level semantics}}
\ottusedrule{\ottdrulearchXXin{}}
\ottusedrule{\ottdrulearchXXpblXXinit{}}
\ottusedrule{\ottdrulearchXXffbl{}}
\ottusedrule{\ottdrulearchXXout{}}
\ottusedrule{\ottdrulearchXXparserXXtrans{}}
\ottusedrule{\ottdrulearchXXpblXXexec{}}
\ottusedrule{\ottdrulearchXXpblXXret{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsarchXXsem}{
\ottdefnarchXXred{}}

% defns v_typ
%% defn v_typ
\newcommand{\ottdrulevXXbool}[1]{\ottdrule[#1]{%
}{
 \ottnt{boolv}  : (  \ottkw{bool}  ,   { \bot }   ) }{%
{\ottdrulename{v\_bool}}{}%
}}


\newcommand{\ottdrulevXXbit}[1]{\ottdrule[#1]{%
\ottpremise{ w  = width \  \ottnt{bitv} }%
}{
 \ottnt{bitv}  : (   { { \mathbf{bs} }^{ w } }   ,   { \bot }   ) }{%
{\ottdrulename{v\_bit}}{}%
}}


\newcommand{\ottdrulevXXbot}[1]{\ottdrule[#1]{%
}{
 \ottkw{bot}  : (   \bot   ,   { \bot }   ) }{%
{\ottdrulename{v\_bot}}{}%
}}


\newcommand{\ottdrulevXXx}[1]{\ottdrule[#1]{%
\ottpremise{\ottkw{MEM} \, x \, \ottsym{[}  x_{{\mathrm{1}}}  \ottsym{,} \, .. \, \ottsym{,}  x_{\ottmv{n}}  \ottsym{]}}%
}{
 x  : (  \ottsym{[}  x_{{\mathrm{1}}}  \ottsym{,} \, .. \, \ottsym{,}  x_{\ottmv{n}}  \ottsym{]}  ,   { \bot }   ) }{%
{\ottdrulename{v\_x}}{}%
}}


\newcommand{\ottdrulevXXerr}[1]{\ottdrule[#1]{%
\ottpremise{ x  : (  \ottsym{[}  x  \ottsym{]}  ,   { \bot }   ) }%
}{
 \ottkw{errmsg} \, x  : (  \ottkw{err}  ,   { \bot }   ) }{%
{\ottdrulename{v\_err}}{}%
}}


\newcommand{\ottdrulevXXstruct}[1]{\ottdrule[#1]{%
\ottpremise{ \ottnt{v_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{v_{\ottmv{n}}}  : (  \ottsym{[}  \tau_{{\mathrm{1}}}  \ottsym{,} \, .. \, \ottsym{,}  \tau_{\ottmv{n}}  \ottsym{]}  , F ) }%
}{
 \ottkw{struct} \, \ottsym{\{}  x_{{\mathrm{1}}}  \ottsym{=}  \ottnt{v_{{\mathrm{1}}}}  \ottsym{;} \, .. \, \ottsym{;}  x_{\ottmv{n}}  \ottsym{=}  \ottnt{v_{\ottmv{n}}}  \ottsym{\}}  : (  \ottkw{struct}  \ottsym{[}  x_{{\mathrm{1}}} \, \tau_{{\mathrm{1}}}  \ottsym{,} \, .. \, \ottsym{,}  x_{\ottmv{n}} \, \tau_{\ottmv{n}}  \ottsym{]}  ,   { \bot }   ) }{%
{\ottdrulename{v\_struct}}{}%
}}


\newcommand{\ottdrulevXXheader}[1]{\ottdrule[#1]{%
\ottpremise{ \ottnt{boolv}  : (  \ottkw{bool}  ,   { \bot }   ) }%
\ottpremise{ \ottnt{v_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{v_{\ottmv{n}}}  : (  \ottsym{[}  \tau_{{\mathrm{1}}}  \ottsym{,} \, .. \, \ottsym{,}  \tau_{\ottmv{n}}  \ottsym{]}  , F ) }%
}{
 \ottkw{header} \, \ottnt{boolv}  \ottsym{\{}  x_{{\mathrm{1}}}  \ottsym{=}  \ottnt{v_{{\mathrm{1}}}}  \ottsym{;} \, .. \, \ottsym{;}  x_{\ottmv{n}}  \ottsym{=}  \ottnt{v_{\ottmv{n}}}  \ottsym{\}}  : (  \ottkw{header}  \ottsym{[}  x_{{\mathrm{1}}} \, \tau_{{\mathrm{1}}}  \ottsym{,} \, .. \, \ottsym{,}  x_{\ottmv{n}} \, \tau_{\ottmv{n}}  \ottsym{]}  ,   { \bot }   ) }{%
{\ottdrulename{v\_header}}{}%
}}

\newcommand{\ottdefnvXXtyp}[1]{\begin{ottdefnblock}[#1]{$ \ottnt{v}  : (  \tau  ,  \ottnt{boolv}  ) $}{\ottcom{values types}}
\ottusedrule{\ottdrulevXXbool{}}
\ottusedrule{\ottdrulevXXbit{}}
\ottusedrule{\ottdrulevXXbot{}}
\ottusedrule{\ottdrulevXXx{}}
\ottusedrule{\ottdrulevXXerr{}}
\ottusedrule{\ottdrulevXXstruct{}}
\ottusedrule{\ottdrulevXXheader{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsvXXtyp}{
\ottdefnvXXtyp{}}

% defns e_typ
%% defn e_typ
\newcommand{\ottdruleeXXv}[1]{\ottdrule[#1]{%
\ottpremise{ \ottnt{v}  : (  \tau  ,  b  ) }%
}{
 \psi_t   T_e  \vdash  \ottnt{v}  : (  \tau  ,  b  ) }{%
{\ottdrulename{e\_v}}{}%
}}


\newcommand{\ottdruleeXXvar}[1]{\ottdrule[#1]{%
\ottpremise{ \tau  = \mathrm{topmost} ( \overrightarrow{\psi}  ,  \overrightarrow{\psi_G}  ,  \ottnt{varn} ) }%
}{
  ( \overrightarrow{\psi_G}  ,  \overrightarrow{\psi} )    T_e  \vdash  \ottkw{var} \, \ottnt{varn}  : (  \tau  ,   { \top }   ) }{%
{\ottdrulename{e\_var}}{}%
}}


\newcommand{\ottdruleeXXstar}[1]{\ottdrule[#1]{%
\ottpremise{\ottsym{[}  \tau_{{\mathrm{1}}} \, d_{{\mathrm{1}}}  \ottsym{,} \, .. \, \ottsym{,}  \tau_{\ottmv{n}} \, d_{\ottmv{n}}  \ottsym{]}  \tau  \ottsym{=} \, \ottkw{t\_lookup\_funn} \, \ottsym{(}  \Delta_{glb}  \ottsym{,}  \Delta_{blk}  \ottsym{,}  \ottnt{funn}  \ottsym{)}}%
\ottpremise{ \tau  = \mathrm{find_star_in_globals} ( \overrightarrow{\psi_G} ,  \ottsym{(} \, \ottkw{star} \, \ottsym{,}  \ottnt{funn'}  \ottsym{)} ) }%
}{
  ( \overrightarrow{\psi_G}  ,  \overrightarrow{\psi} )    \ottsym{(}  \sqsubset  \ottsym{,}  \ottnt{funn}  \ottsym{,}  \ottsym{(}  \Delta_{glb}  \ottsym{,}  \Delta_{blk}  \ottsym{,}  \Delta_{tbl}  \ottsym{)}  \ottsym{)}  \vdash  \ottkw{var} \, \ottsym{(} \, \ottkw{star} \, \ottsym{,}  \ottnt{funn'}  \ottsym{)}  : (  \tau  ,   { \top }   ) }{%
{\ottdrulename{e\_star}}{}%
}}


\newcommand{\ottdruleeXXstruct}[1]{\ottdrule[#1]{%
\ottpremise{\psi_t \, T_e  \ottsym{\mbox{$\mid$}-}  \ottsym{(}  \ottnt{e_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{e_{\ottmv{n}}}  \ottsym{)}  \ottsym{:}  \ottsym{(}  \ottsym{[}  \tau_{{\mathrm{1}}}  \ottsym{,} \, .. \, \ottsym{,}  \tau_{\ottmv{n}}  \ottsym{]}  \ottsym{,} \, \ottkw{false} \, \ottsym{)}}%
}{
 \psi_t   T_e  \vdash  \ottkw{eStruct} \, \ottsym{\{}  f_{{\mathrm{1}}}  \ottsym{=}  \ottnt{e_{{\mathrm{1}}}}  \ottsym{;} \, .. \, \ottsym{;}  f_{\ottmv{n}}  \ottsym{=}  \ottnt{e_{\ottmv{n}}}  \ottsym{\}}  : (  \ottkw{struct}  \ottsym{[}  f_{{\mathrm{1}}} \, \tau_{{\mathrm{1}}}  \ottsym{,} \, .. \, \ottsym{,}  f_{\ottmv{n}} \, \tau_{\ottmv{n}}  \ottsym{]}  ,   { \bot }   ) }{%
{\ottdrulename{e\_struct}}{}%
}}


\newcommand{\ottdruleeXXheader}[1]{\ottdrule[#1]{%
\ottpremise{\psi_t \, T_e  \ottsym{\mbox{$\mid$}-}  \ottsym{(}  \ottnt{e_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{e_{\ottmv{n}}}  \ottsym{)}  \ottsym{:}  \ottsym{(}  \ottsym{[}  \tau_{{\mathrm{1}}}  \ottsym{,} \, .. \, \ottsym{,}  \tau_{\ottmv{n}}  \ottsym{]}  \ottsym{,} \, \ottkw{false} \, \ottsym{)}}%
}{
 \psi_t   T_e  \vdash  \ottkw{eHeader} \, \ottnt{boolv}  \ottsym{\{}  f_{{\mathrm{1}}}  \ottsym{=}  \ottnt{e_{{\mathrm{1}}}}  \ottsym{;} \, .. \, \ottsym{;}  f_{\ottmv{n}}  \ottsym{=}  \ottnt{e_{\ottmv{n}}}  \ottsym{\}}  : (  \ottkw{header}  \ottsym{[}  f_{{\mathrm{1}}} \, \tau_{{\mathrm{1}}}  \ottsym{,} \, .. \, \ottsym{,}  f_{\ottmv{n}} \, \tau_{\ottmv{n}}  \ottsym{]}  ,   { \bot }   ) }{%
{\ottdrulename{e\_header}}{}%
}}


\newcommand{\ottdruleeXXnotXXneg}[1]{\ottdrule[#1]{%
\ottpremise{ \ominus  \neq \mathit{!} }%
\ottpremise{ \psi_t   T_e  \vdash  \ottnt{e}  : (   { { \mathbf{bs} }^{ w } }   ,  b  ) }%
}{
 \psi_t   T_e  \vdash   \ominus   \ottnt{e}   : (   { { \mathbf{bs} }^{ w } }   ,   { \bot }   ) }{%
{\ottdrulename{e\_not\_neg}}{}%
}}


\newcommand{\ottdruleeXXisXXneg}[1]{\ottdrule[#1]{%
\ottpremise{ \ominus  \eq \mathit{!} }%
\ottpremise{ \psi_t   T_e  \vdash  \ottnt{e}  : (  \ottkw{bool}  ,  b  ) }%
}{
 \psi_t   T_e  \vdash   \ominus   \ottnt{e}   : (  \ottkw{bool}  ,   { \bot }   ) }{%
{\ottdrulename{e\_is\_neg}}{}%
}}


\newcommand{\ottdruleeXXacc}[1]{\ottdrule[#1]{%
\ottpremise{ \psi_t   T_e  \vdash  \ottnt{e}  : (  \ottnt{struct\_ty}  \ottsym{[}  x_{{\mathrm{1}}} \, \tau_{{\mathrm{1}}}  \ottsym{,} \, .. \, \ottsym{,}  x_{\ottmv{n}} \, \tau_{\ottmv{n}}  \ottsym{]}  ,  b  ) }%
\ottpremise{\ottkw{correct\_field\_type} \, \ottsym{(}  \ottsym{[}  x_{{\mathrm{1}}} \, \tau_{{\mathrm{1}}}  \ottsym{,} \, .. \, \ottsym{,}  x_{\ottmv{n}} \, \tau_{\ottmv{n}}  \ottsym{]}  \ottsym{,}  x  \ottsym{,}  \tau  \ottsym{)}}%
}{
 \psi_t   T_e  \vdash  \ottnt{e}  \ottsym{.}  x  : (  \tau  ,  b  ) }{%
{\ottdrulename{e\_acc}}{}%
}}


\newcommand{\ottdruleeXXconcat}[1]{\ottdrule[#1]{%
\ottpremise{ \psi_t   T_e  \vdash  \ottnt{e}  : (   { { \mathbf{bs} }^{ w_{{\mathrm{1}}} } }   ,  b  ) }%
\ottpremise{ \psi_t   T_e  \vdash  \ottnt{e'}  : (   { { \mathbf{bs} }^{ w_{{\mathrm{2}}} } }   ,  b'  ) }%
}{
 \psi_t   T_e  \vdash  \ottkw{concat} \, \ottnt{e} \, \ottnt{e'}  : (   { { \mathbf{bs} }^{ \ottsym{(}  w_{{\mathrm{1}}}  \ottsym{+}  w_{{\mathrm{2}}}  \ottsym{)} } }   ,   { \bot }   ) }{%
{\ottdrulename{e\_concat}}{}%
}}


\newcommand{\ottdruleeXXslice}[1]{\ottdrule[#1]{%
\ottpremise{w_{{\mathrm{1}}}  \ottsym{=} \, \ottkw{vec\_to\_const} \, \ottnt{bitv}}%
\ottpremise{w_{{\mathrm{2}}}  \ottsym{=} \, \ottkw{vec\_to\_const} \, \ottnt{bitv'}}%
\ottpremise{ \psi_t   T_e  \vdash  \ottnt{e}  : (   { { \mathbf{bs} }^{ w } }   ,   { \top }   ) }%
\ottpremise{\ottkw{bits\_length\_check} \, \ottsym{(}  w  \ottsym{,}  w_{{\mathrm{1}}}  \ottsym{,}  w_{{\mathrm{2}}}  \ottsym{)}}%
}{
 \psi_t   T_e  \vdash  \ottnt{e}  \ottsym{[}  \ottnt{bitv}  \ottsym{:}  \ottnt{bitv'}  \ottsym{]}  : (   { { \mathbf{bs} }^{ \ottsym{(}  \ottsym{(}  w_{{\mathrm{1}}}  \ottsym{-}  w_{{\mathrm{2}}}  \ottsym{)}  \ottsym{+}  \ottsym{1}  \ottsym{)} } }   ,   { \top }   ) }{%
{\ottdrulename{e\_slice}}{}%
}}


\newcommand{\ottdruleeXXselect}[1]{\ottdrule[#1]{%
\ottpremise{ \psi_t   T_e  \vdash  \ottnt{e}  : (  \tau  ,   { \bot }   ) }%
\ottpremise{\ottsym{(}  \ottnt{v_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{v_{\ottmv{n}}}  \ottsym{)}  \ottsym{:}  \ottsym{(}  \tau  \ottsym{,} \, \ottkw{false} \, \ottsym{)}}%
}{
 \psi_t   T_e  \vdash  \ottkw{select} \, \ottnt{e}  \ottsym{\{}  \ottnt{v_{{\mathrm{1}}}}  \ottsym{:}  x_{{\mathrm{1}}}  \ottsym{;} \, .. \, \ottsym{;}  \ottnt{v_{\ottmv{n}}}  \ottsym{:}  x_{\ottmv{n}}  \ottsym{\}}  x  : (  \ottsym{[}  x_{{\mathrm{1}}}  \ottsym{,} \, .. \, \ottsym{,}  x_{\ottmv{n}}  \ottsym{]}  \ottsym{++}  \ottsym{[}  x  \ottsym{]}  ,   { \bot }   ) }{%
{\ottdrulename{e\_select}}{}%
}}


\newcommand{\ottdruleeXXcall}[1]{\ottdrule[#1]{%
\ottpremise{\ottsym{[}  \tau_{{\mathrm{1}}} \, d_{{\mathrm{1}}}  \ottsym{,} \, .. \, \ottsym{,}  \tau_{\ottmv{n}} \, d_{\ottmv{n}}  \ottsym{]}  \tau  \ottsym{=} \, \ottkw{t\_lookup\_funn} \, \ottsym{(}  \Delta_{glb}  \ottsym{,}  \Delta_{blk}  \ottsym{,}  \ottnt{funn'}  \ottsym{)}}%
\ottpremise{\psi_t \, \ottsym{(}  \sqsubset  \ottsym{,}  \ottnt{funn}  \ottsym{,}  \ottsym{(}  \Delta_{glb}  \ottsym{,}  \Delta_{blk}  \ottsym{,}  \Delta_{tbl}  \ottsym{)}  \ottsym{)}  \ottsym{\mbox{$\mid$}-}  \ottsym{(}  \ottnt{e_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{e_{\ottmv{n}}}  \ottsym{)}  \ottsym{:}  \ottsym{(}  \ottsym{[}  \tau_{{\mathrm{1}}}  \ottsym{,} \, .. \, \ottsym{,}  \tau_{\ottmv{n}}  \ottsym{]}  \ottsym{,}  \ottsym{[}  b_{{\mathrm{1}}}  \ottsym{,} \, .. \, \ottsym{,}  b_{\ottmv{n}}  \ottsym{]}  \ottsym{)}}%
\ottpremise{\ottkw{out\_is\_lval} \, \ottsym{[}  d_{{\mathrm{1}}}  \ottsym{,} \, .. \, \ottsym{,}  d_{\ottmv{n}}  \ottsym{]}  \ottsym{[}  b_{{\mathrm{1}}}  \ottsym{,} \, .. \, \ottsym{,}  b_{\ottmv{n}}  \ottsym{]}}%
\ottpremise{\ottkw{ordered} \, \ottnt{funn'} \, \ottnt{funn} \, \sqsubset}%
}{
 \psi_t   \ottsym{(}  \sqsubset  \ottsym{,}  \ottnt{funn}  \ottsym{,}  \ottsym{(}  \Delta_{glb}  \ottsym{,}  \Delta_{blk}  \ottsym{,}  \Delta_{tbl}  \ottsym{)}  \ottsym{)}  \vdash  \ottkw{call} \, \ottnt{funn'}  \ottsym{(}  \ottnt{e_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{e_{\ottmv{n}}}  \ottsym{)}  : (  \tau  ,   { \bot }   ) }{%
{\ottdrulename{e\_call}}{}%
}}


\newcommand{\ottdruleeXXbinopXXbv}[1]{\ottdrule[#1]{%
\ottpremise{ \psi_t   T_e  \vdash  \ottnt{e}  : (   { { \mathbf{bs} }^{ w } }   ,  b  ) }%
\ottpremise{ \psi_t   T_e  \vdash  \ottnt{e'}  : (   { { \mathbf{bs} }^{ w } }   ,  b'  ) }%
\ottpremise{\ottkw{is\_bv\_op} \, \oplus}%
}{
 \psi_t   T_e  \vdash   \ottnt{e}   \oplus   \ottnt{e'}   : (   { { \mathbf{bs} }^{ w } }   ,   { \bot }   ) }{%
{\ottdrulename{e\_binop\_bv}}{}%
}}


\newcommand{\ottdruleeXXbinopXXbool}[1]{\ottdrule[#1]{%
\ottpremise{ \psi_t   T_e  \vdash  \ottnt{e}  : (  \ottkw{bool}  ,  b  ) }%
\ottpremise{ \psi_t   T_e  \vdash  \ottnt{e'}  : (  \ottkw{bool}  ,  b'  ) }%
\ottpremise{\ottkw{is\_bool\_op} \, \oplus}%
}{
 \psi_t   T_e  \vdash   \ottnt{e}   \oplus   \ottnt{e'}   : (  \ottkw{bool}  ,   { \bot }   ) }{%
{\ottdrulename{e\_binop\_bool}}{}%
}}


\newcommand{\ottdruleeXXbinopXXbvXXbool}[1]{\ottdrule[#1]{%
\ottpremise{ \psi_t   T_e  \vdash  \ottnt{e}  : (   { { \mathbf{bs} }^{ w } }   ,  b  ) }%
\ottpremise{ \psi_t   T_e  \vdash  \ottnt{e'}  : (   { { \mathbf{bs} }^{ w } }   ,  b'  ) }%
\ottpremise{\ottkw{is\_bv\_bool\_op} \, \oplus}%
}{
 \psi_t   T_e  \vdash   \ottnt{e}   \oplus   \ottnt{e'}   : (  \ottkw{bool}  ,   { \bot }   ) }{%
{\ottdrulename{e\_binop\_bv\_bool}}{}%
}}

\newcommand{\ottdefneXXtyp}[1]{\begin{ottdefnblock}[#1]{$ \psi_t   T_e  \vdash  \ottnt{e}  : (  \tau  ,  \ottnt{boolv}  ) $}{\ottcom{expression types}}
\ottusedrule{\ottdruleeXXv{}}
\ottusedrule{\ottdruleeXXvar{}}
\ottusedrule{\ottdruleeXXstar{}}
\ottusedrule{\ottdruleeXXstruct{}}
\ottusedrule{\ottdruleeXXheader{}}
\ottusedrule{\ottdruleeXXnotXXneg{}}
\ottusedrule{\ottdruleeXXisXXneg{}}
\ottusedrule{\ottdruleeXXacc{}}
\ottusedrule{\ottdruleeXXconcat{}}
\ottusedrule{\ottdruleeXXslice{}}
\ottusedrule{\ottdruleeXXselect{}}
\ottusedrule{\ottdruleeXXcall{}}
\ottusedrule{\ottdruleeXXbinopXXbv{}}
\ottusedrule{\ottdruleeXXbinopXXbool{}}
\ottusedrule{\ottdruleeXXbinopXXbvXXbool{}}
\end{ottdefnblock}}


\newcommand{\ottdefnseXXtyp}{
\ottdefneXXtyp{}}

% defns stmt_typ
%% defn stmt_typ
\newcommand{\ottdrulestmtXXempty}[1]{\ottdrule[#1]{%
}{
 \psi_t   T_e   Prs_n  |-   \emptyset_{ \mathrm{stmt} }  }{%
{\ottdrulename{stmt\_empty}}{}%
}}


\newcommand{\ottdrulestmtXXassign}[1]{\ottdrule[#1]{%
\ottpremise{ \psi_t   T_e  \vdash  \ottkw{var} \, \ottnt{varn}  : (  \tau  ,   { \top }   ) }%
\ottpremise{ \psi_t   T_e  \vdash  \ottnt{e}  : (  \tau  ,  b  ) }%
}{
 \psi_t   T_e   Prs_n  |-   \ottnt{varn}  \mathrel{\mathop:}=  \ottnt{e}  }{%
{\ottdrulename{stmt\_assign}}{}%
}}


\newcommand{\ottdrulestmtXXassignXXnull}[1]{\ottdrule[#1]{%
\ottpremise{ \psi_t   T_e  \vdash  \ottnt{e}  : (  \tau  ,  b  ) }%
}{
 \psi_t   T_e   Prs_n  |-   \ottkw{null}  \mathrel{\mathop:}=  \ottnt{e}  }{%
{\ottdrulename{stmt\_assign\_null}}{}%
}}


\newcommand{\ottdrulestmtXXif}[1]{\ottdrule[#1]{%
\ottpremise{ \psi_t   T_e  \vdash  \ottnt{e}  : (  \ottkw{bool}  ,  b  ) }%
\ottpremise{ \psi_t   T_e   Prs_n  |-  \ottnt{stmt_{{\mathrm{1}}}} }%
\ottpremise{ \psi_t   T_e   Prs_n  |-  \ottnt{stmt_{{\mathrm{2}}}} }%
}{
 \psi_t   T_e   Prs_n  |-  \ottkw{if} \, \ottnt{e} \, \ottkw{then} \, \ottnt{stmt_{{\mathrm{1}}}} \, \ottkw{else} \, \ottnt{stmt_{{\mathrm{2}}}} }{%
{\ottdrulename{stmt\_if}}{}%
}}


\newcommand{\ottdrulestmtXXdecl}[1]{\ottdrule[#1]{%
\ottpremise{\psi  \ottsym{=} \, \ottkw{replicate\_types} \, { \overline{ \mathit{decl} } }}%
\ottpremise{  ( \overrightarrow{\psi_G}  ,  \ottsym{[}  \psi  \ottsym{]}  \ottsym{++}  \overrightarrow{\psi} )    T_e   Prs_n  |-  \ottnt{stmt} }%
}{
  ( \overrightarrow{\psi_G}  ,  \overrightarrow{\psi} )    T_e   Prs_n  |-   \{  { \overline{ \mathit{decl} } }  \,  \ottnt{stmt}  \}  }{%
{\ottdrulename{stmt\_decl}}{}%
}}


\newcommand{\ottdrulestmtXXseq}[1]{\ottdrule[#1]{%
\ottpremise{ \psi_t   T_e   Prs_n  |-  \ottnt{stmt_{{\mathrm{1}}}} }%
\ottpremise{ \psi_t   T_e   Prs_n  |-  \ottnt{stmt_{{\mathrm{2}}}} }%
}{
 \psi_t   T_e   Prs_n  |-  \ottnt{stmt_{{\mathrm{1}}}}  \ottsym{;}  \ottnt{stmt_{{\mathrm{2}}}} }{%
{\ottdrulename{stmt\_seq}}{}%
}}


\newcommand{\ottdrulestmtXXverify}[1]{\ottdrule[#1]{%
\ottpremise{ \psi_t   T_e  \vdash  \ottnt{e}  : (  \ottkw{bool}  ,  b  ) }%
\ottpremise{ \psi_t   T_e  \vdash  \ottnt{e'}  : (  \ottsym{[}  x_{{\mathrm{1}}}  \ottsym{,} \, .. \, \ottsym{,}  x_{\ottmv{n}}  \ottsym{]}  ,  b'  ) }%
}{
 \psi_t   T_e   Prs_n  |-  \ottkw{verify} \, \ottnt{e} \, \ottnt{e'} }{%
{\ottdrulename{stmt\_verify}}{}%
}}


\newcommand{\ottdrulestmtXXtransition}[1]{\ottdrule[#1]{%
\ottpremise{ \psi_t   T_e  \vdash  \ottnt{e}  : (  \ottsym{[}  x_{{\mathrm{1}}}  \ottsym{,} \, .. \, \ottsym{,}  x_{\ottmv{n}}  \ottsym{]}  ,  b  ) }%
\ottpremise{\ottkw{literials\_in\_P\_state} \, \ottsym{[}  x_{{\mathrm{1}}}  \ottsym{,} \, .. \, \ottsym{,}  x_{\ottmv{n}}  \ottsym{]}  \ottsym{(}  Prs_n  \ottsym{++}  \ottsym{[}  \ottsym{"accept"}  \ottsym{;}  \ottsym{"reject"}  \ottsym{]}  \ottsym{)}}%
}{
 \psi_t   T_e   Prs_n  |-   \mathbf{transition}\,  \ottnt{e}  }{%
{\ottdrulename{stmt\_transition}}{}%
}}


\newcommand{\ottdrulestmtXXreturn}[1]{\ottdrule[#1]{%
\ottpremise{\ottsym{[}  \tau_{{\mathrm{1}}} \, d_{{\mathrm{1}}}  \ottsym{,} \, .. \, \ottsym{,}  \tau_{\ottmv{n}} \, d_{\ottmv{n}}  \ottsym{]}  \tau  \ottsym{=} \, \ottkw{t\_lookup\_funn} \, \ottsym{(}  \Delta_{glb}  \ottsym{,}  \Delta_{blk}  \ottsym{,}  \ottnt{funn}  \ottsym{)}}%
\ottpremise{ \psi_t   \ottsym{(}  \sqsubset  \ottsym{,}  \ottnt{funn}  \ottsym{,}  \ottsym{(}  \Delta_{glb}  \ottsym{,}  \Delta_{blk}  \ottsym{,}  \Delta_{tbl}  \ottsym{)}  \ottsym{)}  \vdash  \ottnt{e}  : (  \tau  ,  b  ) }%
}{
 \psi_t   \ottsym{(}  \sqsubset  \ottsym{,}  \ottnt{funn}  \ottsym{,}  \ottsym{(}  \Delta_{glb}  \ottsym{,}  \Delta_{blk}  \ottsym{,}  \Delta_{tbl}  \ottsym{)}  \ottsym{)}   Prs_n  |-  \ottkw{return} \, \ottnt{e} }{%
{\ottdrulename{stmt\_return}}{}%
}}


\newcommand{\ottdrulestmtXXapply}[1]{\ottdrule[#1]{%
\ottpremise{\Delta_{tbl}  \ottsym{(}  tbl  \ottsym{)}  \ottsym{=}  \ottsym{[}  \tau_{{\mathrm{1}}}  \ottsym{,} \, .. \, \ottsym{,}  \tau_{\ottmv{n}}  \ottsym{]}}%
\ottpremise{\psi_t \, \ottsym{(}  \sqsubset  \ottsym{,}  \ottnt{funn}  \ottsym{,}  \ottsym{(}  \Delta_{glb}  \ottsym{,}  \Delta_{blk}  \ottsym{,}  \Delta_{tbl}  \ottsym{)}  \ottsym{)}  \ottsym{\mbox{$\mid$}-}  \ottsym{(}  \ottnt{e_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{e_{\ottmv{n}}}  \ottsym{)}  \ottsym{:}  \ottsym{(}  \ottsym{[}  \tau_{{\mathrm{1}}}  \ottsym{,} \, .. \, \ottsym{,}  \tau_{\ottmv{n}}  \ottsym{]}  \ottsym{,}  \ottsym{[}  b_{{\mathrm{1}}}  \ottsym{,} \, .. \, \ottsym{,}  b_{\ottmv{n}}  \ottsym{]}  \ottsym{)}}%
}{
 \psi_t   \ottsym{(}  \sqsubset  \ottsym{,}  \ottnt{funn}  \ottsym{,}  \ottsym{(}  \Delta_{glb}  \ottsym{,}  \Delta_{blk}  \ottsym{,}  \Delta_{tbl}  \ottsym{)}  \ottsym{)}   Prs_n  |-  \ottkw{apply} \, tbl  \ottsym{(}  \ottnt{e_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{e_{\ottmv{n}}}  \ottsym{)} }{%
{\ottdrulename{stmt\_apply}}{}%
}}

\newcommand{\ottdefnstmtXXtyp}[1]{\begin{ottdefnblock}[#1]{$ \psi_t   T_e   Prs_n  |-  \ottnt{stmt} $}{\ottcom{expression types}}
\ottusedrule{\ottdrulestmtXXempty{}}
\ottusedrule{\ottdrulestmtXXassign{}}
\ottusedrule{\ottdrulestmtXXassignXXnull{}}
\ottusedrule{\ottdrulestmtXXif{}}
\ottusedrule{\ottdrulestmtXXdecl{}}
\ottusedrule{\ottdrulestmtXXseq{}}
\ottusedrule{\ottdrulestmtXXverify{}}
\ottusedrule{\ottdrulestmtXXtransition{}}
\ottusedrule{\ottdrulestmtXXreturn{}}
\ottusedrule{\ottdrulestmtXXapply{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsstmtXXtyp}{
\ottdefnstmtXXtyp{}}

% defns WT_f
%% defn WT_f
\newcommand{\ottdruleWTXXfXXglobal}[1]{\ottdrule[#1]{%
\ottpremise{\ottkw{WF\_o} \, \sqsubset}%
}{
 F_g   \sqsubset   \overrightarrow{\psi_G}   \Delta_{glb} }{%
{\ottdrulename{WT\_f\_global}}{}%
}}

\newcommand{\ottdefnWTXXf}[1]{\begin{ottdefnblock}[#1]{$ F_g   \sqsubset   \overrightarrow{\psi_G}   \Delta_{glb} $}{\ottcom{values types}}
\ottusedrule{\ottdruleWTXXfXXglobal{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsWTXXf}{
\ottdefnWTXXf{}}

% defns WT_c
%% defn WT_c
\newcommand{\ottdruleWTXXcXXc}[1]{\ottdrule[#1]{%
\ottpremise{\ottkw{WF\_o} \, \sqsubset}%
}{
 \ottsym{(}  { \mathit{apply\_table} }  \ottsym{,}  X  \ottsym{,}  F_g  \ottsym{,}  F_b  \ottsym{,}  P  \ottsym{,}  { \mathit{Tb} }  \ottsym{)}   \sqsubset   \overrightarrow{\psi_G}   \Delta_{glb}   \Delta_{blk} }{%
{\ottdrulename{WT\_c\_c}}{}%
}}

\newcommand{\ottdefnWTXXc}[1]{\begin{ottdefnblock}[#1]{$ \mathit{ctx}   \sqsubset   \overrightarrow{\psi_G}   \Delta_{glb}   \Delta_{blk} $}{\ottcom{values types}}
\ottusedrule{\ottdruleWTXXcXXc{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsWTXXc}{
\ottdefnWTXXc{}}

\newcommand{\ottdefnss}{
\ottdefnseXXsem
\ottdefnsstmtXXsem
\ottdefnsframesXXsem
\ottdefnsarchXXsem
\ottdefnsvXXtyp
\ottdefnseXXtyp
\ottdefnsstmtXXtyp
\ottdefnsWTXXf
\ottdefnsWTXXc
}

\newcommand{\ottall}{\ottmetavars\\[0pt]
\ottgrammar\\[5.0mm]
\ottdefnss}

