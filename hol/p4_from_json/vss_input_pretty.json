["program",
 [
  ["Error",{"members":["NoError","PacketTooShort","NoMatch","StackOutOfBounds","HeaderTooShort","ParserTimeout","ParserInvalidArgument"]}],
  ["ExternObject",{"annotations":[],"name":"packet_in","type_params":[],"methods":[["Method",{"annotations":[],"return":["void"],"name":"extract","type_params":["T"],"params":[{"annotations":[],"direction":["Out"],"typ":["name",["BareName","T"]],"variable":"hdr","opt_value":null}]}],["Method",{"annotations":[],"return":["void"],"name":"extract","type_params":["T0"],"params":[{"annotations":[],"direction":["Out"],"typ":["name",["BareName","T0"]],"variable":"variableSizeHeader","opt_value":null},{"annotations":[],"direction":["In"],"typ":["bit",["int",{"value":"32","width_signed":null}]],"variable":"variableFieldSizeInBits","opt_value":null}]}],["Method",{"annotations":[],"return":["name",["BareName","T1"]],"name":"lookahead","type_params":["T1"],"params":[]}],["Method",{"annotations":[],"return":["void"],"name":"advance","type_params":[],"params":[{"annotations":[],"direction":["In"],"typ":["bit",["int",{"value":"32","width_signed":null}]],"variable":"sizeInBits","opt_value":null}]}],["Method",{"annotations":[],"return":["bit",["int",{"value":"32","width_signed":null}]],"name":"length","type_params":[],"params":[]}]]}],
  ["ExternObject",{"annotations":[],"name":"packet_out","type_params":[],"methods":[["Method",{"annotations":[],"return":["void"],"name":"emit","type_params":["T2"],"params":[{"annotations":[],"direction":["In"],"typ":["name",["BareName","T2"]],"variable":"hdr","opt_value":null}]}]]}],
  ["ExternFunction",{"annotations":[],"return":["void"],"name":"verify","type_params":[],"params":[{"annotations":[],"direction":["In"],"typ":["bool"],"variable":"check","opt_value":null},{"annotations":[],"direction":["In"],"typ":["error"],"variable":"toSignal","opt_value":null}]}],
  ["Action",{"annotations":[{"name":"noWarn","body":["Unparsed",["\"unused\""]]}],"name":"NoAction","params":[],"body":{"annotations":[],"statements":[]}}],
  ["MatchKind",{"members":["exact","ternary","lpm"]}],
  ["TypeDef",{"annotations":[],"name":"PortId","typ_or_decl":["Left",["bit",["int",{"value":"4","width_signed":null}]]]}],
  ["Constant",{"annotations":[],"type":["name",["BareName","PortId"]],"name":"REAL_PORT_COUNT","value":["int",{"value":"8","width_signed":[4,false]}]}],
  ["Struct",{"annotations":[],"name":"InControl","fields":[{"annotations":[],"type":["name",["BareName","PortId"]],"name":"inputPort"}]}],
  ["Constant",{"annotations":[],"type":["name",["BareName","PortId"]],"name":"RECIRCULATE_IN_PORT","value":["int",{"value":"13","width_signed":null}]}],
  ["Constant",{"annotations":[],"type":["name",["BareName","PortId"]],"name":"CPU_IN_PORT","value":["int",{"value":"14","width_signed":null}]}],
  ["Struct",{"annotations":[],"name":"OutControl","fields":[{"annotations":[],"type":["name",["BareName","PortId"]],"name":"outputPort"}]}],
  ["Constant",{"annotations":[],"type":["name",["BareName","PortId"]],"name":"DROP_PORT","value":["int",{"value":"15","width_signed":null}]}],
  ["Constant",{"annotations":[],"type":["name",["BareName","PortId"]],"name":"CPU_OUT_PORT","value":["int",{"value":"14","width_signed":null}]}],
  ["Constant",{"annotations":[],"type":["name",["BareName","PortId"]],"name":"RECIRCULATE_OUT_PORT","value":["int",{"value":"13","width_signed":null}]}],
  ["ParserType",{"annotations":[],"name":"Parser","type_params":["H"],"params":[{"annotations":[],"direction":null,"typ":["name",["BareName","packet_in"]],"variable":"b","opt_value":null},{"annotations":[],"direction":["Out"],"typ":["name",["BareName","H"]],"variable":"parsedHeaders","opt_value":null}]}],
  ["ControlType",{"annotations":[],"name":"Pipe","type_params":["H3"],"params":[{"annotations":[],"direction":["InOut"],"typ":["name",["BareName","H3"]],"variable":"headers","opt_value":null},{"annotations":[],"direction":["In"],"typ":["error"],"variable":"parseError","opt_value":null},{"annotations":[],"direction":["In"],"typ":["name",["BareName","InControl"]],"variable":"inCtrl","opt_value":null},{"annotations":[],"direction":["Out"],"typ":["name",["BareName","OutControl"]],"variable":"outCtrl","opt_value":null}]}],
  ["ControlType",{"annotations":[],"name":"Deparser","type_params":["H4"],"params":[{"annotations":[],"direction":["InOut"],"typ":["name",["BareName","H4"]],"variable":"outputHeaders","opt_value":null},{"annotations":[],"direction":null,"typ":["name",["BareName","packet_out"]],"variable":"b","opt_value":null}]}],
  ["PackageType",{"annotations":[],"name":"VSS","type_params":["H5"],"params":[{"annotations":[],"direction":null,"typ":["specialized",{"base":["name",["BareName","Parser"]],"args":[["name",["BareName","H5"]]]}],"variable":"p","opt_value":null},{"annotations":[],"direction":null,"typ":["specialized",{"base":["name",["BareName","Pipe"]],"args":[["name",["BareName","H5"]]]}],"variable":"map","opt_value":null},{"annotations":[],"direction":null,"typ":["specialized",{"base":["name",["BareName","Deparser"]],"args":[["name",["BareName","H5"]]]}],"variable":"d","opt_value":null}]}],
  ["ExternObject",{"annotations":[],"name":"Ck16","type_params":[],"methods":[["Constructor",{"annotations":[],"name":"Ck16","params":[]}],["Method",{"annotations":[],"return":["void"],"name":"clear","type_params":[],"params":[]}],["Method",{"annotations":[],"return":["void"],"name":"update","type_params":["T6"],"params":[{"annotations":[],"direction":["In"],"typ":["name",["BareName","T6"]],"variable":"data","opt_value":null}]}],["Method",{"annotations":[],"return":["bit",["int",{"value":"16","width_signed":null}]],"name":"get","type_params":[],"params":[]}]]}],
  ["TypeDef",{"annotations":[],"name":"EthernetAddress","typ_or_decl":["Left",["bit",["int",{"value":"48","width_signed":null}]]]}],
  ["TypeDef",{"annotations":[],"name":"IPv4Address","typ_or_decl":["Left",["bit",["int",{"value":"32","width_signed":null}]]]}],
  ["Header",{"annotations":[],"name":"Ethernet_h","fields":[{"annotations":[],"type":["name",["BareName","EthernetAddress"]],"name":"dstAddr"},{"annotations":[],"type":["name",["BareName","EthernetAddress"]],"name":"srcAddr"},{"annotations":[],"type":["bit",["int",{"value":"16","width_signed":null}]],"name":"etherType"}]}],
  ["Header",{"annotations":[],"name":"Ipv4_h","fields":[{"annotations":[],"type":["bit",["int",{"value":"4","width_signed":null}]],"name":"version"},{"annotations":[],"type":["bit",["int",{"value":"4","width_signed":null}]],"name":"ihl"},{"annotations":[],"type":["bit",["int",{"value":"8","width_signed":null}]],"name":"diffserv"},{"annotations":[],"type":["bit",["int",{"value":"16","width_signed":null}]],"name":"totalLen"},{"annotations":[],"type":["bit",["int",{"value":"16","width_signed":null}]],"name":"identification"},{"annotations":[],"type":["bit",["int",{"value":"3","width_signed":null}]],"name":"flags"},{"annotations":[],"type":["bit",["int",{"value":"13","width_signed":null}]],"name":"fragOffset"},{"annotations":[],"type":["bit",["int",{"value":"8","width_signed":null}]],"name":"ttl"},{"annotations":[],"type":["bit",["int",{"value":"8","width_signed":null}]],"name":"protocol"},{"annotations":[],"type":["bit",["int",{"value":"16","width_signed":null}]],"name":"hdrChecksum"},{"annotations":[],"type":["name",["BareName","IPv4Address"]],"name":"srcAddr"},{"annotations":[],"type":["name",["BareName","IPv4Address"]],"name":"dstAddr"}]}],
  ["Error",{"members":["IPv4OptionsNotSupported","IPv4IncorrectVersion","IPv4ChecksumError"]}],
  ["Struct",{"annotations":[],"name":"Parsed_packet","fields":[{"annotations":[],"type":["name",["BareName","Ethernet_h"]],"name":"ethernet"},{"annotations":[],"type":["name",["BareName","Ipv4_h"]],"name":"ip"}]}],
  ["Parser",
   {"annotations":[],"name":"TopParser","type_params":[],"params":[{"annotations":[],"direction":null,"typ":["name",["BareName","packet_in"]],"variable":"b","opt_value":null},{"annotations":[],"direction":["Out"],"typ":["name",["BareName","Parsed_packet"]],"variable":"p","opt_value":null}],"constructor_params":[],
    "locals":[["Instantiation",{"annotations":[],"type":["name",["BareName","Ck16"]],"args":[],"name":"ck","init":null}]],
    "states":[{"annotations":[],"name":"start","statements":[["method_call",{"func":["expression_member",{"expr":["name",["BareName","b"]],"name":"extract"}],"type_args":[],"args":[["Expression",{"value":["expression_member",{"expr":["name",["BareName","p"]],"name":"ethernet"}]}]]}]],"transition":["Select",{"exprs":[["expression_member",{"expr":["expression_member",{"expr":["name",["BareName","p"]],"name":"ethernet"}],"name":"etherType"}]],"cases":[{"matches":[["Expression",{"expr":["int",{"value":"2048","width_signed":null}]}]],"next":"parse_ipv4"}]}]},
              {"annotations":[],"name":"parse_ipv4","statements":[["method_call",{"func":["expression_member",{"expr":["name",["BareName","b"]],"name":"extract"}],"type_args":[],"args":[["Expression",{"value":["expression_member",{"expr":["name",["BareName","p"]],"name":"ip"}]}]]}],["method_call",{"func":["name",["BareName","verify"]],"type_args":[],"args":[["Expression",{"value":["binary_op",{"op":["Eq"],"args":[["expression_member",{"expr":["expression_member",{"expr":["name",["BareName","p"]],"name":"ip"}],"name":"version"}],["int",{"value":"4","width_signed":[4,false]}]]}]}],["Expression",{"value":["error_member","IPv4IncorrectVersion"]}]]}],["method_call",{"func":["name",["BareName","verify"]],"type_args":[],"args":[["Expression",{"value":["binary_op",{"op":["Eq"],"args":[["expression_member",{"expr":["expression_member",{"expr":["name",["BareName","p"]],"name":"ip"}],"name":"ihl"}],["int",{"value":"5","width_signed":[4,false]}]]}]}],["Expression",{"value":["error_member","IPv4OptionsNotSupported"]}]]}],["method_call",{"func":["expression_member",{"expr":["name",["BareName","ck"]],"name":"clear"}],"type_args":[],"args":[]}],["method_call",{"func":["expression_member",{"expr":["name",["BareName","ck"]],"name":"update"}],"type_args":[],"args":[["Expression",{"value":["expression_member",{"expr":["name",["BareName","p"]],"name":"ip"}]}]]}],["method_call",{"func":["name",["BareName","verify"]],"type_args":[],"args":[["Expression",{"value":["binary_op",{"op":["Eq"],"args":[["call",{"func":["expression_member",{"expr":["name",["BareName","ck"]],"name":"get"}],"type_args":[],"args":[]}],["int",{"value":"0","width_signed":[16,false]}]]}]}],["Expression",{"value":["error_member","IPv4ChecksumError"]}]]}]],"transition":["Direct",{"next":"accept"}]}]}],

  ["control",
   {"annotations":[],"name":"TopPipe","type_params":[],"params":[{"annotations":[],"direction":["InOut"],"typ":["name",["BareName","Parsed_packet"]],"variable":"headers","opt_value":null},{"annotations":[],"direction":["In"],"typ":["error"],"variable":"parseError","opt_value":null},{"annotations":[],"direction":["In"],"typ":["name",["BareName","InControl"]],"variable":"inCtrl","opt_value":null},{"annotations":[],"direction":["Out"],"typ":["name",["BareName","OutControl"]],"variable":"outCtrl","opt_value":null}],"constructor_params":[],
    "locals":[["Action",{"annotations":[],"name":"Drop_action","params":[],"body":{"annotations":[],"statements":[["assignment",{"lhs":["expression_member",{"expr":["name",["BareName","outCtrl"]],"name":"outputPort"}],"rhs":["name",["BareName","DROP_PORT"]]}]]}}],
              ["Variable",{"annotations":[],"type":["name",["BareName","IPv4Address"]],"name":"nextHop","init":null}],
              ["Action",{"annotations":[],"name":"Set_nhop","params":[{"annotations":[],"direction":null,"typ":["name",["BareName","IPv4Address"]],"variable":"ipv4_dest","opt_value":null},{"annotations":[],"direction":null,"typ":["name",["BareName","PortId"]],"variable":"port","opt_value":null}],"body":{"annotations":[],"statements":[["assignment",{"lhs":["name",["BareName","nextHop"]],"rhs":["name",["BareName","ipv4_dest"]]}],["assignment",{"lhs":["expression_member",{"expr":["expression_member",{"expr":["name",["BareName","headers"]],"name":"ip"}],"name":"ttl"}],"rhs":["binary_op",{"op":["Minus"],"args":[["expression_member",{"expr":["expression_member",{"expr":["name",["BareName","headers"]],"name":"ip"}],"name":"ttl"}],["int",{"value":"1","width_signed":null}]]}]}],["assignment",{"lhs":["expression_member",{"expr":["name",["BareName","outCtrl"]],"name":"outputPort"}],"rhs":["name",["BareName","port"]]}]]}}],
              ["Table",{"annotations":[],"name":"ipv4_match","properties":[["Key",{"keys":[{"annotations":[],"key":["expression_member",{"expr":["expression_member",{"expr":["name",["BareName","headers"]],"name":"ip"}],"name":"dstAddr"}],"match_kind":"lpm"}]}],["Actions",{"actions":[{"annotations":[],"name":["BareName","Drop_action"],"args":[]},{"annotations":[],"name":["BareName","Set_nhop"],"args":[]}]}],["Custom",{"annotations":[],"const":false,"name":"size","value":["int",{"value":"1024","width_signed":null}]}],["Custom",{"annotations":[],"const":false,"name":"default_action","value":["name",["BareName","Drop_action"]]}]]}],
              ["Action",{"annotations":[],"name":"Send_to_cpu","params":[],"body":{"annotations":[],"statements":[["assignment",{"lhs":["expression_member",{"expr":["name",["BareName","outCtrl"]],"name":"outputPort"}],"rhs":["name",["BareName","CPU_OUT_PORT"]]}]]}}],
              ["Table",{"annotations":[],"name":"check_ttl","properties":[["Key",{"keys":[{"annotations":[],"key":["expression_member",{"expr":["expression_member",{"expr":["name",["BareName","headers"]],"name":"ip"}],"name":"ttl"}],"match_kind":"exact"}]}],["Actions",{"actions":[{"annotations":[],"name":["BareName","Send_to_cpu"],"args":[]},{"annotations":[],"name":["BareName","NoAction"],"args":[]}]}],["Custom",{"annotations":[],"const":true,"name":"default_action","value":["name",["BareName","NoAction"]]}]]}],
              ["Action",{"annotations":[],"name":"Set_dmac","params":[{"annotations":[],"direction":null,"typ":["name",["BareName","EthernetAddress"]],"variable":"dmac","opt_value":null}],"body":{"annotations":[],"statements":[["assignment",{"lhs":["expression_member",{"expr":["expression_member",{"expr":["name",["BareName","headers"]],"name":"ethernet"}],"name":"dstAddr"}],"rhs":["name",["BareName","dmac"]]}]]}}],
              ["Table",{"annotations":[],"name":"dmac","properties":[["Key",{"keys":[{"annotations":[],"key":["name",["BareName","nextHop"]],"match_kind":"exact"}]}],["Actions",{"actions":[{"annotations":[],"name":["BareName","Drop_action"],"args":[]},{"annotations":[],"name":["BareName","Set_dmac"],"args":[]}]}],["Custom",{"annotations":[],"const":false,"name":"size","value":["int",{"value":"1024","width_signed":null}]}],["Custom",{"annotations":[],"const":false,"name":"default_action","value":["name",["BareName","Drop_action"]]}]]}],
              ["Action",{"annotations":[],"name":"Set_smac","params":[{"annotations":[],"direction":null,"typ":["name",["BareName","EthernetAddress"]],"variable":"smac","opt_value":null}],"body":{"annotations":[],"statements":[["assignment",{"lhs":["expression_member",{"expr":["expression_member",{"expr":["name",["BareName","headers"]],"name":"ethernet"}],"name":"srcAddr"}],"rhs":["name",["BareName","smac"]]}]]}}],
              ["Table",{"annotations":[],"name":"smac","properties":[["Key",{"keys":[{"annotations":[],"key":["expression_member",{"expr":["name",["BareName","outCtrl"]],"name":"outputPort"}],"match_kind":"exact"}]}],["Actions",{"actions":[{"annotations":[],"name":["BareName","Drop_action"],"args":[]},{"annotations":[],"name":["BareName","Set_smac"],"args":[]}]}],["Custom",{"annotations":[],"const":false,"name":"size","value":["int",{"value":"16","width_signed":null}]}],["Custom",{"annotations":[],"const":false,"name":"default_action","value":["name",["BareName","Drop_action"]]}]]}]],
    "apply":{"annotations":[],"statements":[["conditional",{"cond":["binary_op",{"op":["NotEq"],"args":[["name",["BareName","parseError"]],["error_member","NoError"]]}],"tru":["block",{"block":{"annotations":[],"statements":[["method_call",{"func":["name",["BareName","Drop_action"]],"type_args":[],"args":[]}],["return",{"expr":null}]]}}],"fls":null}],["method_call",{"func":["expression_member",{"expr":["name",["BareName","ipv4_match"]],"name":"apply"}],"type_args":[],"args":[]}],["conditional",{"cond":["binary_op",{"op":["Eq"],"args":[["expression_member",{"expr":["name",["BareName","outCtrl"]],"name":"outputPort"}],["name",["BareName","DROP_PORT"]]]}],"tru":["return",{"expr":null}],"fls":null}],["method_call",{"func":["expression_member",{"expr":["name",["BareName","check_ttl"]],"name":"apply"}],"type_args":[],"args":[]}],["conditional",{"cond":["binary_op",{"op":["Eq"],"args":[["expression_member",{"expr":["name",["BareName","outCtrl"]],"name":"outputPort"}],["name",["BareName","CPU_OUT_PORT"]]]}],"tru":["return",{"expr":null}],"fls":null}],["method_call",{"func":["expression_member",{"expr":["name",["BareName","dmac"]],"name":"apply"}],"type_args":[],"args":[]}],["conditional",{"cond":["binary_op",{"op":["Eq"],"args":[["expression_member",{"expr":["name",["BareName","outCtrl"]],"name":"outputPort"}],["name",["BareName","DROP_PORT"]]]}],"tru":["return",{"expr":null}],"fls":null}],["method_call",{"func":["expression_member",{"expr":["name",["BareName","smac"]],"name":"apply"}],"type_args":[],"args":[]}]]}}],

  ["control",
   {"annotations":[],"name":"TopDeparser","type_params":[],"params":[{"annotations":[],"direction":["InOut"],"typ":["name",["BareName","Parsed_packet"]],"variable":"p","opt_value":null},{"annotations":[],"direction":null,"typ":["name",["BareName","packet_out"]],"variable":"b","opt_value":null}],"constructor_params":[],
    "locals":[["Instantiation",{"annotations":[],"type":["name",["BareName","Ck16"]],"args":[],"name":"ck","init":null}]],
    "apply":{"annotations":[],"statements":[["method_call",{"func":["expression_member",{"expr":["name",["BareName","b"]],"name":"emit"}],"type_args":[],"args":[["Expression",{"value":["expression_member",{"expr":["name",["BareName","p"]],"name":"ethernet"}]}]]}],["conditional",{"cond":["call",{"func":["expression_member",{"expr":["expression_member",{"expr":["name",["BareName","p"]],"name":"ip"}],"name":"isValid"}],"type_args":[],"args":[]}],"tru":["block",{"block":{"annotations":[],"statements":[["method_call",{"func":["expression_member",{"expr":["name",["BareName","ck"]],"name":"clear"}],"type_args":[],"args":[]}],["assignment",{"lhs":["expression_member",{"expr":["expression_member",{"expr":["name",["BareName","p"]],"name":"ip"}],"name":"hdrChecksum"}],"rhs":["int",{"value":"0","width_signed":[16,false]}]}],["method_call",{"func":["expression_member",{"expr":["name",["BareName","ck"]],"name":"update"}],"type_args":[],"args":[["Expression",{"value":["expression_member",{"expr":["name",["BareName","p"]],"name":"ip"}]}]]}],["assignment",{"lhs":["expression_member",{"expr":["expression_member",{"expr":["name",["BareName","p"]],"name":"ip"}],"name":"hdrChecksum"}],"rhs":["call",{"func":["expression_member",{"expr":["name",["BareName","ck"]],"name":"get"}],"type_args":[],"args":[]}]}]]}}],"fls":null}],["method_call",{"func":["expression_member",{"expr":["name",["BareName","b"]],"name":"emit"}],"type_args":[],"args":[["Expression",{"value":["expression_member",{"expr":["name",["BareName","p"]],"name":"ip"}]}]]}]]}}],
  ["Instantiation",{"annotations":[],"type":["name",["BareName","VSS"]],"args":[["Expression",{"value":["instantiation",{"type":["name",["BareName","TopParser"]],"args":[]}]}],["Expression",{"value":["instantiation",{"type":["name",["BareName","TopPipe"]],"args":[]}]}],["Expression",{"value":["instantiation",{"type":["name",["BareName","TopDeparser"]],"args":[]}]}]],"name":"main","init":null}]
 ]
]
